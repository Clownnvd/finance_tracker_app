===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  String? initError;

  try {
    // Load .env (đảm bảo file .env nằm đúng root và đã khai báo trong pubspec assets nếu bạn dùng kiểu đó)
    await dotenv.load(fileName: '.env');

    final supabaseUrl = dotenv.env['SUPABASE_URL'];
    final supabaseAnonKey = dotenv.env['SUPABASE_ANON_KEY'];

    if (supabaseUrl == null ||
        supabaseUrl.trim().isEmpty ||
        supabaseAnonKey == null ||
        supabaseAnonKey.trim().isEmpty) {
      throw Exception('Missing SUPABASE_URL hoặc SUPABASE_ANON_KEY trong file .env');
    }

    // ✅ Không dùng Supabase.initialize() nữa (vì đã chuyển sang Dio + REST API)
    setupDI(
      supabaseUrl: supabaseUrl.trim(),
      supabaseAnonKey: supabaseAnonKey.trim(),
    );
  } catch (e, st) {
    debugPrint('❌ Lỗi khởi tạo app: $e');
    debugPrintStack(stackTrace: st);
    initError = e.toString();
  }

  runApp(initError != null ? ErrorApp(errorMessage: initError!) : const AppRoot());
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      builder: (context, child) {
        final mediaQuery = MediaQuery.of(context);
        return MediaQuery(
          data: mediaQuery.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },

      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(24.0),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: 16),
                const Text(
                  'Đã xảy ra lỗi khi khởi tạo ứng dụng',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 12),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: const TextStyle(fontSize: 14),
                ),
                const SizedBox(height: 24),
                const Text(
                  'Vui lòng kiểm tra lại file .env và cấu hình Supabase.',
                  textAlign: TextAlign.center,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import '../network/session_local_data_source.dart';
import '../network/session_local_data_source_prefs.dart';

import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
    () => SessionLocalDataSourcePrefs(),
  );

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(() {
    final client = DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () => getIt<SessionLocalDataSource>().getAccessToken(),
    );
    print('Dio registered: ${getIt.isRegistered<Dio>()}');

    return client.dio;
  });

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(() => Login(getIt<AuthRepository>()));
  getIt.registerLazySingleton<Signup>(() => Signup(getIt<AuthRepository>()));

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(login: getIt<Login>(), signup: getIt<Signup>()),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
/// Base class for all application-level exceptions.
/// Always contains a message safe to show to UI.
class AppException implements Exception {
  final String message;

  const AppException(this.message);

  @override
  String toString() => message;
}

/// Network related issues: no internet, DNS fail, SocketException, etc.
class NetworkException extends AppException {
  const NetworkException([String message = 'Network error. Check connection'])
      : super(message);
}

/// Request timeout or server took too long to respond.
class TimeoutRequestException extends AppException {
  const TimeoutRequestException([String message = 'Request timed out'])
      : super(message);
}

/// Authentication errors: wrong password, invalid email, expired token, etc.
class AuthException extends AppException {
  const AuthException([String message = 'Authentication failed'])
      : super(message);
}

/// Validation errors in client-side or API-side input.
/// (e.g. password too short, email invalid format)
class ValidationException extends AppException {
  const ValidationException([String message = 'Invalid input data'])
      : super(message);
}

/// Server errors (5xx) or unexpected Supabase error messages.
class ServerException extends AppException {
  const ServerException([String message = 'Server error occurred'])
      : super(message);
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'package:dio/dio.dart';
import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic error) {
    if (error is AppException) return error;

    if (error is SocketException) {
      return const NetworkException('No internet connection');
    }

    if (error is TimeoutException) {
      return const TimeoutRequestException();
    }

    if (error is DioException) {
      return _mapDio(error);
    }

    return AppException(error.toString());
  }

  static AppException _mapDio(DioException e) {
    final status = e.response?.statusCode;
    final data = e.response?.data;

    final msg = _extractSupabaseMessage(data) ??
        _extractGenericMessage(data) ??
        e.message ??
        'Request failed';

    // 400/401/403: auth/validation hay gặp ở Supabase Auth
    if (status == 400 || status == 401 || status == 403) {
      return AuthException(msg);
    }

    if (status != null && status >= 500) {
      return ServerException(msg);
    }

    // Không rõ status thì vẫn trả msg thật thay vì "Unexpected server error"
    return ServerException(msg);
  }

  static String? _extractSupabaseMessage(dynamic data) {
    // Supabase thường trả: { code, error_code, msg }
    // hoặc: { error, error_description }
    if (data is Map<String, dynamic>) {
      final candidates = [
        data['msg'],
        data['error_description'],
        data['message'],
        data['error'],
        data['error_code'],
        data['code'],
      ];
      for (final c in candidates) {
        final s = c?.toString().trim();
        if (s != null && s.isNotEmpty) return s;
      }
    }
    return null;
  }

  static String? _extractGenericMessage(dynamic data) {
    if (data is String && data.trim().isNotEmpty) return data.trim();
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

typedef TokenProvider = Future<String?> Function();

class DioClient {
  final Dio dio;

  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            connectTimeout: const Duration(seconds: 15),
            receiveTimeout: const Duration(seconds: 15),
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          final token = await tokenProvider();

          // ✅ Supabase expects Authorization Bearer token
          // - if logged in: use accessToken
          // - else: use anonKey (very important for /auth/v1/*)
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';

          return handler.next(options);
        },
        onError: (e, handler) {
          // log để nhìn ra lỗi thật
          // ignore: avoid_print
          print('❌ ${e.requestOptions.method} ${e.requestOptions.uri}');
          // ignore: avoid_print
          print('Status: ${e.response?.statusCode}');
          // ignore: avoid_print
          print('Data: ${e.response?.data}');
          return handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
abstract class SessionLocalDataSource {
  Future<void> saveAccessToken(String token);
  Future<String?> getAccessToken();
  Future<void> clear();
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source_prefs.dart =====
import 'package:shared_preferences/shared_preferences.dart';

import 'session_local_data_source.dart';

class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  static const _kAccessToken = 'access_token';

  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_kAccessToken, token);
  }

  @override
  Future<String?> getAccessToken() async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString(_kAccessToken);
  }

  @override
  Future<void> clear() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\theme\app_theme.dart =====
import 'package:flutter/material.dart';

class AppSpacing {
  static const double xs = 4;
  static const double sm = 8;
  static const double md = 16;
  static const double lg = 24;
  static const double xl = 32;
  static const double xxl = 40;
}

class AppColors {
  static const Color primary = Color(0xFF1A73E8);
  static const Color primaryLight = Color(0xFFEEF5FF);
  static const Color primaryDark = Color(0xFF0F4FB8);

  static const Color secondary = Color(0xFFFF8A00);
  static const Color secondaryLight = Color(0xFFFFF3E6);
  static const Color secondaryDark = Color(0xFFCC6F00);

  static const Color neutral900 = Color(0xFF212121);
  static const Color neutral800 = Color(0xFF303030);
  static const Color neutral700 = Color(0xFF424242);
  static const Color neutral600 = Color(0xFF616161);
  static const Color neutral500 = Color(0xFF757575);
  static const Color neutral400 = Color(0xFF9E9E9E);
  static const Color neutral300 = Color(0xFFBDBDBD);
  static const Color neutral200 = Color(0xFFE0E0E0);
  static const Color neutral100 = Color(0xFFEFEFEF);
  static const Color neutral50 = Color(0xFFF7F7F7);

  static const Color white = Colors.white;

  static const Color success = Color(0xFF4CAF50);
  static const Color error = Color(0xFFE53935);
  static const Color warning = Color(0xFFFFC107);
  static const Color info = Color(0xFF0288D1);
}

class AppTextStyles {
  static const String _font = 'Roboto';

  static TextStyle get display => const TextStyle(
        fontFamily: _font,
        fontSize: 34,
        fontWeight: FontWeight.w700,
        height: 1.2,
        color: AppColors.neutral900,
      );

  static TextStyle get headline => const TextStyle(
        fontFamily: _font,
        fontSize: 24,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get title => const TextStyle(
        fontFamily: _font,
        fontSize: 20,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get bodyLg => const TextStyle(
        fontFamily: _font,
        fontSize: 16,
        fontWeight: FontWeight.w500,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get body => const TextStyle(
        fontFamily: _font,
        fontSize: 14,
        fontWeight: FontWeight.w400,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get caption => const TextStyle(
        fontFamily: _font,
        fontSize: 12,
        fontWeight: FontWeight.w400,
        height: 1.3,
        color: AppColors.neutral600,
      );
}

class AppRadius {
  static const BorderRadius small = BorderRadius.all(Radius.circular(8));
  static const BorderRadius medium = BorderRadius.all(Radius.circular(12));
  static const BorderRadius large = BorderRadius.all(Radius.circular(20));
  static const BorderRadius pill = BorderRadius.all(Radius.circular(100));
}

class AppShadows {
  static List<BoxShadow> level1 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.08),
      blurRadius: 4,
      offset: const Offset(0, 2),
    ),
  ];

  static List<BoxShadow> level2 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.12),
      blurRadius: 12,
      offset: const Offset(0, 4),
    ),
  ];

  static List<BoxShadow> level3 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.16),
      blurRadius: 20,
      offset: const Offset(0, 8),
    ),
  ];
}

class AppTheme {
  static ThemeData get light {
    final base = ThemeData.light(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: AppColors.white,
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: AppColors.white,
        background: AppColors.white,
        outline: AppColors.neutral300,
        outlineVariant: AppColors.neutral200,
        onSurfaceVariant: AppColors.neutral500,
      ),
      textTheme: base.textTheme.copyWith(
        displayLarge: AppTextStyles.display,
        headlineMedium: AppTextStyles.headline,
        titleMedium: AppTextStyles.title,
        bodyLarge: AppTextStyles.bodyLg,
        bodyMedium: AppTextStyles.body,
        bodySmall: AppTextStyles.caption,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: AppColors.white,
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral900,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral900),
      ),
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          backgroundColor: AppColors.primary,
          foregroundColor: AppColors.white,
          padding: const EdgeInsets.symmetric(vertical: 14, horizontal: 20),
          shape: RoundedRectangleBorder(
            borderRadius: AppRadius.medium,
          ),
          textStyle: const TextStyle(
            fontFamily: 'Roboto',
            fontSize: 14,
            fontWeight: FontWeight.w600,
          ),
        ),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: AppColors.neutral50,
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral200),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral200),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        errorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error),
        ),
        focusedErrorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
      cardTheme: CardThemeData(
        color: AppColors.white,
        elevation: 0,
        margin: EdgeInsets.zero,
        shape: RoundedRectangleBorder(
          borderRadius: AppRadius.large,
          side: const BorderSide(color: AppColors.neutral200),
        ),
        shadowColor: Colors.black.withOpacity(0.12),
      ),
    );
  }

  static ThemeData get dark {
    final base = ThemeData.dark(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: const Color(0xFF121212),
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: const Color(0xFF1D1D1D),
        background: const Color(0xFF121212),
        outline: AppColors.neutral600,
        outlineVariant: AppColors.neutral700,
        onSurfaceVariant: AppColors.neutral400,
      ),
      textTheme: base.textTheme.apply(
        fontFamily: 'Roboto',
        bodyColor: AppColors.neutral100,
        displayColor: AppColors.neutral100,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: Color(0xFF121212),
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral100,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral100),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: const Color(0xFF1D1D1D),
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral600),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral600),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\app_validators.dart =====
import 'package:email_validator/email_validator.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

class AppValidators {
  static String? email(String? value) {
    final v = value?.trim();

    if (v == null || v.isEmpty) {
      return ValidationMessages.enterEmail;
    }

    if (!EmailValidator.validate(v)) {
      return ValidationMessages.invalidEmail;
    }

    return null;
  }

  static String? password(String? value) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.enterPassword;
    }

    if (value.length < 8) {
      return ValidationMessages.shortPassword;
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(value)) {
      return ValidationMessages.passwordNeedLetter;
    }

    if (!RegExp(r'[0-9]').hasMatch(value)) {
      return ValidationMessages.passwordNeedNumber;
    }

    return null;
  }

  static String? confirmPassword(String? value, String password) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.confirmPassword;
    }

    if (value != password) {
      return ValidationMessages.passwordMismatch;
    }

    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\validation_messages.dart =====
class ValidationMessages {
  static const enterEmail = 'Please enter your email';
  static const invalidEmail = 'Email format is invalid';

  static const enterPassword = 'Please enter your password';
  static const shortPassword = 'Password must be at least 8 characters';
  static const passwordNeedLetter = 'Password must include at least one letter';
  static const passwordNeedNumber = 'Password must include at least one number';

  static const confirmPassword = 'Please confirm your password';
  static const passwordMismatch = 'Password does not match';
  
  static const enterFullName = 'Please enter your full name';
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\models\auth_remote_data_source.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/error/exception_mapper.dart';
import 'package:finance_tracker_app/core/network/supabase_endpoints.dart';

class SignUpResult {
  final bool emailConfirmationRequired;
  final String? message;

  const SignUpResult({
    required this.emailConfirmationRequired,
    this.message,
  });
}

abstract class AuthRemoteDataSource {
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  });

  Future<String> login({
    required String email,
    required String password,
  });

  Future<Map<String, dynamic>> getMe();
}

class AuthRemoteDataSourceImpl implements AuthRemoteDataSource {
  final Dio dio;
  AuthRemoteDataSourceImpl(this.dio);

  @override
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authSignUp,
        data: {
          'email': email,
          'password': password,
          'data': {'full_name': fullName},
        },
      );

      // Supabase thường trả user/session (tuỳ settings)
      // Nếu bật email confirm, thường session = null => yêu cầu verify email
      final data = res.data;
      final session = (data is Map<String, dynamic>) ? data['session'] : null;

      final requiresConfirm = session == null;

      return SignUpResult(
        emailConfirmationRequired: requiresConfirm,
        message: requiresConfirm
            ? 'Sign up successful. Please verify your email before logging in.'
            : 'Sign up successful.',
      );
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<String> login({
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authToken,
        queryParameters: {'grant_type': 'password'},
        data: {'email': email, 'password': password},
      );

      final json = res.data as Map<String, dynamic>;
      final token = (json['access_token'] ?? '').toString();

      if (token.isEmpty) {
        throw ExceptionMapper.map(
          DioException(
            requestOptions: res.requestOptions,
            response: res,
            error: 'Missing access_token',
            type: DioExceptionType.badResponse,
          ),
        );
      }

      return token;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<Map<String, dynamic>> getMe() async {
    try {
      final res = await dio.get(SupabaseEndpoints.authUser);
      return res.data as Map<String, dynamic>;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\repositories\auth_repository_impl.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';

class AuthRepositoryImpl implements AuthRepository {
  final AuthRemoteDataSource remote;
  final SessionLocalDataSource sessionLocal;

  AuthRepositoryImpl({
    required this.remote,
    required this.sessionLocal,
  });

  @override
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  }) async {
    final result = await remote.signup(
      fullName: fullName,
      email: email,
      password: password,
    );

    // ✅ Bật email confirm => không login ngay
    if (result.emailConfirmationRequired) {
      throw AuthException(
        result.message ??
            'Sign up successful. Please verify your email before logging in.',
      );
    }

    // Nếu project bạn tắt confirm email (session có sẵn) thì có thể auto login:
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel.fromJson({
      'id': me['id'],
      'email': me['email'],
      'fullName': (me['user_metadata']?['full_name']) as String?,
    });
  }

  @override
  Future<UserModel> login({
    required String email,
    required String password,
  }) async {
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel(
      id: (me['id'] ?? '').toString(),
      email: (me['email'] ?? '').toString(),
      fullName: (me['user_metadata']?['full_name']) as String?,
    );
  }

  @override
  Future<void> logout() async {
    await sessionLocal.clear();
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.dart =====
import 'package:freezed_annotation/freezed_annotation.dart';

part 'user_model.freezed.dart';
part 'user_model.g.dart';

@freezed
abstract class UserModel with _$UserModel {
  const factory UserModel({
    required String id,
    required String email,
    String? fullName,
  }) = _UserModel;

  factory UserModel.fromJson(Map<String, dynamic> json) =>
      _$UserModelFromJson(json);
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.freezed.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND
// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'user_model.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

// dart format off
T _$identity<T>(T value) => value;

/// @nodoc
mixin _$UserModel {

 String get id; String get email; String? get fullName;
/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
$UserModelCopyWith<UserModel> get copyWith => _$UserModelCopyWithImpl<UserModel>(this as UserModel, _$identity);

  /// Serializes this UserModel to a JSON map.
  Map<String, dynamic> toJson();


@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class $UserModelCopyWith<$Res>  {
  factory $UserModelCopyWith(UserModel value, $Res Function(UserModel) _then) = _$UserModelCopyWithImpl;
@useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class _$UserModelCopyWithImpl<$Res>
    implements $UserModelCopyWith<$Res> {
  _$UserModelCopyWithImpl(this._self, this._then);

  final UserModel _self;
  final $Res Function(UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@pragma('vm:prefer-inline') @override $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_self.copyWith(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}

}


/// Adds pattern-matching-related methods to [UserModel].
extension UserModelPatterns on UserModel {
/// A variant of `map` that fallback to returning `orElse`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeMap<TResult extends Object?>(TResult Function( _UserModel value)?  $default,{required TResult orElse(),}){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// Callbacks receives the raw object, upcasted.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case final Subclass2 value:
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult map<TResult extends Object?>(TResult Function( _UserModel value)  $default,){
final _that = this;
switch (_that) {
case _UserModel():
return $default(_that);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `map` that fallback to returning `null`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? mapOrNull<TResult extends Object?>(TResult? Function( _UserModel value)?  $default,){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return null;

}
}
/// A variant of `when` that fallback to an `orElse` callback.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeWhen<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)?  $default,{required TResult orElse(),}) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// As opposed to `map`, this offers destructuring.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case Subclass2(:final field2):
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult when<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)  $default,) {final _that = this;
switch (_that) {
case _UserModel():
return $default(_that.id,_that.email,_that.fullName);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `when` that fallback to returning `null`
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? whenOrNull<TResult extends Object?>(TResult? Function( String id,  String email,  String? fullName)?  $default,) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return null;

}
}

}

/// @nodoc
@JsonSerializable()

class _UserModel implements UserModel {
  const _UserModel({required this.id, required this.email, this.fullName});
  factory _UserModel.fromJson(Map<String, dynamic> json) => _$UserModelFromJson(json);

@override final  String id;
@override final  String email;
@override final  String? fullName;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
_$UserModelCopyWith<_UserModel> get copyWith => __$UserModelCopyWithImpl<_UserModel>(this, _$identity);

@override
Map<String, dynamic> toJson() {
  return _$UserModelToJson(this, );
}

@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is _UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class _$UserModelCopyWith<$Res> implements $UserModelCopyWith<$Res> {
  factory _$UserModelCopyWith(_UserModel value, $Res Function(_UserModel) _then) = __$UserModelCopyWithImpl;
@override @useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class __$UserModelCopyWithImpl<$Res>
    implements _$UserModelCopyWith<$Res> {
  __$UserModelCopyWithImpl(this._self, this._then);

  final _UserModel _self;
  final $Res Function(_UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @pragma('vm:prefer-inline') $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_UserModel(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}


}

// dart format on

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.g.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'user_model.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_UserModel _$UserModelFromJson(Map<String, dynamic> json) => _UserModel(
  id: json['id'] as String,
  email: json['email'] as String,
  fullName: json['fullName'] as String?,
);

Map<String, dynamic> _$UserModelToJson(_UserModel instance) =>
    <String, dynamic>{
      'id': instance.id,
      'email': instance.email,
      'fullName': instance.fullName,
    };

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\repositories\auth_repository.dart =====
import '../entities/user_model.dart';

abstract class AuthRepository {
  Future<UserModel> login({required String email, required String password});
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  });
  Future<void> logout();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\login.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Login {
  final AuthRepository repository;
  Login(this.repository);

  Future<UserModel> call({required String email, required String password}) {
    if (email.trim().isEmpty) {
      throw const ValidationException('Email cannot be empty');
    }

    if (!email.contains('@') || !email.contains('.')) {
      throw const ValidationException('Invalid email format');
    }

    if (password.isEmpty) {
      throw const ValidationException('Password cannot be empty');
    }

    if (password.length < 8) {
      throw const ValidationException('Password must be at least 8 characters');
    }

    return repository.login(email: email, password: password);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\sign_up.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Signup {
  final AuthRepository repository;

  Signup(this.repository);

  Future<UserModel> call({
    required String email,
    required String password,
    required String fullName,
  }) {
    final trimmedEmail = email.trim();
    final trimmedName = fullName.trim();

    _validateFullName(trimmedName);
    _validateEmail(trimmedEmail);
    _validatePassword(password);

    return repository.signup(
      email: trimmedEmail,
      password: password,
      fullName: trimmedName,
    );
  }


  void _validateFullName(String name) {
    if (name.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterFullName,
      );
    }
  }

  void _validateEmail(String email) {
    if (email.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterEmail,
      );
    }

    final emailRegex = RegExp(r'^[^@]+@[^@]+\.[^@]+$');
    if (!emailRegex.hasMatch(email)) {
      throw const ValidationException(
        ValidationMessages.invalidEmail,
      );
    }
  }

  void _validatePassword(String password) {
    if (password.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterPassword,
      );
    }

    if (password.length < 8) {
      throw const ValidationException(
        ValidationMessages.shortPassword,
      );
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedLetter,
      );
    }

    if (!RegExp(r'[0-9]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedNumber,
      );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:logger/logger.dart';

import 'auth_state.dart';
import '../../domain/usecases/login.dart';
import '../../domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';

class AuthCubit extends Cubit<AuthState> {
  final Login _login;
  final Signup _signup;
  final Logger _logger;

  AuthCubit({required Login login, required Signup signup, Logger? logger})
    : _login = login,
      _signup = signup,
      _logger = logger ?? Logger(),
      super(AuthInitial());

  Future<void> login(String email, String password) async {
    if (state is AuthSuccess) {
      emit(AuthFailure('You are already logged in.'));
      return;
    }

    await _runAuthAction(
      actionLabel: 'login',
      action: () => _login(email: email, password: password),
      successMessage: 'Login success',
    );
  }

  Future<void> signup(String fullName, String email, String password) async {
    await _runAuthAction(
      actionLabel: 'signup',
      action: () =>
          _signup(fullName: fullName, email: email, password: password),
      successMessage: 'Signup success',
    );
  }

  Future<void> _runAuthAction({
    required String actionLabel,
    required Future<dynamic> Function() action,
    required String successMessage,
  }) async {
    emit(AuthLoading());

    const maxAttempts = 2;
    var attempt = 0;

    while (true) {
      try {
        final user = await action();
        _logger.i('$successMessage: ${user.email}', error: null);
        emit(AuthSuccess(user));
        return;
      } on NetworkException catch (e) {
        attempt++;
        _logger.w(
          'NetworkException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on TimeoutRequestException catch (e) {
        attempt++;
        _logger.w(
          'TimeoutRequestException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on AuthException catch (e) {
        _logger.w('AuthException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } on AppException catch (e) {
        _logger.w('AppException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } catch (e, s) {
        _logger.e('Unexpected error on $actionLabel', error: e, stackTrace: s);
        emit(AuthFailure('Unexpected error. Please try again.'));
        return;
      }
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\dashboard_screen.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class DashboardScreen extends StatefulWidget {
  const DashboardScreen({super.key});

  @override
  State<DashboardScreen> createState() => _DashboardScreenState();
}

class _DashboardScreenState extends State<DashboardScreen> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Dashboard'),
      ),
      body: const Center(
        child: Text('Welcome to the Dashboard!'),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _formKey = GlobalKey<FormState>();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  void _onLoginPressed(bool isLoading) {
    if (isLoading) return;

    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().login(
          _emailController.text.trim(),
          _passwordController.text,
        );
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final colorScheme = theme.colorScheme;

    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      backgroundColor: colorScheme.background,
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) {
            if (state is AuthFailure) {
              ScaffoldMessenger.of(context)
                ..hideCurrentSnackBar()
                ..showSnackBar(
                  SnackBar(content: Text(state.message)),
                );
              return;
            }

            if (state is AuthSuccess) {
              // ✅ LOGIN THÀNH CÔNG → DASHBOARD (clear stack)
              Navigator.pushNamedAndRemoveUntil(
                context,
                AppRoutes.dashboard,
                (_) => false,
              );
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return SingleChildScrollView(
              padding: const EdgeInsets.symmetric(horizontal: 24),
              child: Form(
                key: _formKey,
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  crossAxisAlignment: CrossAxisAlignment.stretch,
                  children: [
                    const SizedBox(height: 40),
                    Text(
                      'Welcome to Personal\nFinance Tracker',
                      textAlign: TextAlign.center,
                      style: theme.textTheme.headlineSmall?.copyWith(
                        fontWeight: FontWeight.bold,
                        color: colorScheme.onBackground,
                      ),
                    ),
                    const SizedBox(height: 32),
                    Center(child: loginImage),
                    const SizedBox(height: 32),
                    TextFormField(
                      controller: _emailController,
                      keyboardType: TextInputType.emailAddress,
                      validator: AppValidators.email,
                      decoration: InputDecoration(
                        labelText: 'Email',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                      ),
                    ),
                    const SizedBox(height: 16),
                    TextFormField(
                      controller: _passwordController,
                      obscureText: _isPasswordHidden,
                      keyboardType: TextInputType.visiblePassword,
                      validator: AppValidators.password,
                      decoration: InputDecoration(
                        labelText: 'Password',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                        suffixIcon: IconButton(
                          icon: Icon(
                            _isPasswordHidden
                                ? Icons.visibility_off
                                : Icons.visibility,
                          ),
                          onPressed: () {
                            setState(() {
                              _isPasswordHidden = !_isPasswordHidden;
                            });
                          },
                        ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    SizedBox(
                      height: 52,
                      child: ElevatedButton(
                        onPressed: () => _onLoginPressed(isLoading),
                        style: ElevatedButton.styleFrom(
                          backgroundColor: colorScheme.primary,
                          foregroundColor: colorScheme.onPrimary,
                          shape: RoundedRectangleBorder(
                            borderRadius: BorderRadius.circular(12),
                          ),
                        ),
                        child: isLoading
                            ? const SizedBox(
                                width: 22,
                                height: 22,
                                child: CircularProgressIndicator(
                                  strokeWidth: 2,
                                ),
                              )
                            : const Text(
                                'Login',
                                style: TextStyle(
                                  fontSize: 18,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          "Don't have an account? ",
                          style: theme.textTheme.bodyMedium?.copyWith(
                            color: colorScheme.onSurface.withOpacity(0.6),
                          ),
                        ),
                        GestureDetector(
                          onTap: () {
                            Navigator.pushNamed(context, AppRoutes.signUp);
                          },
                          child: Text(
                            "Register",
                            style: theme.textTheme.bodyMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                              color: colorScheme.primary,
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),
                  ],
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final _formKey = GlobalKey<FormState>();

  final _fullNameController = TextEditingController();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  final _confirmPasswordController = TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  void _onSignUpPressed(BuildContext context, bool isLoading) {
    if (isLoading) return;
    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().signup(
      _fullNameController.text.trim(),
      _emailController.text.trim(),
      _passwordController.text,
    );
  }

  void _showSnack(String msg) {
    ScaffoldMessenger.of(context)
      ..hideCurrentSnackBar()
      ..showSnackBar(SnackBar(content: Text(msg)));
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;
    final ts = theme.textTheme;

    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) async {
            if (state is AuthFailure) {
              _showSnack(state.message);
            }
            if (state is AuthSuccess) {
              _showSnack('Sign up successful. Please login.');
              await Future.delayed(const Duration(milliseconds: 800));
              if (!mounted) return;
              Navigator.pushReplacementNamed(context, AppRoutes.login);
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return Stack(
              children: [
                Center(
                  child: SingleChildScrollView(
                    padding: const EdgeInsets.symmetric(
                      horizontal: AppSpacing.lg,
                    ),
                    child: Form(
                      key: _formKey,
                      child: Column(
                        children: [
                          const SizedBox(height: AppSpacing.lg),
                          Text(
                            'Sign Up',
                            style: ts.headlineMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          signUpImage,
                          const SizedBox(height: AppSpacing.xl),
                          AppValidatedTextField(
                            controller: _fullNameController,
                            label: 'Full Name',
                            keyboardType: TextInputType.name,
                            validator: (value) =>
                                value == null || value.trim().isEmpty
                                ? 'Please enter your full name'
                                : null,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _emailController,
                            label: 'Email',
                            keyboardType: TextInputType.emailAddress,
                            validator: AppValidators.email,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _passwordController,
                            label: 'Password',
                            obscureText: !_showPassword,
                            validator: AppValidators.password,
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showPassword = !_showPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _confirmPasswordController,
                            label: 'Confirm password',
                            obscureText: !_showConfirmPassword,
                            validator: (value) => AppValidators.confirmPassword(
                              value,
                              _passwordController.text,
                            ),
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showConfirmPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showConfirmPassword =
                                    !_showConfirmPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          SizedBox(
                            width: double.infinity,
                            height: AppSpacing.xxl,
                            child: ElevatedButton(
                              style: ElevatedButton.styleFrom(
                                backgroundColor: cs.primary,
                                foregroundColor: cs.onPrimary,
                                shape: RoundedRectangleBorder(
                                  borderRadius: BorderRadius.circular(12),
                                ),
                              ),
                              onPressed: () =>
                                  _onSignUpPressed(context, isLoading),
                              child: isLoading
                                  ? const SizedBox(
                                      width: 20,
                                      height: 20,
                                      child: CircularProgressIndicator(
                                        strokeWidth: 2,
                                        valueColor: AlwaysStoppedAnimation(
                                          Colors.white,
                                        ),
                                      ),
                                    )
                                  : Text(
                                      'Sign Up',
                                      style: ts.titleMedium?.copyWith(
                                        fontWeight: FontWeight.w600,
                                      ),
                                    ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Text(
                                "Already have an account?",
                                style: ts.bodyMedium,
                              ),
                              const SizedBox(width: AppSpacing.xs),
                              GestureDetector(
                                onTap: () => Navigator.pushNamed(
                                  context,
                                  AppRoutes.login,
                                ),
                                child: Text(
                                  "Login",
                                  style: ts.bodyMedium?.copyWith(
                                    color: cs.primary,
                                    fontWeight: FontWeight.w600,
                                  ),
                                ),
                              ),
                            ],
                          ),
                          const SizedBox(height: AppSpacing.lg),
                        ],
                      ),
                    ),
                  ),
                ),
                if (isLoading)
                  Positioned.fill(
                    child: AbsorbPointer(
                      absorbing: true,
                      child: Container(
                        color: Colors.black.withOpacity(0.2),
                        alignment: Alignment.center,
                        child: const SizedBox(
                          width: 36,
                          height: 36,
                          child: CircularProgressIndicator(strokeWidth: 3),
                        ),
                      ),
                    ),
                  ),
              ],
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 16, color: Colors.black54),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const String aEnv = '.env';
  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();

  /// List of all assets
  static List<String> get values => [aEnv];
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_validated_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_validated_text_field.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:flutter/material.dart';

class AppValidatedTextField extends StatelessWidget {
  final TextEditingController controller;
  final String label;
  final String? hintText;
  final String? Function(String?)? validator;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextInputType keyboardType;
  final TextInputAction? textInputAction;
  final ValueChanged<String>? onChanged;
  final bool enabled;

  const AppValidatedTextField({
    super.key,
    required this.controller,
    required this.label,
    this.hintText,
    this.validator,
    this.obscureText = false,
    this.suffixIcon,
    this.keyboardType = TextInputType.text,
    this.textInputAction,
    this.onChanged,
    this.enabled = true,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;

    OutlineInputBorder border(Color color) => OutlineInputBorder(
      borderRadius: AppRadius.medium,
      borderSide: BorderSide(color: color, width: 1),
    );

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          label,
          style: theme.textTheme.bodyMedium?.copyWith(
            fontWeight: FontWeight.w500,
            color: cs.onBackground,
          ),
        ),
        const SizedBox(height: 8),
        TextFormField(
          controller: controller,
          obscureText: obscureText,
          validator: validator,
          autovalidateMode: AutovalidateMode.onUserInteraction,
          keyboardType: keyboardType,
          textInputAction: textInputAction,
          onChanged: onChanged,
          enabled: enabled,
          decoration: InputDecoration(
            hintText: hintText ?? label,
            hintStyle: theme.textTheme.bodyMedium?.copyWith(
              color: cs.onSurfaceVariant,
            ),
            contentPadding: const EdgeInsets.all(16),
            suffixIcon: suffixIcon,
            border: border(cs.outline),
            enabledBorder: border(cs.outline),
            focusedBorder: border(cs.primary),
            errorBorder: border(cs.error),
            focusedErrorBorder: border(cs.error),
            disabledBorder: border(cs.outlineVariant),
          ),
        ),
      ],
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  String? initError;

  try {
    // Load .env (đảm bảo file .env nằm đúng root và đã khai báo trong pubspec assets nếu bạn dùng kiểu đó)
    await dotenv.load(fileName: '.env');

    final supabaseUrl = dotenv.env['SUPABASE_URL'];
    final supabaseAnonKey = dotenv.env['SUPABASE_ANON_KEY'];

    if (supabaseUrl == null ||
        supabaseUrl.trim().isEmpty ||
        supabaseAnonKey == null ||
        supabaseAnonKey.trim().isEmpty) {
      throw Exception('Missing SUPABASE_URL hoặc SUPABASE_ANON_KEY trong file .env');
    }

    // ✅ Không dùng Supabase.initialize() nữa (vì đã chuyển sang Dio + REST API)
    setupDI(
      supabaseUrl: supabaseUrl.trim(),
      supabaseAnonKey: supabaseAnonKey.trim(),
    );
  } catch (e, st) {
    debugPrint('❌ Lỗi khởi tạo app: $e');
    debugPrintStack(stackTrace: st);
    initError = e.toString();
  }

  runApp(initError != null ? ErrorApp(errorMessage: initError!) : const AppRoot());
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      builder: (context, child) {
        final mediaQuery = MediaQuery.of(context);
        return MediaQuery(
          data: mediaQuery.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },

      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(24.0),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: 16),
                const Text(
                  'Đã xảy ra lỗi khi khởi tạo ứng dụng',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 12),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: const TextStyle(fontSize: 14),
                ),
                const SizedBox(height: 24),
                const Text(
                  'Vui lòng kiểm tra lại file .env và cấu hình Supabase.',
                  textAlign: TextAlign.center,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import '../network/session_local_data_source.dart';
import '../network/session_local_data_source_prefs.dart';

import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
    () => SessionLocalDataSourcePrefs(),
  );

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(() {
    final client = DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () => getIt<SessionLocalDataSource>().getAccessToken(),
    );
    print('Dio registered: ${getIt.isRegistered<Dio>()}');

    return client.dio;
  });

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(() => Login(getIt<AuthRepository>()));
  getIt.registerLazySingleton<Signup>(() => Signup(getIt<AuthRepository>()));

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(login: getIt<Login>(), signup: getIt<Signup>()),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
/// Base class for all application-level exceptions.
/// Always contains a message safe to show to UI.
class AppException implements Exception {
  final String message;

  const AppException(this.message);

  @override
  String toString() => message;
}

/// Network related issues: no internet, DNS fail, SocketException, etc.
class NetworkException extends AppException {
  const NetworkException([String message = 'Network error. Check connection'])
      : super(message);
}

/// Request timeout or server took too long to respond.
class TimeoutRequestException extends AppException {
  const TimeoutRequestException([String message = 'Request timed out'])
      : super(message);
}

/// Authentication errors: wrong password, invalid email, expired token, etc.
class AuthException extends AppException {
  const AuthException([String message = 'Authentication failed'])
      : super(message);
}

/// Validation errors in client-side or API-side input.
/// (e.g. password too short, email invalid format)
class ValidationException extends AppException {
  const ValidationException([String message = 'Invalid input data'])
      : super(message);
}

/// Server errors (5xx) or unexpected Supabase error messages.
class ServerException extends AppException {
  const ServerException([String message = 'Server error occurred'])
      : super(message);
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'package:dio/dio.dart';
import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic error) {
    if (error is AppException) return error;

    if (error is SocketException) {
      return const NetworkException('No internet connection');
    }

    if (error is TimeoutException) {
      return const TimeoutRequestException();
    }

    if (error is DioException) {
      return _mapDio(error);
    }

    return AppException(error.toString());
  }

  static AppException _mapDio(DioException e) {
    final status = e.response?.statusCode;
    final data = e.response?.data;

    final msg = _extractSupabaseMessage(data) ??
        _extractGenericMessage(data) ??
        e.message ??
        'Request failed';

    // 400/401/403: auth/validation hay gặp ở Supabase Auth
    if (status == 400 || status == 401 || status == 403) {
      return AuthException(msg);
    }

    if (status != null && status >= 500) {
      return ServerException(msg);
    }

    // Không rõ status thì vẫn trả msg thật thay vì "Unexpected server error"
    return ServerException(msg);
  }

  static String? _extractSupabaseMessage(dynamic data) {
    // Supabase thường trả: { code, error_code, msg }
    // hoặc: { error, error_description }
    if (data is Map<String, dynamic>) {
      final candidates = [
        data['msg'],
        data['error_description'],
        data['message'],
        data['error'],
        data['error_code'],
        data['code'],
      ];
      for (final c in candidates) {
        final s = c?.toString().trim();
        if (s != null && s.isNotEmpty) return s;
      }
    }
    return null;
  }

  static String? _extractGenericMessage(dynamic data) {
    if (data is String && data.trim().isNotEmpty) return data.trim();
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

typedef TokenProvider = Future<String?> Function();

class DioClient {
  final Dio dio;

  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            connectTimeout: const Duration(seconds: 15),
            receiveTimeout: const Duration(seconds: 15),
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          final token = await tokenProvider();

          // ✅ Supabase expects Authorization Bearer token
          // - if logged in: use accessToken
          // - else: use anonKey (very important for /auth/v1/*)
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';

          return handler.next(options);
        },
        onError: (e, handler) {
          // log để nhìn ra lỗi thật
          // ignore: avoid_print
          print('❌ ${e.requestOptions.method} ${e.requestOptions.uri}');
          // ignore: avoid_print
          print('Status: ${e.response?.statusCode}');
          // ignore: avoid_print
          print('Data: ${e.response?.data}');
          return handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
abstract class SessionLocalDataSource {
  Future<void> saveAccessToken(String token);
  Future<String?> getAccessToken();
  Future<void> clear();
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source_prefs.dart =====
import 'package:shared_preferences/shared_preferences.dart';

import 'session_local_data_source.dart';

class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  static const _kAccessToken = 'access_token';

  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_kAccessToken, token);
  }

  @override
  Future<String?> getAccessToken() async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString(_kAccessToken);
  }

  @override
  Future<void> clear() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\theme\app_theme.dart =====
import 'package:flutter/material.dart';

class AppSpacing {
  static const double xs = 4;
  static const double sm = 8;
  static const double md = 16;
  static const double lg = 24;
  static const double xl = 32;
  static const double xxl = 40;
}

class AppColors {
  static const Color primary = Color(0xFF1A73E8);
  static const Color primaryLight = Color(0xFFEEF5FF);
  static const Color primaryDark = Color(0xFF0F4FB8);

  static const Color secondary = Color(0xFFFF8A00);
  static const Color secondaryLight = Color(0xFFFFF3E6);
  static const Color secondaryDark = Color(0xFFCC6F00);

  static const Color neutral900 = Color(0xFF212121);
  static const Color neutral800 = Color(0xFF303030);
  static const Color neutral700 = Color(0xFF424242);
  static const Color neutral600 = Color(0xFF616161);
  static const Color neutral500 = Color(0xFF757575);
  static const Color neutral400 = Color(0xFF9E9E9E);
  static const Color neutral300 = Color(0xFFBDBDBD);
  static const Color neutral200 = Color(0xFFE0E0E0);
  static const Color neutral100 = Color(0xFFEFEFEF);
  static const Color neutral50 = Color(0xFFF7F7F7);

  static const Color white = Colors.white;

  static const Color success = Color(0xFF4CAF50);
  static const Color error = Color(0xFFE53935);
  static const Color warning = Color(0xFFFFC107);
  static const Color info = Color(0xFF0288D1);
}

class AppTextStyles {
  static const String _font = 'Roboto';

  static TextStyle get display => const TextStyle(
        fontFamily: _font,
        fontSize: 34,
        fontWeight: FontWeight.w700,
        height: 1.2,
        color: AppColors.neutral900,
      );

  static TextStyle get headline => const TextStyle(
        fontFamily: _font,
        fontSize: 24,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get title => const TextStyle(
        fontFamily: _font,
        fontSize: 20,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get bodyLg => const TextStyle(
        fontFamily: _font,
        fontSize: 16,
        fontWeight: FontWeight.w500,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get body => const TextStyle(
        fontFamily: _font,
        fontSize: 14,
        fontWeight: FontWeight.w400,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get caption => const TextStyle(
        fontFamily: _font,
        fontSize: 12,
        fontWeight: FontWeight.w400,
        height: 1.3,
        color: AppColors.neutral600,
      );
}

class AppRadius {
  static const BorderRadius small = BorderRadius.all(Radius.circular(8));
  static const BorderRadius medium = BorderRadius.all(Radius.circular(12));
  static const BorderRadius large = BorderRadius.all(Radius.circular(20));
  static const BorderRadius pill = BorderRadius.all(Radius.circular(100));
}

class AppShadows {
  static List<BoxShadow> level1 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.08),
      blurRadius: 4,
      offset: const Offset(0, 2),
    ),
  ];

  static List<BoxShadow> level2 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.12),
      blurRadius: 12,
      offset: const Offset(0, 4),
    ),
  ];

  static List<BoxShadow> level3 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.16),
      blurRadius: 20,
      offset: const Offset(0, 8),
    ),
  ];
}

class AppTheme {
  static ThemeData get light {
    final base = ThemeData.light(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: AppColors.white,
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: AppColors.white,
        background: AppColors.white,
        outline: AppColors.neutral300,
        outlineVariant: AppColors.neutral200,
        onSurfaceVariant: AppColors.neutral500,
      ),
      textTheme: base.textTheme.copyWith(
        displayLarge: AppTextStyles.display,
        headlineMedium: AppTextStyles.headline,
        titleMedium: AppTextStyles.title,
        bodyLarge: AppTextStyles.bodyLg,
        bodyMedium: AppTextStyles.body,
        bodySmall: AppTextStyles.caption,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: AppColors.white,
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral900,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral900),
      ),
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          backgroundColor: AppColors.primary,
          foregroundColor: AppColors.white,
          padding: const EdgeInsets.symmetric(vertical: 14, horizontal: 20),
          shape: RoundedRectangleBorder(
            borderRadius: AppRadius.medium,
          ),
          textStyle: const TextStyle(
            fontFamily: 'Roboto',
            fontSize: 14,
            fontWeight: FontWeight.w600,
          ),
        ),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: AppColors.neutral50,
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral200),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral200),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        errorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error),
        ),
        focusedErrorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
      cardTheme: CardThemeData(
        color: AppColors.white,
        elevation: 0,
        margin: EdgeInsets.zero,
        shape: RoundedRectangleBorder(
          borderRadius: AppRadius.large,
          side: const BorderSide(color: AppColors.neutral200),
        ),
        shadowColor: Colors.black.withOpacity(0.12),
      ),
    );
  }

  static ThemeData get dark {
    final base = ThemeData.dark(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: const Color(0xFF121212),
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: const Color(0xFF1D1D1D),
        background: const Color(0xFF121212),
        outline: AppColors.neutral600,
        outlineVariant: AppColors.neutral700,
        onSurfaceVariant: AppColors.neutral400,
      ),
      textTheme: base.textTheme.apply(
        fontFamily: 'Roboto',
        bodyColor: AppColors.neutral100,
        displayColor: AppColors.neutral100,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: Color(0xFF121212),
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral100,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral100),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: const Color(0xFF1D1D1D),
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral600),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral600),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\app_validators.dart =====
import 'package:email_validator/email_validator.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

class AppValidators {
  static String? email(String? value) {
    final v = value?.trim();

    if (v == null || v.isEmpty) {
      return ValidationMessages.enterEmail;
    }

    if (!EmailValidator.validate(v)) {
      return ValidationMessages.invalidEmail;
    }

    return null;
  }

  static String? password(String? value) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.enterPassword;
    }

    if (value.length < 8) {
      return ValidationMessages.shortPassword;
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(value)) {
      return ValidationMessages.passwordNeedLetter;
    }

    if (!RegExp(r'[0-9]').hasMatch(value)) {
      return ValidationMessages.passwordNeedNumber;
    }

    return null;
  }

  static String? confirmPassword(String? value, String password) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.confirmPassword;
    }

    if (value != password) {
      return ValidationMessages.passwordMismatch;
    }

    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\validation_messages.dart =====
class ValidationMessages {
  static const enterEmail = 'Please enter your email';
  static const invalidEmail = 'Email format is invalid';

  static const enterPassword = 'Please enter your password';
  static const shortPassword = 'Password must be at least 8 characters';
  static const passwordNeedLetter = 'Password must include at least one letter';
  static const passwordNeedNumber = 'Password must include at least one number';

  static const confirmPassword = 'Please confirm your password';
  static const passwordMismatch = 'Password does not match';
  
  static const enterFullName = 'Please enter your full name';
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\models\auth_remote_data_source.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/error/exception_mapper.dart';
import 'package:finance_tracker_app/core/network/supabase_endpoints.dart';

class SignUpResult {
  final bool emailConfirmationRequired;
  final String? message;

  const SignUpResult({
    required this.emailConfirmationRequired,
    this.message,
  });
}

abstract class AuthRemoteDataSource {
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  });

  Future<String> login({
    required String email,
    required String password,
  });

  Future<Map<String, dynamic>> getMe();
}

class AuthRemoteDataSourceImpl implements AuthRemoteDataSource {
  final Dio dio;
  AuthRemoteDataSourceImpl(this.dio);

  @override
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authSignUp,
        data: {
          'email': email,
          'password': password,
          'data': {'full_name': fullName},
        },
      );

      // Supabase thường trả user/session (tuỳ settings)
      // Nếu bật email confirm, thường session = null => yêu cầu verify email
      final data = res.data;
      final session = (data is Map<String, dynamic>) ? data['session'] : null;

      final requiresConfirm = session == null;

      return SignUpResult(
        emailConfirmationRequired: requiresConfirm,
        message: requiresConfirm
            ? 'Sign up successful. Please verify your email before logging in.'
            : 'Sign up successful.',
      );
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<String> login({
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authToken,
        queryParameters: {'grant_type': 'password'},
        data: {'email': email, 'password': password},
      );

      final json = res.data as Map<String, dynamic>;
      final token = (json['access_token'] ?? '').toString();

      if (token.isEmpty) {
        throw ExceptionMapper.map(
          DioException(
            requestOptions: res.requestOptions,
            response: res,
            error: 'Missing access_token',
            type: DioExceptionType.badResponse,
          ),
        );
      }

      return token;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<Map<String, dynamic>> getMe() async {
    try {
      final res = await dio.get(SupabaseEndpoints.authUser);
      return res.data as Map<String, dynamic>;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\repositories\auth_repository_impl.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';

class AuthRepositoryImpl implements AuthRepository {
  final AuthRemoteDataSource remote;
  final SessionLocalDataSource sessionLocal;

  AuthRepositoryImpl({
    required this.remote,
    required this.sessionLocal,
  });

  @override
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  }) async {
    final result = await remote.signup(
      fullName: fullName,
      email: email,
      password: password,
    );

    // ✅ Bật email confirm => không login ngay
    if (result.emailConfirmationRequired) {
      throw AuthException(
        result.message ??
            'Sign up successful. Please verify your email before logging in.',
      );
    }

    // Nếu project bạn tắt confirm email (session có sẵn) thì có thể auto login:
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel.fromJson({
      'id': me['id'],
      'email': me['email'],
      'fullName': (me['user_metadata']?['full_name']) as String?,
    });
  }

  @override
  Future<UserModel> login({
    required String email,
    required String password,
  }) async {
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel(
      id: (me['id'] ?? '').toString(),
      email: (me['email'] ?? '').toString(),
      fullName: (me['user_metadata']?['full_name']) as String?,
    );
  }

  @override
  Future<void> logout() async {
    await sessionLocal.clear();
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.dart =====
import 'package:freezed_annotation/freezed_annotation.dart';

part 'user_model.freezed.dart';
part 'user_model.g.dart';

@freezed
abstract class UserModel with _$UserModel {
  const factory UserModel({
    required String id,
    required String email,
    String? fullName,
  }) = _UserModel;

  factory UserModel.fromJson(Map<String, dynamic> json) =>
      _$UserModelFromJson(json);
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.freezed.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND
// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'user_model.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

// dart format off
T _$identity<T>(T value) => value;

/// @nodoc
mixin _$UserModel {

 String get id; String get email; String? get fullName;
/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
$UserModelCopyWith<UserModel> get copyWith => _$UserModelCopyWithImpl<UserModel>(this as UserModel, _$identity);

  /// Serializes this UserModel to a JSON map.
  Map<String, dynamic> toJson();


@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class $UserModelCopyWith<$Res>  {
  factory $UserModelCopyWith(UserModel value, $Res Function(UserModel) _then) = _$UserModelCopyWithImpl;
@useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class _$UserModelCopyWithImpl<$Res>
    implements $UserModelCopyWith<$Res> {
  _$UserModelCopyWithImpl(this._self, this._then);

  final UserModel _self;
  final $Res Function(UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@pragma('vm:prefer-inline') @override $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_self.copyWith(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}

}


/// Adds pattern-matching-related methods to [UserModel].
extension UserModelPatterns on UserModel {
/// A variant of `map` that fallback to returning `orElse`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeMap<TResult extends Object?>(TResult Function( _UserModel value)?  $default,{required TResult orElse(),}){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// Callbacks receives the raw object, upcasted.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case final Subclass2 value:
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult map<TResult extends Object?>(TResult Function( _UserModel value)  $default,){
final _that = this;
switch (_that) {
case _UserModel():
return $default(_that);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `map` that fallback to returning `null`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? mapOrNull<TResult extends Object?>(TResult? Function( _UserModel value)?  $default,){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return null;

}
}
/// A variant of `when` that fallback to an `orElse` callback.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeWhen<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)?  $default,{required TResult orElse(),}) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// As opposed to `map`, this offers destructuring.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case Subclass2(:final field2):
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult when<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)  $default,) {final _that = this;
switch (_that) {
case _UserModel():
return $default(_that.id,_that.email,_that.fullName);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `when` that fallback to returning `null`
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? whenOrNull<TResult extends Object?>(TResult? Function( String id,  String email,  String? fullName)?  $default,) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return null;

}
}

}

/// @nodoc
@JsonSerializable()

class _UserModel implements UserModel {
  const _UserModel({required this.id, required this.email, this.fullName});
  factory _UserModel.fromJson(Map<String, dynamic> json) => _$UserModelFromJson(json);

@override final  String id;
@override final  String email;
@override final  String? fullName;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
_$UserModelCopyWith<_UserModel> get copyWith => __$UserModelCopyWithImpl<_UserModel>(this, _$identity);

@override
Map<String, dynamic> toJson() {
  return _$UserModelToJson(this, );
}

@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is _UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class _$UserModelCopyWith<$Res> implements $UserModelCopyWith<$Res> {
  factory _$UserModelCopyWith(_UserModel value, $Res Function(_UserModel) _then) = __$UserModelCopyWithImpl;
@override @useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class __$UserModelCopyWithImpl<$Res>
    implements _$UserModelCopyWith<$Res> {
  __$UserModelCopyWithImpl(this._self, this._then);

  final _UserModel _self;
  final $Res Function(_UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @pragma('vm:prefer-inline') $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_UserModel(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}


}

// dart format on

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.g.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'user_model.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_UserModel _$UserModelFromJson(Map<String, dynamic> json) => _UserModel(
  id: json['id'] as String,
  email: json['email'] as String,
  fullName: json['fullName'] as String?,
);

Map<String, dynamic> _$UserModelToJson(_UserModel instance) =>
    <String, dynamic>{
      'id': instance.id,
      'email': instance.email,
      'fullName': instance.fullName,
    };

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\repositories\auth_repository.dart =====
import '../entities/user_model.dart';

abstract class AuthRepository {
  Future<UserModel> login({required String email, required String password});
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  });
  Future<void> logout();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\login.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Login {
  final AuthRepository repository;
  Login(this.repository);

  Future<UserModel> call({required String email, required String password}) {
    if (email.trim().isEmpty) {
      throw const ValidationException('Email cannot be empty');
    }

    if (!email.contains('@') || !email.contains('.')) {
      throw const ValidationException('Invalid email format');
    }

    if (password.isEmpty) {
      throw const ValidationException('Password cannot be empty');
    }

    if (password.length < 8) {
      throw const ValidationException('Password must be at least 8 characters');
    }

    return repository.login(email: email, password: password);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\sign_up.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Signup {
  final AuthRepository repository;

  Signup(this.repository);

  Future<UserModel> call({
    required String email,
    required String password,
    required String fullName,
  }) {
    final trimmedEmail = email.trim();
    final trimmedName = fullName.trim();

    _validateFullName(trimmedName);
    _validateEmail(trimmedEmail);
    _validatePassword(password);

    return repository.signup(
      email: trimmedEmail,
      password: password,
      fullName: trimmedName,
    );
  }


  void _validateFullName(String name) {
    if (name.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterFullName,
      );
    }
  }

  void _validateEmail(String email) {
    if (email.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterEmail,
      );
    }

    final emailRegex = RegExp(r'^[^@]+@[^@]+\.[^@]+$');
    if (!emailRegex.hasMatch(email)) {
      throw const ValidationException(
        ValidationMessages.invalidEmail,
      );
    }
  }

  void _validatePassword(String password) {
    if (password.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterPassword,
      );
    }

    if (password.length < 8) {
      throw const ValidationException(
        ValidationMessages.shortPassword,
      );
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedLetter,
      );
    }

    if (!RegExp(r'[0-9]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedNumber,
      );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:logger/logger.dart';

import 'auth_state.dart';
import '../../domain/usecases/login.dart';
import '../../domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';

class AuthCubit extends Cubit<AuthState> {
  final Login _login;
  final Signup _signup;
  final Logger _logger;

  AuthCubit({required Login login, required Signup signup, Logger? logger})
    : _login = login,
      _signup = signup,
      _logger = logger ?? Logger(),
      super(AuthInitial());

  Future<void> login(String email, String password) async {
    if (state is AuthSuccess) {
      emit(AuthFailure('You are already logged in.'));
      return;
    }

    await _runAuthAction(
      actionLabel: 'login',
      action: () => _login(email: email, password: password),
      successMessage: 'Login success',
    );
  }

  Future<void> signup(String fullName, String email, String password) async {
    await _runAuthAction(
      actionLabel: 'signup',
      action: () =>
          _signup(fullName: fullName, email: email, password: password),
      successMessage: 'Signup success',
    );
  }

  Future<void> _runAuthAction({
    required String actionLabel,
    required Future<dynamic> Function() action,
    required String successMessage,
  }) async {
    emit(AuthLoading());

    const maxAttempts = 2;
    var attempt = 0;

    while (true) {
      try {
        final user = await action();
        _logger.i('$successMessage: ${user.email}', error: null);
        emit(AuthSuccess(user));
        return;
      } on NetworkException catch (e) {
        attempt++;
        _logger.w(
          'NetworkException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on TimeoutRequestException catch (e) {
        attempt++;
        _logger.w(
          'TimeoutRequestException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on AuthException catch (e) {
        _logger.w('AuthException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } on AppException catch (e) {
        _logger.w('AppException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } catch (e, s) {
        _logger.e('Unexpected error on $actionLabel', error: e, stackTrace: s);
        emit(AuthFailure('Unexpected error. Please try again.'));
        return;
      }
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\dashboard_screen.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class DashboardScreen extends StatefulWidget {
  const DashboardScreen({super.key});

  @override
  State<DashboardScreen> createState() => _DashboardScreenState();
}

class _DashboardScreenState extends State<DashboardScreen> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Dashboard'),
      ),
      body: const Center(
        child: Text('Welcome to the Dashboard!'),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _formKey = GlobalKey<FormState>();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  void _onLoginPressed(bool isLoading) {
    if (isLoading) return;

    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().login(
          _emailController.text.trim(),
          _passwordController.text,
        );
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final colorScheme = theme.colorScheme;

    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      backgroundColor: colorScheme.background,
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) {
            if (state is AuthFailure) {
              ScaffoldMessenger.of(context)
                ..hideCurrentSnackBar()
                ..showSnackBar(
                  SnackBar(content: Text(state.message)),
                );
              return;
            }

            if (state is AuthSuccess) {
              // ✅ LOGIN THÀNH CÔNG → DASHBOARD (clear stack)
              Navigator.pushNamedAndRemoveUntil(
                context,
                AppRoutes.dashboard,
                (_) => false,
              );
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return SingleChildScrollView(
              padding: const EdgeInsets.symmetric(horizontal: 24),
              child: Form(
                key: _formKey,
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  crossAxisAlignment: CrossAxisAlignment.stretch,
                  children: [
                    const SizedBox(height: 40),
                    Text(
                      'Welcome to Personal\nFinance Tracker',
                      textAlign: TextAlign.center,
                      style: theme.textTheme.headlineSmall?.copyWith(
                        fontWeight: FontWeight.bold,
                        color: colorScheme.onBackground,
                      ),
                    ),
                    const SizedBox(height: 32),
                    Center(child: loginImage),
                    const SizedBox(height: 32),
                    TextFormField(
                      controller: _emailController,
                      keyboardType: TextInputType.emailAddress,
                      validator: AppValidators.email,
                      decoration: InputDecoration(
                        labelText: 'Email',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                      ),
                    ),
                    const SizedBox(height: 16),
                    TextFormField(
                      controller: _passwordController,
                      obscureText: _isPasswordHidden,
                      keyboardType: TextInputType.visiblePassword,
                      validator: AppValidators.password,
                      decoration: InputDecoration(
                        labelText: 'Password',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                        suffixIcon: IconButton(
                          icon: Icon(
                            _isPasswordHidden
                                ? Icons.visibility_off
                                : Icons.visibility,
                          ),
                          onPressed: () {
                            setState(() {
                              _isPasswordHidden = !_isPasswordHidden;
                            });
                          },
                        ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    SizedBox(
                      height: 52,
                      child: ElevatedButton(
                        onPressed: () => _onLoginPressed(isLoading),
                        style: ElevatedButton.styleFrom(
                          backgroundColor: colorScheme.primary,
                          foregroundColor: colorScheme.onPrimary,
                          shape: RoundedRectangleBorder(
                            borderRadius: BorderRadius.circular(12),
                          ),
                        ),
                        child: isLoading
                            ? const SizedBox(
                                width: 22,
                                height: 22,
                                child: CircularProgressIndicator(
                                  strokeWidth: 2,
                                ),
                              )
                            : const Text(
                                'Login',
                                style: TextStyle(
                                  fontSize: 18,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          "Don't have an account? ",
                          style: theme.textTheme.bodyMedium?.copyWith(
                            color: colorScheme.onSurface.withOpacity(0.6),
                          ),
                        ),
                        GestureDetector(
                          onTap: () {
                            Navigator.pushNamed(context, AppRoutes.signUp);
                          },
                          child: Text(
                            "Register",
                            style: theme.textTheme.bodyMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                              color: colorScheme.primary,
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),
                  ],
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final _formKey = GlobalKey<FormState>();

  final _fullNameController = TextEditingController();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  final _confirmPasswordController = TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  void _onSignUpPressed(BuildContext context, bool isLoading) {
    if (isLoading) return;
    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().signup(
      _fullNameController.text.trim(),
      _emailController.text.trim(),
      _passwordController.text,
    );
  }

  void _showSnack(String msg) {
    ScaffoldMessenger.of(context)
      ..hideCurrentSnackBar()
      ..showSnackBar(SnackBar(content: Text(msg)));
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;
    final ts = theme.textTheme;

    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) async {
            if (state is AuthFailure) {
              _showSnack(state.message);
            }
            if (state is AuthSuccess) {
              _showSnack('Sign up successful. Please login.');
              await Future.delayed(const Duration(milliseconds: 800));
              if (!mounted) return;
              Navigator.pushReplacementNamed(context, AppRoutes.login);
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return Stack(
              children: [
                Center(
                  child: SingleChildScrollView(
                    padding: const EdgeInsets.symmetric(
                      horizontal: AppSpacing.lg,
                    ),
                    child: Form(
                      key: _formKey,
                      child: Column(
                        children: [
                          const SizedBox(height: AppSpacing.lg),
                          Text(
                            'Sign Up',
                            style: ts.headlineMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          signUpImage,
                          const SizedBox(height: AppSpacing.xl),
                          AppValidatedTextField(
                            controller: _fullNameController,
                            label: 'Full Name',
                            keyboardType: TextInputType.name,
                            validator: (value) =>
                                value == null || value.trim().isEmpty
                                ? 'Please enter your full name'
                                : null,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _emailController,
                            label: 'Email',
                            keyboardType: TextInputType.emailAddress,
                            validator: AppValidators.email,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _passwordController,
                            label: 'Password',
                            obscureText: !_showPassword,
                            validator: AppValidators.password,
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showPassword = !_showPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _confirmPasswordController,
                            label: 'Confirm password',
                            obscureText: !_showConfirmPassword,
                            validator: (value) => AppValidators.confirmPassword(
                              value,
                              _passwordController.text,
                            ),
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showConfirmPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showConfirmPassword =
                                    !_showConfirmPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          SizedBox(
                            width: double.infinity,
                            height: AppSpacing.xxl,
                            child: ElevatedButton(
                              style: ElevatedButton.styleFrom(
                                backgroundColor: cs.primary,
                                foregroundColor: cs.onPrimary,
                                shape: RoundedRectangleBorder(
                                  borderRadius: BorderRadius.circular(12),
                                ),
                              ),
                              onPressed: () =>
                                  _onSignUpPressed(context, isLoading),
                              child: isLoading
                                  ? const SizedBox(
                                      width: 20,
                                      height: 20,
                                      child: CircularProgressIndicator(
                                        strokeWidth: 2,
                                        valueColor: AlwaysStoppedAnimation(
                                          Colors.white,
                                        ),
                                      ),
                                    )
                                  : Text(
                                      'Sign Up',
                                      style: ts.titleMedium?.copyWith(
                                        fontWeight: FontWeight.w600,
                                      ),
                                    ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Text(
                                "Already have an account?",
                                style: ts.bodyMedium,
                              ),
                              const SizedBox(width: AppSpacing.xs),
                              GestureDetector(
                                onTap: () => Navigator.pushNamed(
                                  context,
                                  AppRoutes.login,
                                ),
                                child: Text(
                                  "Login",
                                  style: ts.bodyMedium?.copyWith(
                                    color: cs.primary,
                                    fontWeight: FontWeight.w600,
                                  ),
                                ),
                              ),
                            ],
                          ),
                          const SizedBox(height: AppSpacing.lg),
                        ],
                      ),
                    ),
                  ),
                ),
                if (isLoading)
                  Positioned.fill(
                    child: AbsorbPointer(
                      absorbing: true,
                      child: Container(
                        color: Colors.black.withOpacity(0.2),
                        alignment: Alignment.center,
                        child: const SizedBox(
                          width: 36,
                          height: 36,
                          child: CircularProgressIndicator(strokeWidth: 3),
                        ),
                      ),
                    ),
                  ),
              ],
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 16, color: Colors.black54),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const String aEnv = '.env';
  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();

  /// List of all assets
  static List<String> get values => [aEnv];
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_validated_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_validated_text_field.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:flutter/material.dart';

class AppValidatedTextField extends StatelessWidget {
  final TextEditingController controller;
  final String label;
  final String? hintText;
  final String? Function(String?)? validator;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextInputType keyboardType;
  final TextInputAction? textInputAction;
  final ValueChanged<String>? onChanged;
  final bool enabled;

  const AppValidatedTextField({
    super.key,
    required this.controller,
    required this.label,
    this.hintText,
    this.validator,
    this.obscureText = false,
    this.suffixIcon,
    this.keyboardType = TextInputType.text,
    this.textInputAction,
    this.onChanged,
    this.enabled = true,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;

    OutlineInputBorder border(Color color) => OutlineInputBorder(
      borderRadius: AppRadius.medium,
      borderSide: BorderSide(color: color, width: 1),
    );

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          label,
          style: theme.textTheme.bodyMedium?.copyWith(
            fontWeight: FontWeight.w500,
            color: cs.onBackground,
          ),
        ),
        const SizedBox(height: 8),
        TextFormField(
          controller: controller,
          obscureText: obscureText,
          validator: validator,
          autovalidateMode: AutovalidateMode.onUserInteraction,
          keyboardType: keyboardType,
          textInputAction: textInputAction,
          onChanged: onChanged,
          enabled: enabled,
          decoration: InputDecoration(
            hintText: hintText ?? label,
            hintStyle: theme.textTheme.bodyMedium?.copyWith(
              color: cs.onSurfaceVariant,
            ),
            contentPadding: const EdgeInsets.all(16),
            suffixIcon: suffixIcon,
            border: border(cs.outline),
            enabledBorder: border(cs.outline),
            focusedBorder: border(cs.primary),
            errorBorder: border(cs.error),
            focusedErrorBorder: border(cs.error),
            disabledBorder: border(cs.outlineVariant),
          ),
        ),
      ],
    );
  }
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'dart:io' show Platform;
import 'package:flutter/foundation.dart' show kIsWeb;
import 'package:window_size/window_size.dart';
import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  String? initError;

  try {
    await dotenv.load(fileName: '.env');

    final supabaseUrl = dotenv.env['SUPABASE_URL']?.trim();
    final supabaseAnonKey = dotenv.env['SUPABASE_ANON_KEY']?.trim();

    if (supabaseUrl == null ||
        supabaseUrl.isEmpty ||
        supabaseAnonKey == null ||
        supabaseAnonKey.isEmpty) {
      throw Exception('Missing SUPABASE_URL or SUPABASE_ANON_KEY in .env');
    }

    setupDI(
      supabaseUrl: supabaseUrl,
      supabaseAnonKey: supabaseAnonKey,
    );
  } catch (e, st) {
    debugPrint('❌ Init error: $e');
    debugPrintStack(stackTrace: st);
    initError = e.toString();
  }
  setupWindow();
  runApp(initError != null ? ErrorApp(errorMessage: initError) : const AppRoot());
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

const double windowWidth = 500;
const double windowHeight = 854;

void setupWindow() {
  if (!kIsWeb &&
      (Platform.isWindows || Platform.isLinux || Platform.isMacOS)) {
    WidgetsFlutterBinding.ensureInitialized();
    setWindowTitle('Finance Tracker');
    setWindowMinSize(const Size(windowWidth, windowHeight));
    setWindowMaxSize(const Size(windowWidth, windowHeight));
    getCurrentScreen().then((screen) {
      setWindowFrame(
        Rect.fromCenter(
          center: screen!.frame.center,
          width: windowWidth,
          height: windowHeight,
        ),
      );
    });
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      builder: (context, child) {
        final mq = MediaQuery.of(context);
        return MediaQuery(
          data: mq.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },
      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: AppTheme.light,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(AppSpacing.lg),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: AppSpacing.md),
                Text(
                  'App initialization failed',
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.titleMedium,
                ),
                const SizedBox(height: AppSpacing.sm),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.bodyMedium,
                ),
                const SizedBox(height: AppSpacing.lg),
                Text(
                  'Please check your .env and Supabase config.',
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.bodySmall,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\constants\strings.dart =====
class AppStrings {
  static const appName = 'Personal Finance Tracker';

  static const welcome = 'Welcome';
  static const welcomeTitle = 'Welcome to Personal\nFinance Tracker';
  static const welcomeSubtitle = 'Take control of your finances with us.';
  static const getStarted = 'Get Started';

  static const login = 'Login';
  static const register = 'Register';
  static const signUpTitle = 'Sign Up';

  static const signUpSuccess = 'Sign up successful';
  static const signUpSuccessVerifyEmail =
      'Sign up successful. Please verify your email before logging in.';

  static const alreadyHaveAccount = 'Already have an account?';
  static const dontHaveAccount = "Don't have an account?";

  static const fullNameLabel = 'Full Name';
  static const emailLabel = 'Email';
  static const passwordLabel = 'Password';
  static const confirmPasswordLabel = 'Confirm password';

  static const fullNameRequired = 'Please enter your full name';
  static const emailRequired = 'Please enter your email';
  static const invalidEmailFormat = 'Email format is invalid';

  static const passwordRequired = 'Please enter your password';
  static const passwordMinLength8 = 'Password must be at least 8 characters';

  static const confirmPasswordRequired = 'Please confirm your password';
  static const passwordNotMatch = 'Password does not match';

  static const loginFailed = 'Login failed';
  static const signupFailed = 'Signup failed';

  static const genericError = 'Something went wrong';
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import '../network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
    SessionLocalDataSourcePrefs.new,
  );

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(
    () => DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () =>
          getIt<SessionLocalDataSource>().getAccessToken(),
    ).dio,
  );

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(
    () => Login(getIt<AuthRepository>()),
  );
  getIt.registerLazySingleton<Signup>(
    () => Signup(getIt<AuthRepository>()),
  );

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(
      login: getIt<Login>(),
      signup: getIt<Signup>(),
    ),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
class AppException implements Exception {
  final String message;
  const AppException(this.message);
  @override
  String toString() => message;
}

class NetworkException extends AppException {
  const NetworkException([super.message = 'Network error. Check connection']);
}

class TimeoutRequestException extends AppException {
  const TimeoutRequestException([super.message = 'Request timed out']);
}

class AuthException extends AppException {
  const AuthException([super.message = 'Authentication failed']);
}

class ValidationException extends AppException {
  const ValidationException([super.message = 'Invalid input data']);
}

class ServerException extends AppException {
  const ServerException([super.message = 'Server error occurred']);
}
class CacheException extends AppException {
  const CacheException([super.message = 'Cache error occurred']);
}
\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'package:dio/dio.dart';
import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic e) {
    if (e is AppException) return e;
    if (e is SocketException) return const NetworkException('No internet connection');
    if (e is TimeoutException) return const TimeoutRequestException();
    if (e is DioException) return _dio(e);
    return AppException(e.toString());
  }

  static AppException _dio(DioException e) {
    final s = e.response?.statusCode;
    final d = e.response?.data;
    final m = _msg(d) ?? e.message ?? 'Request failed';

    if (s == 400 || s == 401 || s == 403) return AuthException(m);
    if (s != null && s >= 500) return ServerException(m);
    return ServerException(m);
  }

  static String? _msg(dynamic d) {
    if (d is String && d.trim().isNotEmpty) return d.trim();
    if (d is Map<String, dynamic>) {
      for (final k in ['msg', 'error_description', 'message', 'error', 'error_code', 'code']) {
        final v = d[k]?.toString().trim();
        if (v != null && v.isNotEmpty) return v;
      }
    }
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

typedef TokenProvider = Future<String?> Function();

class DioClient {
  final Dio dio;

  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            connectTimeout: const Duration(seconds: 15),
            receiveTimeout: const Duration(seconds: 15),
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          final token = await tokenProvider();
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';
          handler.next(options);
        },
        onError: (e, handler) {
          handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
import 'package:shared_preferences/shared_preferences.dart';

abstract class SessionLocalDataSource {
  Future<void> saveAccessToken(String token);
  Future<String?> getAccessToken();
  Future<void> clear();
}

class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  static const _kAccessToken = 'access_token';

  Future<SharedPreferences> get _prefs =>
      SharedPreferences.getInstance();

  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await _prefs;
    await prefs.setString(_kAccessToken, token);
  }

  @override
  Future<String?> getAccessToken() async {
    final prefs = await _prefs;
    return prefs.getString(_kAccessToken);
  }

  @override
  Future<void> clear() async {
    final prefs = await _prefs;
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}

===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  String? initError;

  try {
    // Load .env (đảm bảo file .env nằm đúng root và đã khai báo trong pubspec assets nếu bạn dùng kiểu đó)
    await dotenv.load(fileName: '.env');

    final supabaseUrl = dotenv.env['SUPABASE_URL'];
    final supabaseAnonKey = dotenv.env['SUPABASE_ANON_KEY'];

    if (supabaseUrl == null ||
        supabaseUrl.trim().isEmpty ||
        supabaseAnonKey == null ||
        supabaseAnonKey.trim().isEmpty) {
      throw Exception('Missing SUPABASE_URL hoặc SUPABASE_ANON_KEY trong file .env');
    }

    // ✅ Không dùng Supabase.initialize() nữa (vì đã chuyển sang Dio + REST API)
    setupDI(
      supabaseUrl: supabaseUrl.trim(),
      supabaseAnonKey: supabaseAnonKey.trim(),
    );
  } catch (e, st) {
    debugPrint('❌ Lỗi khởi tạo app: $e');
    debugPrintStack(stackTrace: st);
    initError = e.toString();
  }

  runApp(initError != null ? ErrorApp(errorMessage: initError!) : const AppRoot());
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      builder: (context, child) {
        final mediaQuery = MediaQuery.of(context);
        return MediaQuery(
          data: mediaQuery.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },

      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(24.0),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: 16),
                const Text(
                  'Đã xảy ra lỗi khi khởi tạo ứng dụng',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 12),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: const TextStyle(fontSize: 14),
                ),
                const SizedBox(height: 24),
                const Text(
                  'Vui lòng kiểm tra lại file .env và cấu hình Supabase.',
                  textAlign: TextAlign.center,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import '../network/session_local_data_source.dart';
import '../network/session_local_data_source_prefs.dart';

import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
    () => SessionLocalDataSourcePrefs(),
  );

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(() {
    final client = DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () => getIt<SessionLocalDataSource>().getAccessToken(),
    );
    print('Dio registered: ${getIt.isRegistered<Dio>()}');

    return client.dio;
  });

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(() => Login(getIt<AuthRepository>()));
  getIt.registerLazySingleton<Signup>(() => Signup(getIt<AuthRepository>()));

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(login: getIt<Login>(), signup: getIt<Signup>()),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
/// Base class for all application-level exceptions.
/// Always contains a message safe to show to UI.
class AppException implements Exception {
  final String message;

  const AppException(this.message);

  @override
  String toString() => message;
}

/// Network related issues: no internet, DNS fail, SocketException, etc.
class NetworkException extends AppException {
  const NetworkException([String message = 'Network error. Check connection'])
      : super(message);
}

/// Request timeout or server took too long to respond.
class TimeoutRequestException extends AppException {
  const TimeoutRequestException([String message = 'Request timed out'])
      : super(message);
}

/// Authentication errors: wrong password, invalid email, expired token, etc.
class AuthException extends AppException {
  const AuthException([String message = 'Authentication failed'])
      : super(message);
}

/// Validation errors in client-side or API-side input.
/// (e.g. password too short, email invalid format)
class ValidationException extends AppException {
  const ValidationException([String message = 'Invalid input data'])
      : super(message);
}

/// Server errors (5xx) or unexpected Supabase error messages.
class ServerException extends AppException {
  const ServerException([String message = 'Server error occurred'])
      : super(message);
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'package:dio/dio.dart';
import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic error) {
    if (error is AppException) return error;

    if (error is SocketException) {
      return const NetworkException('No internet connection');
    }

    if (error is TimeoutException) {
      return const TimeoutRequestException();
    }

    if (error is DioException) {
      return _mapDio(error);
    }

    return AppException(error.toString());
  }

  static AppException _mapDio(DioException e) {
    final status = e.response?.statusCode;
    final data = e.response?.data;

    final msg = _extractSupabaseMessage(data) ??
        _extractGenericMessage(data) ??
        e.message ??
        'Request failed';

    // 400/401/403: auth/validation hay gặp ở Supabase Auth
    if (status == 400 || status == 401 || status == 403) {
      return AuthException(msg);
    }

    if (status != null && status >= 500) {
      return ServerException(msg);
    }

    // Không rõ status thì vẫn trả msg thật thay vì "Unexpected server error"
    return ServerException(msg);
  }

  static String? _extractSupabaseMessage(dynamic data) {
    // Supabase thường trả: { code, error_code, msg }
    // hoặc: { error, error_description }
    if (data is Map<String, dynamic>) {
      final candidates = [
        data['msg'],
        data['error_description'],
        data['message'],
        data['error'],
        data['error_code'],
        data['code'],
      ];
      for (final c in candidates) {
        final s = c?.toString().trim();
        if (s != null && s.isNotEmpty) return s;
      }
    }
    return null;
  }

  static String? _extractGenericMessage(dynamic data) {
    if (data is String && data.trim().isNotEmpty) return data.trim();
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

typedef TokenProvider = Future<String?> Function();

class DioClient {
  final Dio dio;

  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            connectTimeout: const Duration(seconds: 15),
            receiveTimeout: const Duration(seconds: 15),
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          final token = await tokenProvider();

          // ✅ Supabase expects Authorization Bearer token
          // - if logged in: use accessToken
          // - else: use anonKey (very important for /auth/v1/*)
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';

          return handler.next(options);
        },
        onError: (e, handler) {
          // log để nhìn ra lỗi thật
          // ignore: avoid_print
          print('❌ ${e.requestOptions.method} ${e.requestOptions.uri}');
          // ignore: avoid_print
          print('Status: ${e.response?.statusCode}');
          // ignore: avoid_print
          print('Data: ${e.response?.data}');
          return handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
abstract class SessionLocalDataSource {
  Future<void> saveAccessToken(String token);
  Future<String?> getAccessToken();
  Future<void> clear();
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source_prefs.dart =====
import 'package:shared_preferences/shared_preferences.dart';

import 'session_local_data_source.dart';

class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  static const _kAccessToken = 'access_token';

  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_kAccessToken, token);
  }

  @override
  Future<String?> getAccessToken() async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString(_kAccessToken);
  }

  @override
  Future<void> clear() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\theme\app_theme.dart =====
import 'package:flutter/material.dart';

class AppSpacing {
  static const double xs = 4;
  static const double sm = 8;
  static const double md = 16;
  static const double lg = 24;
  static const double xl = 32;
  static const double xxl = 40;
}

class AppColors {
  static const Color primary = Color(0xFF1A73E8);
  static const Color primaryLight = Color(0xFFEEF5FF);
  static const Color primaryDark = Color(0xFF0F4FB8);

  static const Color secondary = Color(0xFFFF8A00);
  static const Color secondaryLight = Color(0xFFFFF3E6);
  static const Color secondaryDark = Color(0xFFCC6F00);

  static const Color neutral900 = Color(0xFF212121);
  static const Color neutral800 = Color(0xFF303030);
  static const Color neutral700 = Color(0xFF424242);
  static const Color neutral600 = Color(0xFF616161);
  static const Color neutral500 = Color(0xFF757575);
  static const Color neutral400 = Color(0xFF9E9E9E);
  static const Color neutral300 = Color(0xFFBDBDBD);
  static const Color neutral200 = Color(0xFFE0E0E0);
  static const Color neutral100 = Color(0xFFEFEFEF);
  static const Color neutral50 = Color(0xFFF7F7F7);

  static const Color white = Colors.white;

  static const Color success = Color(0xFF4CAF50);
  static const Color error = Color(0xFFE53935);
  static const Color warning = Color(0xFFFFC107);
  static const Color info = Color(0xFF0288D1);
}

class AppTextStyles {
  static const String _font = 'Roboto';

  static TextStyle get display => const TextStyle(
        fontFamily: _font,
        fontSize: 34,
        fontWeight: FontWeight.w700,
        height: 1.2,
        color: AppColors.neutral900,
      );

  static TextStyle get headline => const TextStyle(
        fontFamily: _font,
        fontSize: 24,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get title => const TextStyle(
        fontFamily: _font,
        fontSize: 20,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get bodyLg => const TextStyle(
        fontFamily: _font,
        fontSize: 16,
        fontWeight: FontWeight.w500,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get body => const TextStyle(
        fontFamily: _font,
        fontSize: 14,
        fontWeight: FontWeight.w400,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get caption => const TextStyle(
        fontFamily: _font,
        fontSize: 12,
        fontWeight: FontWeight.w400,
        height: 1.3,
        color: AppColors.neutral600,
      );
}

class AppRadius {
  static const BorderRadius small = BorderRadius.all(Radius.circular(8));
  static const BorderRadius medium = BorderRadius.all(Radius.circular(12));
  static const BorderRadius large = BorderRadius.all(Radius.circular(20));
  static const BorderRadius pill = BorderRadius.all(Radius.circular(100));
}

class AppShadows {
  static List<BoxShadow> level1 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.08),
      blurRadius: 4,
      offset: const Offset(0, 2),
    ),
  ];

  static List<BoxShadow> level2 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.12),
      blurRadius: 12,
      offset: const Offset(0, 4),
    ),
  ];

  static List<BoxShadow> level3 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.16),
      blurRadius: 20,
      offset: const Offset(0, 8),
    ),
  ];
}

class AppTheme {
  static ThemeData get light {
    final base = ThemeData.light(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: AppColors.white,
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: AppColors.white,
        background: AppColors.white,
        outline: AppColors.neutral300,
        outlineVariant: AppColors.neutral200,
        onSurfaceVariant: AppColors.neutral500,
      ),
      textTheme: base.textTheme.copyWith(
        displayLarge: AppTextStyles.display,
        headlineMedium: AppTextStyles.headline,
        titleMedium: AppTextStyles.title,
        bodyLarge: AppTextStyles.bodyLg,
        bodyMedium: AppTextStyles.body,
        bodySmall: AppTextStyles.caption,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: AppColors.white,
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral900,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral900),
      ),
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          backgroundColor: AppColors.primary,
          foregroundColor: AppColors.white,
          padding: const EdgeInsets.symmetric(vertical: 14, horizontal: 20),
          shape: RoundedRectangleBorder(
            borderRadius: AppRadius.medium,
          ),
          textStyle: const TextStyle(
            fontFamily: 'Roboto',
            fontSize: 14,
            fontWeight: FontWeight.w600,
          ),
        ),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: AppColors.neutral50,
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral200),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral200),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        errorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error),
        ),
        focusedErrorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
      cardTheme: CardThemeData(
        color: AppColors.white,
        elevation: 0,
        margin: EdgeInsets.zero,
        shape: RoundedRectangleBorder(
          borderRadius: AppRadius.large,
          side: const BorderSide(color: AppColors.neutral200),
        ),
        shadowColor: Colors.black.withOpacity(0.12),
      ),
    );
  }

  static ThemeData get dark {
    final base = ThemeData.dark(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: const Color(0xFF121212),
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: const Color(0xFF1D1D1D),
        background: const Color(0xFF121212),
        outline: AppColors.neutral600,
        outlineVariant: AppColors.neutral700,
        onSurfaceVariant: AppColors.neutral400,
      ),
      textTheme: base.textTheme.apply(
        fontFamily: 'Roboto',
        bodyColor: AppColors.neutral100,
        displayColor: AppColors.neutral100,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: Color(0xFF121212),
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral100,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral100),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: const Color(0xFF1D1D1D),
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral600),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral600),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\app_validators.dart =====
import 'package:email_validator/email_validator.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

class AppValidators {
  static String? email(String? value) {
    final v = value?.trim();

    if (v == null || v.isEmpty) {
      return ValidationMessages.enterEmail;
    }

    if (!EmailValidator.validate(v)) {
      return ValidationMessages.invalidEmail;
    }

    return null;
  }

  static String? password(String? value) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.enterPassword;
    }

    if (value.length < 8) {
      return ValidationMessages.shortPassword;
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(value)) {
      return ValidationMessages.passwordNeedLetter;
    }

    if (!RegExp(r'[0-9]').hasMatch(value)) {
      return ValidationMessages.passwordNeedNumber;
    }

    return null;
  }

  static String? confirmPassword(String? value, String password) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.confirmPassword;
    }

    if (value != password) {
      return ValidationMessages.passwordMismatch;
    }

    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\validation_messages.dart =====
class ValidationMessages {
  static const enterEmail = 'Please enter your email';
  static const invalidEmail = 'Email format is invalid';

  static const enterPassword = 'Please enter your password';
  static const shortPassword = 'Password must be at least 8 characters';
  static const passwordNeedLetter = 'Password must include at least one letter';
  static const passwordNeedNumber = 'Password must include at least one number';

  static const confirmPassword = 'Please confirm your password';
  static const passwordMismatch = 'Password does not match';
  
  static const enterFullName = 'Please enter your full name';
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\models\auth_remote_data_source.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/error/exception_mapper.dart';
import 'package:finance_tracker_app/core/network/supabase_endpoints.dart';

class SignUpResult {
  final bool emailConfirmationRequired;
  final String? message;

  const SignUpResult({
    required this.emailConfirmationRequired,
    this.message,
  });
}

abstract class AuthRemoteDataSource {
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  });

  Future<String> login({
    required String email,
    required String password,
  });

  Future<Map<String, dynamic>> getMe();
}

class AuthRemoteDataSourceImpl implements AuthRemoteDataSource {
  final Dio dio;
  AuthRemoteDataSourceImpl(this.dio);

  @override
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authSignUp,
        data: {
          'email': email,
          'password': password,
          'data': {'full_name': fullName},
        },
      );

      // Supabase thường trả user/session (tuỳ settings)
      // Nếu bật email confirm, thường session = null => yêu cầu verify email
      final data = res.data;
      final session = (data is Map<String, dynamic>) ? data['session'] : null;

      final requiresConfirm = session == null;

      return SignUpResult(
        emailConfirmationRequired: requiresConfirm,
        message: requiresConfirm
            ? 'Sign up successful. Please verify your email before logging in.'
            : 'Sign up successful.',
      );
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<String> login({
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authToken,
        queryParameters: {'grant_type': 'password'},
        data: {'email': email, 'password': password},
      );

      final json = res.data as Map<String, dynamic>;
      final token = (json['access_token'] ?? '').toString();

      if (token.isEmpty) {
        throw ExceptionMapper.map(
          DioException(
            requestOptions: res.requestOptions,
            response: res,
            error: 'Missing access_token',
            type: DioExceptionType.badResponse,
          ),
        );
      }

      return token;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<Map<String, dynamic>> getMe() async {
    try {
      final res = await dio.get(SupabaseEndpoints.authUser);
      return res.data as Map<String, dynamic>;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\repositories\auth_repository_impl.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';

class AuthRepositoryImpl implements AuthRepository {
  final AuthRemoteDataSource remote;
  final SessionLocalDataSource sessionLocal;

  AuthRepositoryImpl({
    required this.remote,
    required this.sessionLocal,
  });

  @override
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  }) async {
    final result = await remote.signup(
      fullName: fullName,
      email: email,
      password: password,
    );

    // ✅ Bật email confirm => không login ngay
    if (result.emailConfirmationRequired) {
      throw AuthException(
        result.message ??
            'Sign up successful. Please verify your email before logging in.',
      );
    }

    // Nếu project bạn tắt confirm email (session có sẵn) thì có thể auto login:
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel.fromJson({
      'id': me['id'],
      'email': me['email'],
      'fullName': (me['user_metadata']?['full_name']) as String?,
    });
  }

  @override
  Future<UserModel> login({
    required String email,
    required String password,
  }) async {
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel(
      id: (me['id'] ?? '').toString(),
      email: (me['email'] ?? '').toString(),
      fullName: (me['user_metadata']?['full_name']) as String?,
    );
  }

  @override
  Future<void> logout() async {
    await sessionLocal.clear();
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.dart =====
import 'package:freezed_annotation/freezed_annotation.dart';

part 'user_model.freezed.dart';
part 'user_model.g.dart';

@freezed
abstract class UserModel with _$UserModel {
  const factory UserModel({
    required String id,
    required String email,
    String? fullName,
  }) = _UserModel;

  factory UserModel.fromJson(Map<String, dynamic> json) =>
      _$UserModelFromJson(json);
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.freezed.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND
// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'user_model.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

// dart format off
T _$identity<T>(T value) => value;

/// @nodoc
mixin _$UserModel {

 String get id; String get email; String? get fullName;
/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
$UserModelCopyWith<UserModel> get copyWith => _$UserModelCopyWithImpl<UserModel>(this as UserModel, _$identity);

  /// Serializes this UserModel to a JSON map.
  Map<String, dynamic> toJson();


@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class $UserModelCopyWith<$Res>  {
  factory $UserModelCopyWith(UserModel value, $Res Function(UserModel) _then) = _$UserModelCopyWithImpl;
@useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class _$UserModelCopyWithImpl<$Res>
    implements $UserModelCopyWith<$Res> {
  _$UserModelCopyWithImpl(this._self, this._then);

  final UserModel _self;
  final $Res Function(UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@pragma('vm:prefer-inline') @override $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_self.copyWith(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}

}


/// Adds pattern-matching-related methods to [UserModel].
extension UserModelPatterns on UserModel {
/// A variant of `map` that fallback to returning `orElse`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeMap<TResult extends Object?>(TResult Function( _UserModel value)?  $default,{required TResult orElse(),}){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// Callbacks receives the raw object, upcasted.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case final Subclass2 value:
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult map<TResult extends Object?>(TResult Function( _UserModel value)  $default,){
final _that = this;
switch (_that) {
case _UserModel():
return $default(_that);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `map` that fallback to returning `null`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? mapOrNull<TResult extends Object?>(TResult? Function( _UserModel value)?  $default,){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return null;

}
}
/// A variant of `when` that fallback to an `orElse` callback.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeWhen<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)?  $default,{required TResult orElse(),}) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// As opposed to `map`, this offers destructuring.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case Subclass2(:final field2):
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult when<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)  $default,) {final _that = this;
switch (_that) {
case _UserModel():
return $default(_that.id,_that.email,_that.fullName);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `when` that fallback to returning `null`
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? whenOrNull<TResult extends Object?>(TResult? Function( String id,  String email,  String? fullName)?  $default,) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return null;

}
}

}

/// @nodoc
@JsonSerializable()

class _UserModel implements UserModel {
  const _UserModel({required this.id, required this.email, this.fullName});
  factory _UserModel.fromJson(Map<String, dynamic> json) => _$UserModelFromJson(json);

@override final  String id;
@override final  String email;
@override final  String? fullName;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
_$UserModelCopyWith<_UserModel> get copyWith => __$UserModelCopyWithImpl<_UserModel>(this, _$identity);

@override
Map<String, dynamic> toJson() {
  return _$UserModelToJson(this, );
}

@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is _UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class _$UserModelCopyWith<$Res> implements $UserModelCopyWith<$Res> {
  factory _$UserModelCopyWith(_UserModel value, $Res Function(_UserModel) _then) = __$UserModelCopyWithImpl;
@override @useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class __$UserModelCopyWithImpl<$Res>
    implements _$UserModelCopyWith<$Res> {
  __$UserModelCopyWithImpl(this._self, this._then);

  final _UserModel _self;
  final $Res Function(_UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @pragma('vm:prefer-inline') $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_UserModel(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}


}

// dart format on

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.g.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'user_model.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_UserModel _$UserModelFromJson(Map<String, dynamic> json) => _UserModel(
  id: json['id'] as String,
  email: json['email'] as String,
  fullName: json['fullName'] as String?,
);

Map<String, dynamic> _$UserModelToJson(_UserModel instance) =>
    <String, dynamic>{
      'id': instance.id,
      'email': instance.email,
      'fullName': instance.fullName,
    };

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\repositories\auth_repository.dart =====
import '../entities/user_model.dart';

abstract class AuthRepository {
  Future<UserModel> login({required String email, required String password});
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  });
  Future<void> logout();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\login.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Login {
  final AuthRepository repository;
  Login(this.repository);

  Future<UserModel> call({required String email, required String password}) {
    if (email.trim().isEmpty) {
      throw const ValidationException('Email cannot be empty');
    }

    if (!email.contains('@') || !email.contains('.')) {
      throw const ValidationException('Invalid email format');
    }

    if (password.isEmpty) {
      throw const ValidationException('Password cannot be empty');
    }

    if (password.length < 8) {
      throw const ValidationException('Password must be at least 8 characters');
    }

    return repository.login(email: email, password: password);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\sign_up.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Signup {
  final AuthRepository repository;

  Signup(this.repository);

  Future<UserModel> call({
    required String email,
    required String password,
    required String fullName,
  }) {
    final trimmedEmail = email.trim();
    final trimmedName = fullName.trim();

    _validateFullName(trimmedName);
    _validateEmail(trimmedEmail);
    _validatePassword(password);

    return repository.signup(
      email: trimmedEmail,
      password: password,
      fullName: trimmedName,
    );
  }


  void _validateFullName(String name) {
    if (name.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterFullName,
      );
    }
  }

  void _validateEmail(String email) {
    if (email.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterEmail,
      );
    }

    final emailRegex = RegExp(r'^[^@]+@[^@]+\.[^@]+$');
    if (!emailRegex.hasMatch(email)) {
      throw const ValidationException(
        ValidationMessages.invalidEmail,
      );
    }
  }

  void _validatePassword(String password) {
    if (password.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterPassword,
      );
    }

    if (password.length < 8) {
      throw const ValidationException(
        ValidationMessages.shortPassword,
      );
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedLetter,
      );
    }

    if (!RegExp(r'[0-9]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedNumber,
      );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:logger/logger.dart';

import 'auth_state.dart';
import '../../domain/usecases/login.dart';
import '../../domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';

class AuthCubit extends Cubit<AuthState> {
  final Login _login;
  final Signup _signup;
  final Logger _logger;

  AuthCubit({required Login login, required Signup signup, Logger? logger})
    : _login = login,
      _signup = signup,
      _logger = logger ?? Logger(),
      super(AuthInitial());

  Future<void> login(String email, String password) async {
    if (state is AuthSuccess) {
      emit(AuthFailure('You are already logged in.'));
      return;
    }

    await _runAuthAction(
      actionLabel: 'login',
      action: () => _login(email: email, password: password),
      successMessage: 'Login success',
    );
  }

  Future<void> signup(String fullName, String email, String password) async {
    await _runAuthAction(
      actionLabel: 'signup',
      action: () =>
          _signup(fullName: fullName, email: email, password: password),
      successMessage: 'Signup success',
    );
  }

  Future<void> _runAuthAction({
    required String actionLabel,
    required Future<dynamic> Function() action,
    required String successMessage,
  }) async {
    emit(AuthLoading());

    const maxAttempts = 2;
    var attempt = 0;

    while (true) {
      try {
        final user = await action();
        _logger.i('$successMessage: ${user.email}', error: null);
        emit(AuthSuccess(user));
        return;
      } on NetworkException catch (e) {
        attempt++;
        _logger.w(
          'NetworkException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on TimeoutRequestException catch (e) {
        attempt++;
        _logger.w(
          'TimeoutRequestException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on AuthException catch (e) {
        _logger.w('AuthException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } on AppException catch (e) {
        _logger.w('AppException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } catch (e, s) {
        _logger.e('Unexpected error on $actionLabel', error: e, stackTrace: s);
        emit(AuthFailure('Unexpected error. Please try again.'));
        return;
      }
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\dashboard_screen.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class DashboardScreen extends StatefulWidget {
  const DashboardScreen({super.key});

  @override
  State<DashboardScreen> createState() => _DashboardScreenState();
}

class _DashboardScreenState extends State<DashboardScreen> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Dashboard'),
      ),
      body: const Center(
        child: Text('Welcome to the Dashboard!'),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _formKey = GlobalKey<FormState>();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  void _onLoginPressed(bool isLoading) {
    if (isLoading) return;

    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().login(
          _emailController.text.trim(),
          _passwordController.text,
        );
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final colorScheme = theme.colorScheme;

    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      backgroundColor: colorScheme.background,
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) {
            if (state is AuthFailure) {
              ScaffoldMessenger.of(context)
                ..hideCurrentSnackBar()
                ..showSnackBar(
                  SnackBar(content: Text(state.message)),
                );
              return;
            }

            if (state is AuthSuccess) {
              // ✅ LOGIN THÀNH CÔNG → DASHBOARD (clear stack)
              Navigator.pushNamedAndRemoveUntil(
                context,
                AppRoutes.dashboard,
                (_) => false,
              );
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return SingleChildScrollView(
              padding: const EdgeInsets.symmetric(horizontal: 24),
              child: Form(
                key: _formKey,
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  crossAxisAlignment: CrossAxisAlignment.stretch,
                  children: [
                    const SizedBox(height: 40),
                    Text(
                      'Welcome to Personal\nFinance Tracker',
                      textAlign: TextAlign.center,
                      style: theme.textTheme.headlineSmall?.copyWith(
                        fontWeight: FontWeight.bold,
                        color: colorScheme.onBackground,
                      ),
                    ),
                    const SizedBox(height: 32),
                    Center(child: loginImage),
                    const SizedBox(height: 32),
                    TextFormField(
                      controller: _emailController,
                      keyboardType: TextInputType.emailAddress,
                      validator: AppValidators.email,
                      decoration: InputDecoration(
                        labelText: 'Email',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                      ),
                    ),
                    const SizedBox(height: 16),
                    TextFormField(
                      controller: _passwordController,
                      obscureText: _isPasswordHidden,
                      keyboardType: TextInputType.visiblePassword,
                      validator: AppValidators.password,
                      decoration: InputDecoration(
                        labelText: 'Password',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                        suffixIcon: IconButton(
                          icon: Icon(
                            _isPasswordHidden
                                ? Icons.visibility_off
                                : Icons.visibility,
                          ),
                          onPressed: () {
                            setState(() {
                              _isPasswordHidden = !_isPasswordHidden;
                            });
                          },
                        ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    SizedBox(
                      height: 52,
                      child: ElevatedButton(
                        onPressed: () => _onLoginPressed(isLoading),
                        style: ElevatedButton.styleFrom(
                          backgroundColor: colorScheme.primary,
                          foregroundColor: colorScheme.onPrimary,
                          shape: RoundedRectangleBorder(
                            borderRadius: BorderRadius.circular(12),
                          ),
                        ),
                        child: isLoading
                            ? const SizedBox(
                                width: 22,
                                height: 22,
                                child: CircularProgressIndicator(
                                  strokeWidth: 2,
                                ),
                              )
                            : const Text(
                                'Login',
                                style: TextStyle(
                                  fontSize: 18,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          "Don't have an account? ",
                          style: theme.textTheme.bodyMedium?.copyWith(
                            color: colorScheme.onSurface.withOpacity(0.6),
                          ),
                        ),
                        GestureDetector(
                          onTap: () {
                            Navigator.pushNamed(context, AppRoutes.signUp);
                          },
                          child: Text(
                            "Register",
                            style: theme.textTheme.bodyMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                              color: colorScheme.primary,
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),
                  ],
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final _formKey = GlobalKey<FormState>();

  final _fullNameController = TextEditingController();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  final _confirmPasswordController = TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  void _onSignUpPressed(BuildContext context, bool isLoading) {
    if (isLoading) return;
    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().signup(
      _fullNameController.text.trim(),
      _emailController.text.trim(),
      _passwordController.text,
    );
  }

  void _showSnack(String msg) {
    ScaffoldMessenger.of(context)
      ..hideCurrentSnackBar()
      ..showSnackBar(SnackBar(content: Text(msg)));
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;
    final ts = theme.textTheme;

    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) async {
            if (state is AuthFailure) {
              _showSnack(state.message);
            }
            if (state is AuthSuccess) {
              _showSnack('Sign up successful. Please login.');
              await Future.delayed(const Duration(milliseconds: 800));
              if (!mounted) return;
              Navigator.pushReplacementNamed(context, AppRoutes.login);
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return Stack(
              children: [
                Center(
                  child: SingleChildScrollView(
                    padding: const EdgeInsets.symmetric(
                      horizontal: AppSpacing.lg,
                    ),
                    child: Form(
                      key: _formKey,
                      child: Column(
                        children: [
                          const SizedBox(height: AppSpacing.lg),
                          Text(
                            'Sign Up',
                            style: ts.headlineMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          signUpImage,
                          const SizedBox(height: AppSpacing.xl),
                          AppValidatedTextField(
                            controller: _fullNameController,
                            label: 'Full Name',
                            keyboardType: TextInputType.name,
                            validator: (value) =>
                                value == null || value.trim().isEmpty
                                ? 'Please enter your full name'
                                : null,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _emailController,
                            label: 'Email',
                            keyboardType: TextInputType.emailAddress,
                            validator: AppValidators.email,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _passwordController,
                            label: 'Password',
                            obscureText: !_showPassword,
                            validator: AppValidators.password,
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showPassword = !_showPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _confirmPasswordController,
                            label: 'Confirm password',
                            obscureText: !_showConfirmPassword,
                            validator: (value) => AppValidators.confirmPassword(
                              value,
                              _passwordController.text,
                            ),
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showConfirmPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showConfirmPassword =
                                    !_showConfirmPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          SizedBox(
                            width: double.infinity,
                            height: AppSpacing.xxl,
                            child: ElevatedButton(
                              style: ElevatedButton.styleFrom(
                                backgroundColor: cs.primary,
                                foregroundColor: cs.onPrimary,
                                shape: RoundedRectangleBorder(
                                  borderRadius: BorderRadius.circular(12),
                                ),
                              ),
                              onPressed: () =>
                                  _onSignUpPressed(context, isLoading),
                              child: isLoading
                                  ? const SizedBox(
                                      width: 20,
                                      height: 20,
                                      child: CircularProgressIndicator(
                                        strokeWidth: 2,
                                        valueColor: AlwaysStoppedAnimation(
                                          Colors.white,
                                        ),
                                      ),
                                    )
                                  : Text(
                                      'Sign Up',
                                      style: ts.titleMedium?.copyWith(
                                        fontWeight: FontWeight.w600,
                                      ),
                                    ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Text(
                                "Already have an account?",
                                style: ts.bodyMedium,
                              ),
                              const SizedBox(width: AppSpacing.xs),
                              GestureDetector(
                                onTap: () => Navigator.pushNamed(
                                  context,
                                  AppRoutes.login,
                                ),
                                child: Text(
                                  "Login",
                                  style: ts.bodyMedium?.copyWith(
                                    color: cs.primary,
                                    fontWeight: FontWeight.w600,
                                  ),
                                ),
                              ),
                            ],
                          ),
                          const SizedBox(height: AppSpacing.lg),
                        ],
                      ),
                    ),
                  ),
                ),
                if (isLoading)
                  Positioned.fill(
                    child: AbsorbPointer(
                      absorbing: true,
                      child: Container(
                        color: Colors.black.withOpacity(0.2),
                        alignment: Alignment.center,
                        child: const SizedBox(
                          width: 36,
                          height: 36,
                          child: CircularProgressIndicator(strokeWidth: 3),
                        ),
                      ),
                    ),
                  ),
              ],
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 16, color: Colors.black54),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const String aEnv = '.env';
  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();

  /// List of all assets
  static List<String> get values => [aEnv];
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_validated_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_validated_text_field.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:flutter/material.dart';

class AppValidatedTextField extends StatelessWidget {
  final TextEditingController controller;
  final String label;
  final String? hintText;
  final String? Function(String?)? validator;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextInputType keyboardType;
  final TextInputAction? textInputAction;
  final ValueChanged<String>? onChanged;
  final bool enabled;

  const AppValidatedTextField({
    super.key,
    required this.controller,
    required this.label,
    this.hintText,
    this.validator,
    this.obscureText = false,
    this.suffixIcon,
    this.keyboardType = TextInputType.text,
    this.textInputAction,
    this.onChanged,
    this.enabled = true,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;

    OutlineInputBorder border(Color color) => OutlineInputBorder(
      borderRadius: AppRadius.medium,
      borderSide: BorderSide(color: color, width: 1),
    );

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          label,
          style: theme.textTheme.bodyMedium?.copyWith(
            fontWeight: FontWeight.w500,
            color: cs.onBackground,
          ),
        ),
        const SizedBox(height: 8),
        TextFormField(
          controller: controller,
          obscureText: obscureText,
          validator: validator,
          autovalidateMode: AutovalidateMode.onUserInteraction,
          keyboardType: keyboardType,
          textInputAction: textInputAction,
          onChanged: onChanged,
          enabled: enabled,
          decoration: InputDecoration(
            hintText: hintText ?? label,
            hintStyle: theme.textTheme.bodyMedium?.copyWith(
              color: cs.onSurfaceVariant,
            ),
            contentPadding: const EdgeInsets.all(16),
            suffixIcon: suffixIcon,
            border: border(cs.outline),
            enabledBorder: border(cs.outline),
            focusedBorder: border(cs.primary),
            errorBorder: border(cs.error),
            focusedErrorBorder: border(cs.error),
            disabledBorder: border(cs.outlineVariant),
          ),
        ),
      ],
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\code_report.txt =====
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/feature/users/presentation/pages/welcome_screen.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      home: const SafeArea(
        child: WelcomeScreen(),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\login_screen.dart =====
// Thay đổi đường dẫn import này cho đúng với project của bạn
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  
  // Biến trạng thái ẩn/hiện mật khẩu
  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    Widget loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );

    return Scaffold(
      backgroundColor: Colors.white, // Thêm màu nền trắng cho sạch
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), // Thêm khoảng cách đầu trang

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              // Hiển thị ảnh
              Center(child: loginImage),

              const SizedBox(height: 32),

              // --- EMAIL FIELD ---
              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, // Email không cần ẩn ký tự
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              // --- PASSWORD FIELD ---
              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                // Logic icon mắt thần
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden 
                        ? Icons.visibility_off 
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              // --- LOGIN BUTTON ---
              ElevatedButton(
                onPressed: () {
                  // Xử lý đăng nhập
                  print("Email: ${_emailController.text}");
                  print("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E), // Màu cam
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),

              // --- FOOTER REGISTER ---
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      // Điều hướng sang trang Register
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),
              
              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/feature/users/presentation/widgets/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  Widget build(BuildContext context) {
    Widget sign_up_image = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, // Thêm fit để ảnh không bị méo
    );
    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                sign_up_image,

                const SizedBox(height: 32),

                // Full Name
                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                // Email
                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                // Password
                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                // Confirm password
                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                // Nút Sign Up
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                      // TODO: handle sign up
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),

                // Text dưới cùng
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        // TODO: chuyển sang màn Login
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\pages\welcome_screen.dart =====
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    Widget wallet = Assets.icons.walletSolid.svg(
      width: 240,
      height: 120,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn)
    );
    return Scaffold(
      body: Column(
        children: [
          wallet,
          const Text('Welcome'),
          const SizedBox(height: 12),
          const Text('Take control of your finances with us.'),
          const SizedBox(height: 12),
          ElevatedButton(onPressed: () {}, child: Text('Get Started')),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\presentation\widgets\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      // đảm bảo có Directionality + Theme + textScale 
      builder: (context, child) {
        return MediaQuery(
          data: MediaQuery.of(context).copyWith(
            textScaler: const TextScaler.linear(1.0),
          ),
          child: Directionality(
            textDirection: TextDirection.ltr,
            child: child!,
          ),
        );
      },

      // theme mặc định đầy đủ
      theme: ThemeData(
        useMaterial3: true,
        colorSchemeSeed: Colors.green,
      ),

      // dùng router thay cho home
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return MaterialPageRoute(
          builder: (_) => const WelcomeScreen(),
          settings: settings,
        );

      case AppRoutes.login:
        return MaterialPageRoute(
          builder: (_) => const LoginScreen(),
          settings: settings,
        );

      case AppRoutes.signUp:
        return MaterialPageRoute(
          builder: (_) => const SignUpScreen(),
          settings: settings,
        );

      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(
              child: Text('Route not found'),
            ),
          ),
          settings: settings,
        );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain, 
    );

    return Scaffold(
      backgroundColor: Colors.white, 
      body: SafeArea(
        child: SingleChildScrollView(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 40), 

              const Text(
                'Welcome to Personal\nFinance Tracker',
                textAlign: TextAlign.center,
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Colors.black87,
                ),
              ),

              const SizedBox(height: 32),

              Center(child: loginImage),

              const SizedBox(height: 32),

              CustomTextfield(
                controller: _emailController,
                hintText: 'Email',
                obscureText: false, 
                keyboardType: TextInputType.emailAddress,
              ),

              const SizedBox(height: 16),

              CustomTextfield(
                controller: _passwordController,
                hintText: 'Password',
                obscureText: _isPasswordHidden,
                keyboardType: TextInputType.visiblePassword,
                suffixIcon: IconButton(
                  icon: Icon(
                    _isPasswordHidden
                        ? Icons.visibility_off
                        : Icons.visibility,
                    color: Colors.grey,
                  ),
                  onPressed: () {
                    setState(() {
                      _isPasswordHidden = !_isPasswordHidden;
                    });
                  },
                ),
              ),

              const SizedBox(height: 24),

              ElevatedButton(
                onPressed: () {
                  debugPrint("Email: ${_emailController.text}");
                  debugPrint("Pass: ${_passwordController.text}");
                },
                style: ElevatedButton.styleFrom(
                  backgroundColor: const Color(0xFFF77D0E),
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12),
                  ),
                  elevation: 2,
                ),
                child: const Text(
                  'Login',
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),

              const SizedBox(height: 24),
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Text(
                    "Don't have an account? ",
                    style: TextStyle(color: Colors.grey, fontSize: 16),
                  ),
                  GestureDetector(
                    onTap: () {
                      Navigator.pushNamed(context, AppRoutes.signUp);
                    },
                    child: const Text(
                      "Register",
                      style: TextStyle(
                        fontWeight: FontWeight.bold,
                        color: Colors.black,
                        fontSize: 16,
                      ),
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 20), // Khoảng cách dưới cùng
            ],
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/shared/widgets/button/custom_text_field.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart'; 

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final TextEditingController _fullNameController = TextEditingController();
  final TextEditingController _emailController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPasswordController =
      TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const SizedBox(height: 16),
                const Text(
                  'Sign Up',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 24),

                signUpImage,

                const SizedBox(height: 32),

                CustomTextfield(
                  hintText: 'Full Name',
                  obscureText: false,
                  controller: _fullNameController,
                  keyboardType: TextInputType.name,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Email',
                  obscureText: false,
                  controller: _emailController,
                  keyboardType: TextInputType.emailAddress,
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Password',
                  obscureText: !_showPassword,
                  controller: _passwordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showPassword = !_showPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 16),

                CustomTextfield(
                  hintText: 'Confirm password',
                  obscureText: !_showConfirmPassword,
                  controller: _confirmPasswordController,
                  keyboardType: TextInputType.visiblePassword,
                  suffixIcon: IconButton(
                    icon: Icon(
                      _showConfirmPassword
                          ? Icons.visibility_off_outlined
                          : Icons.visibility_outlined,
                      size: 20,
                    ),
                    onPressed: () {
                      setState(() {
                        _showConfirmPassword = !_showConfirmPassword;
                      });
                    },
                  ),
                ),
                const SizedBox(height: 24),

                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    onPressed: () {
                    },
                    child: const Text(
                      'Sign Up',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                    ),
                  ),
                ),

                const SizedBox(height: 16),
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Text("Already have an account? "),
                    GestureDetector(
                      onTap: () {
                        Navigator.pushNamed(context, AppRoutes.login);
                      },
                      child: const Text(
                        'Login',
                        style: TextStyle(
                          color: Colors.orange,
                          fontWeight: FontWeight.w600,
                        ),
                      ),
                    ),
                  ],
                ),
                const SizedBox(height: 16),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(
        Colors.green,
        BlendMode.srcIn,
      ),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                  ),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.black54,
                  ),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\custom_text_field.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class CustomTextfield extends StatelessWidget {
  final String hintText;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextEditingController? controller;
  final TextInputType keyboardType;

  const CustomTextfield({
    super.key,
    required this.hintText,
    required this.obscureText,
    this.suffixIcon,
    this.controller,
    required this.keyboardType,
  });

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      keyboardType: keyboardType,
      decoration: InputDecoration(
        hintText: hintText,
        hintStyle: TextStyle(color: Colors.grey[500]),
        suffixIcon: suffixIcon,
        contentPadding: const EdgeInsets.all(16),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(color: Colors.grey)
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(12),
          borderSide: const BorderSide(
            color: Colors.orange,
            width: 2
          )
        )
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_text_field.dart =====
\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  String? initError;

  try {
    // Load .env (đảm bảo file .env nằm đúng root và đã khai báo trong pubspec assets nếu bạn dùng kiểu đó)
    await dotenv.load(fileName: '.env');

    final supabaseUrl = dotenv.env['SUPABASE_URL'];
    final supabaseAnonKey = dotenv.env['SUPABASE_ANON_KEY'];

    if (supabaseUrl == null ||
        supabaseUrl.trim().isEmpty ||
        supabaseAnonKey == null ||
        supabaseAnonKey.trim().isEmpty) {
      throw Exception('Missing SUPABASE_URL hoặc SUPABASE_ANON_KEY trong file .env');
    }

    // ✅ Không dùng Supabase.initialize() nữa (vì đã chuyển sang Dio + REST API)
    setupDI(
      supabaseUrl: supabaseUrl.trim(),
      supabaseAnonKey: supabaseAnonKey.trim(),
    );
  } catch (e, st) {
    debugPrint('❌ Lỗi khởi tạo app: $e');
    debugPrintStack(stackTrace: st);
    initError = e.toString();
  }

  runApp(initError != null ? ErrorApp(errorMessage: initError!) : const AppRoot());
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,

      builder: (context, child) {
        final mediaQuery = MediaQuery.of(context);
        return MediaQuery(
          data: mediaQuery.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },

      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(24.0),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: 16),
                const Text(
                  'Đã xảy ra lỗi khi khởi tạo ứng dụng',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 12),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: const TextStyle(fontSize: 14),
                ),
                const SizedBox(height: 24),
                const Text(
                  'Vui lòng kiểm tra lại file .env và cấu hình Supabase.',
                  textAlign: TextAlign.center,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import '../network/session_local_data_source.dart';
import '../network/session_local_data_source_prefs.dart';

import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
    () => SessionLocalDataSourcePrefs(),
  );

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(() {
    final client = DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () => getIt<SessionLocalDataSource>().getAccessToken(),
    );
    print('Dio registered: ${getIt.isRegistered<Dio>()}');

    return client.dio;
  });

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(() => Login(getIt<AuthRepository>()));
  getIt.registerLazySingleton<Signup>(() => Signup(getIt<AuthRepository>()));

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(login: getIt<Login>(), signup: getIt<Signup>()),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
/// Base class for all application-level exceptions.
/// Always contains a message safe to show to UI.
class AppException implements Exception {
  final String message;

  const AppException(this.message);

  @override
  String toString() => message;
}

/// Network related issues: no internet, DNS fail, SocketException, etc.
class NetworkException extends AppException {
  const NetworkException([String message = 'Network error. Check connection'])
      : super(message);
}

/// Request timeout or server took too long to respond.
class TimeoutRequestException extends AppException {
  const TimeoutRequestException([String message = 'Request timed out'])
      : super(message);
}

/// Authentication errors: wrong password, invalid email, expired token, etc.
class AuthException extends AppException {
  const AuthException([String message = 'Authentication failed'])
      : super(message);
}

/// Validation errors in client-side or API-side input.
/// (e.g. password too short, email invalid format)
class ValidationException extends AppException {
  const ValidationException([String message = 'Invalid input data'])
      : super(message);
}

/// Server errors (5xx) or unexpected Supabase error messages.
class ServerException extends AppException {
  const ServerException([String message = 'Server error occurred'])
      : super(message);
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'package:dio/dio.dart';
import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic error) {
    if (error is AppException) return error;

    if (error is SocketException) {
      return const NetworkException('No internet connection');
    }

    if (error is TimeoutException) {
      return const TimeoutRequestException();
    }

    if (error is DioException) {
      return _mapDio(error);
    }

    return AppException(error.toString());
  }

  static AppException _mapDio(DioException e) {
    final status = e.response?.statusCode;
    final data = e.response?.data;

    final msg = _extractSupabaseMessage(data) ??
        _extractGenericMessage(data) ??
        e.message ??
        'Request failed';

    // 400/401/403: auth/validation hay gặp ở Supabase Auth
    if (status == 400 || status == 401 || status == 403) {
      return AuthException(msg);
    }

    if (status != null && status >= 500) {
      return ServerException(msg);
    }

    // Không rõ status thì vẫn trả msg thật thay vì "Unexpected server error"
    return ServerException(msg);
  }

  static String? _extractSupabaseMessage(dynamic data) {
    // Supabase thường trả: { code, error_code, msg }
    // hoặc: { error, error_description }
    if (data is Map<String, dynamic>) {
      final candidates = [
        data['msg'],
        data['error_description'],
        data['message'],
        data['error'],
        data['error_code'],
        data['code'],
      ];
      for (final c in candidates) {
        final s = c?.toString().trim();
        if (s != null && s.isNotEmpty) return s;
      }
    }
    return null;
  }

  static String? _extractGenericMessage(dynamic data) {
    if (data is String && data.trim().isNotEmpty) return data.trim();
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

typedef TokenProvider = Future<String?> Function();

class DioClient {
  final Dio dio;

  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            connectTimeout: const Duration(seconds: 15),
            receiveTimeout: const Duration(seconds: 15),
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          final token = await tokenProvider();

          // ✅ Supabase expects Authorization Bearer token
          // - if logged in: use accessToken
          // - else: use anonKey (very important for /auth/v1/*)
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';

          return handler.next(options);
        },
        onError: (e, handler) {
          // log để nhìn ra lỗi thật
          // ignore: avoid_print
          print('❌ ${e.requestOptions.method} ${e.requestOptions.uri}');
          // ignore: avoid_print
          print('Status: ${e.response?.statusCode}');
          // ignore: avoid_print
          print('Data: ${e.response?.data}');
          return handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
abstract class SessionLocalDataSource {
  Future<void> saveAccessToken(String token);
  Future<String?> getAccessToken();
  Future<void> clear();
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source_prefs.dart =====
import 'package:shared_preferences/shared_preferences.dart';

import 'session_local_data_source.dart';

class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  static const _kAccessToken = 'access_token';

  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_kAccessToken, token);
  }

  @override
  Future<String?> getAccessToken() async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString(_kAccessToken);
  }

  @override
  Future<void> clear() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\theme\app_theme.dart =====
import 'package:flutter/material.dart';

class AppSpacing {
  static const double xs = 4;
  static const double sm = 8;
  static const double md = 16;
  static const double lg = 24;
  static const double xl = 32;
  static const double xxl = 40;
}

class AppColors {
  static const Color primary = Color(0xFF1A73E8);
  static const Color primaryLight = Color(0xFFEEF5FF);
  static const Color primaryDark = Color(0xFF0F4FB8);

  static const Color secondary = Color(0xFFFF8A00);
  static const Color secondaryLight = Color(0xFFFFF3E6);
  static const Color secondaryDark = Color(0xFFCC6F00);

  static const Color neutral900 = Color(0xFF212121);
  static const Color neutral800 = Color(0xFF303030);
  static const Color neutral700 = Color(0xFF424242);
  static const Color neutral600 = Color(0xFF616161);
  static const Color neutral500 = Color(0xFF757575);
  static const Color neutral400 = Color(0xFF9E9E9E);
  static const Color neutral300 = Color(0xFFBDBDBD);
  static const Color neutral200 = Color(0xFFE0E0E0);
  static const Color neutral100 = Color(0xFFEFEFEF);
  static const Color neutral50 = Color(0xFFF7F7F7);

  static const Color white = Colors.white;

  static const Color success = Color(0xFF4CAF50);
  static const Color error = Color(0xFFE53935);
  static const Color warning = Color(0xFFFFC107);
  static const Color info = Color(0xFF0288D1);
}

class AppTextStyles {
  static const String _font = 'Roboto';

  static TextStyle get display => const TextStyle(
        fontFamily: _font,
        fontSize: 34,
        fontWeight: FontWeight.w700,
        height: 1.2,
        color: AppColors.neutral900,
      );

  static TextStyle get headline => const TextStyle(
        fontFamily: _font,
        fontSize: 24,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get title => const TextStyle(
        fontFamily: _font,
        fontSize: 20,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get bodyLg => const TextStyle(
        fontFamily: _font,
        fontSize: 16,
        fontWeight: FontWeight.w500,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get body => const TextStyle(
        fontFamily: _font,
        fontSize: 14,
        fontWeight: FontWeight.w400,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get caption => const TextStyle(
        fontFamily: _font,
        fontSize: 12,
        fontWeight: FontWeight.w400,
        height: 1.3,
        color: AppColors.neutral600,
      );
}

class AppRadius {
  static const BorderRadius small = BorderRadius.all(Radius.circular(8));
  static const BorderRadius medium = BorderRadius.all(Radius.circular(12));
  static const BorderRadius large = BorderRadius.all(Radius.circular(20));
  static const BorderRadius pill = BorderRadius.all(Radius.circular(100));
}

class AppShadows {
  static List<BoxShadow> level1 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.08),
      blurRadius: 4,
      offset: const Offset(0, 2),
    ),
  ];

  static List<BoxShadow> level2 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.12),
      blurRadius: 12,
      offset: const Offset(0, 4),
    ),
  ];

  static List<BoxShadow> level3 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.16),
      blurRadius: 20,
      offset: const Offset(0, 8),
    ),
  ];
}

class AppTheme {
  static ThemeData get light {
    final base = ThemeData.light(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: AppColors.white,
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: AppColors.white,
        background: AppColors.white,
        outline: AppColors.neutral300,
        outlineVariant: AppColors.neutral200,
        onSurfaceVariant: AppColors.neutral500,
      ),
      textTheme: base.textTheme.copyWith(
        displayLarge: AppTextStyles.display,
        headlineMedium: AppTextStyles.headline,
        titleMedium: AppTextStyles.title,
        bodyLarge: AppTextStyles.bodyLg,
        bodyMedium: AppTextStyles.body,
        bodySmall: AppTextStyles.caption,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: AppColors.white,
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral900,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral900),
      ),
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          backgroundColor: AppColors.primary,
          foregroundColor: AppColors.white,
          padding: const EdgeInsets.symmetric(vertical: 14, horizontal: 20),
          shape: RoundedRectangleBorder(
            borderRadius: AppRadius.medium,
          ),
          textStyle: const TextStyle(
            fontFamily: 'Roboto',
            fontSize: 14,
            fontWeight: FontWeight.w600,
          ),
        ),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: AppColors.neutral50,
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral200),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral200),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        errorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error),
        ),
        focusedErrorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
      cardTheme: CardThemeData(
        color: AppColors.white,
        elevation: 0,
        margin: EdgeInsets.zero,
        shape: RoundedRectangleBorder(
          borderRadius: AppRadius.large,
          side: const BorderSide(color: AppColors.neutral200),
        ),
        shadowColor: Colors.black.withOpacity(0.12),
      ),
    );
  }

  static ThemeData get dark {
    final base = ThemeData.dark(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: const Color(0xFF121212),
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: const Color(0xFF1D1D1D),
        background: const Color(0xFF121212),
        outline: AppColors.neutral600,
        outlineVariant: AppColors.neutral700,
        onSurfaceVariant: AppColors.neutral400,
      ),
      textTheme: base.textTheme.apply(
        fontFamily: 'Roboto',
        bodyColor: AppColors.neutral100,
        displayColor: AppColors.neutral100,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: Color(0xFF121212),
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral100,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral100),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: const Color(0xFF1D1D1D),
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral600),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral600),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\app_validators.dart =====
import 'package:email_validator/email_validator.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

class AppValidators {
  static String? email(String? value) {
    final v = value?.trim();

    if (v == null || v.isEmpty) {
      return ValidationMessages.enterEmail;
    }

    if (!EmailValidator.validate(v)) {
      return ValidationMessages.invalidEmail;
    }

    return null;
  }

  static String? password(String? value) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.enterPassword;
    }

    if (value.length < 8) {
      return ValidationMessages.shortPassword;
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(value)) {
      return ValidationMessages.passwordNeedLetter;
    }

    if (!RegExp(r'[0-9]').hasMatch(value)) {
      return ValidationMessages.passwordNeedNumber;
    }

    return null;
  }

  static String? confirmPassword(String? value, String password) {
    if (value == null || value.isEmpty) {
      return ValidationMessages.confirmPassword;
    }

    if (value != password) {
      return ValidationMessages.passwordMismatch;
    }

    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\validation_messages.dart =====
class ValidationMessages {
  static const enterEmail = 'Please enter your email';
  static const invalidEmail = 'Email format is invalid';

  static const enterPassword = 'Please enter your password';
  static const shortPassword = 'Password must be at least 8 characters';
  static const passwordNeedLetter = 'Password must include at least one letter';
  static const passwordNeedNumber = 'Password must include at least one number';

  static const confirmPassword = 'Please confirm your password';
  static const passwordMismatch = 'Password does not match';
  
  static const enterFullName = 'Please enter your full name';
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\models\auth_remote_data_source.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/error/exception_mapper.dart';
import 'package:finance_tracker_app/core/network/supabase_endpoints.dart';

class SignUpResult {
  final bool emailConfirmationRequired;
  final String? message;

  const SignUpResult({
    required this.emailConfirmationRequired,
    this.message,
  });
}

abstract class AuthRemoteDataSource {
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  });

  Future<String> login({
    required String email,
    required String password,
  });

  Future<Map<String, dynamic>> getMe();
}

class AuthRemoteDataSourceImpl implements AuthRemoteDataSource {
  final Dio dio;
  AuthRemoteDataSourceImpl(this.dio);

  @override
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authSignUp,
        data: {
          'email': email,
          'password': password,
          'data': {'full_name': fullName},
        },
      );

      // Supabase thường trả user/session (tuỳ settings)
      // Nếu bật email confirm, thường session = null => yêu cầu verify email
      final data = res.data;
      final session = (data is Map<String, dynamic>) ? data['session'] : null;

      final requiresConfirm = session == null;

      return SignUpResult(
        emailConfirmationRequired: requiresConfirm,
        message: requiresConfirm
            ? 'Sign up successful. Please verify your email before logging in.'
            : 'Sign up successful.',
      );
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<String> login({
    required String email,
    required String password,
  }) async {
    try {
      final res = await dio.post(
        SupabaseEndpoints.authToken,
        queryParameters: {'grant_type': 'password'},
        data: {'email': email, 'password': password},
      );

      final json = res.data as Map<String, dynamic>;
      final token = (json['access_token'] ?? '').toString();

      if (token.isEmpty) {
        throw ExceptionMapper.map(
          DioException(
            requestOptions: res.requestOptions,
            response: res,
            error: 'Missing access_token',
            type: DioExceptionType.badResponse,
          ),
        );
      }

      return token;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<Map<String, dynamic>> getMe() async {
    try {
      final res = await dio.get(SupabaseEndpoints.authUser);
      return res.data as Map<String, dynamic>;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\repositories\auth_repository_impl.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';

class AuthRepositoryImpl implements AuthRepository {
  final AuthRemoteDataSource remote;
  final SessionLocalDataSource sessionLocal;

  AuthRepositoryImpl({
    required this.remote,
    required this.sessionLocal,
  });

  @override
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  }) async {
    final result = await remote.signup(
      fullName: fullName,
      email: email,
      password: password,
    );

    // ✅ Bật email confirm => không login ngay
    if (result.emailConfirmationRequired) {
      throw AuthException(
        result.message ??
            'Sign up successful. Please verify your email before logging in.',
      );
    }

    // Nếu project bạn tắt confirm email (session có sẵn) thì có thể auto login:
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel.fromJson({
      'id': me['id'],
      'email': me['email'],
      'fullName': (me['user_metadata']?['full_name']) as String?,
    });
  }

  @override
  Future<UserModel> login({
    required String email,
    required String password,
  }) async {
    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    final me = await remote.getMe();
    return UserModel(
      id: (me['id'] ?? '').toString(),
      email: (me['email'] ?? '').toString(),
      fullName: (me['user_metadata']?['full_name']) as String?,
    );
  }

  @override
  Future<void> logout() async {
    await sessionLocal.clear();
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.dart =====
import 'package:freezed_annotation/freezed_annotation.dart';

part 'user_model.freezed.dart';
part 'user_model.g.dart';

@freezed
abstract class UserModel with _$UserModel {
  const factory UserModel({
    required String id,
    required String email,
    String? fullName,
  }) = _UserModel;

  factory UserModel.fromJson(Map<String, dynamic> json) =>
      _$UserModelFromJson(json);
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.freezed.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND
// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'user_model.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

// dart format off
T _$identity<T>(T value) => value;

/// @nodoc
mixin _$UserModel {

 String get id; String get email; String? get fullName;
/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
$UserModelCopyWith<UserModel> get copyWith => _$UserModelCopyWithImpl<UserModel>(this as UserModel, _$identity);

  /// Serializes this UserModel to a JSON map.
  Map<String, dynamic> toJson();


@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class $UserModelCopyWith<$Res>  {
  factory $UserModelCopyWith(UserModel value, $Res Function(UserModel) _then) = _$UserModelCopyWithImpl;
@useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class _$UserModelCopyWithImpl<$Res>
    implements $UserModelCopyWith<$Res> {
  _$UserModelCopyWithImpl(this._self, this._then);

  final UserModel _self;
  final $Res Function(UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@pragma('vm:prefer-inline') @override $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_self.copyWith(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}

}


/// Adds pattern-matching-related methods to [UserModel].
extension UserModelPatterns on UserModel {
/// A variant of `map` that fallback to returning `orElse`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeMap<TResult extends Object?>(TResult Function( _UserModel value)?  $default,{required TResult orElse(),}){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// Callbacks receives the raw object, upcasted.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case final Subclass2 value:
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult map<TResult extends Object?>(TResult Function( _UserModel value)  $default,){
final _that = this;
switch (_that) {
case _UserModel():
return $default(_that);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `map` that fallback to returning `null`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? mapOrNull<TResult extends Object?>(TResult? Function( _UserModel value)?  $default,){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return null;

}
}
/// A variant of `when` that fallback to an `orElse` callback.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeWhen<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)?  $default,{required TResult orElse(),}) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// As opposed to `map`, this offers destructuring.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case Subclass2(:final field2):
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult when<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)  $default,) {final _that = this;
switch (_that) {
case _UserModel():
return $default(_that.id,_that.email,_that.fullName);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `when` that fallback to returning `null`
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? whenOrNull<TResult extends Object?>(TResult? Function( String id,  String email,  String? fullName)?  $default,) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return null;

}
}

}

/// @nodoc
@JsonSerializable()

class _UserModel implements UserModel {
  const _UserModel({required this.id, required this.email, this.fullName});
  factory _UserModel.fromJson(Map<String, dynamic> json) => _$UserModelFromJson(json);

@override final  String id;
@override final  String email;
@override final  String? fullName;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
_$UserModelCopyWith<_UserModel> get copyWith => __$UserModelCopyWithImpl<_UserModel>(this, _$identity);

@override
Map<String, dynamic> toJson() {
  return _$UserModelToJson(this, );
}

@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is _UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class _$UserModelCopyWith<$Res> implements $UserModelCopyWith<$Res> {
  factory _$UserModelCopyWith(_UserModel value, $Res Function(_UserModel) _then) = __$UserModelCopyWithImpl;
@override @useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class __$UserModelCopyWithImpl<$Res>
    implements _$UserModelCopyWith<$Res> {
  __$UserModelCopyWithImpl(this._self, this._then);

  final _UserModel _self;
  final $Res Function(_UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @pragma('vm:prefer-inline') $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_UserModel(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}


}

// dart format on

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.g.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'user_model.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_UserModel _$UserModelFromJson(Map<String, dynamic> json) => _UserModel(
  id: json['id'] as String,
  email: json['email'] as String,
  fullName: json['fullName'] as String?,
);

Map<String, dynamic> _$UserModelToJson(_UserModel instance) =>
    <String, dynamic>{
      'id': instance.id,
      'email': instance.email,
      'fullName': instance.fullName,
    };

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\repositories\auth_repository.dart =====
import '../entities/user_model.dart';

abstract class AuthRepository {
  Future<UserModel> login({required String email, required String password});
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  });
  Future<void> logout();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\login.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Login {
  final AuthRepository repository;
  Login(this.repository);

  Future<UserModel> call({required String email, required String password}) {
    if (email.trim().isEmpty) {
      throw const ValidationException('Email cannot be empty');
    }

    if (!email.contains('@') || !email.contains('.')) {
      throw const ValidationException('Invalid email format');
    }

    if (password.isEmpty) {
      throw const ValidationException('Password cannot be empty');
    }

    if (password.length < 8) {
      throw const ValidationException('Password must be at least 8 characters');
    }

    return repository.login(email: email, password: password);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\sign_up.dart =====
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/utils/validation_messages.dart';

import '../entities/user_model.dart';
import '../repositories/auth_repository.dart';

class Signup {
  final AuthRepository repository;

  Signup(this.repository);

  Future<UserModel> call({
    required String email,
    required String password,
    required String fullName,
  }) {
    final trimmedEmail = email.trim();
    final trimmedName = fullName.trim();

    _validateFullName(trimmedName);
    _validateEmail(trimmedEmail);
    _validatePassword(password);

    return repository.signup(
      email: trimmedEmail,
      password: password,
      fullName: trimmedName,
    );
  }


  void _validateFullName(String name) {
    if (name.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterFullName,
      );
    }
  }

  void _validateEmail(String email) {
    if (email.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterEmail,
      );
    }

    final emailRegex = RegExp(r'^[^@]+@[^@]+\.[^@]+$');
    if (!emailRegex.hasMatch(email)) {
      throw const ValidationException(
        ValidationMessages.invalidEmail,
      );
    }
  }

  void _validatePassword(String password) {
    if (password.isEmpty) {
      throw const ValidationException(
        ValidationMessages.enterPassword,
      );
    }

    if (password.length < 8) {
      throw const ValidationException(
        ValidationMessages.shortPassword,
      );
    }

    if (!RegExp(r'[A-Za-z]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedLetter,
      );
    }

    if (!RegExp(r'[0-9]').hasMatch(password)) {
      throw const ValidationException(
        ValidationMessages.passwordNeedNumber,
      );
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:logger/logger.dart';

import 'auth_state.dart';
import '../../domain/usecases/login.dart';
import '../../domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';

class AuthCubit extends Cubit<AuthState> {
  final Login _login;
  final Signup _signup;
  final Logger _logger;

  AuthCubit({required Login login, required Signup signup, Logger? logger})
    : _login = login,
      _signup = signup,
      _logger = logger ?? Logger(),
      super(AuthInitial());

  Future<void> login(String email, String password) async {
    if (state is AuthSuccess) {
      emit(AuthFailure('You are already logged in.'));
      return;
    }

    await _runAuthAction(
      actionLabel: 'login',
      action: () => _login(email: email, password: password),
      successMessage: 'Login success',
    );
  }

  Future<void> signup(String fullName, String email, String password) async {
    await _runAuthAction(
      actionLabel: 'signup',
      action: () =>
          _signup(fullName: fullName, email: email, password: password),
      successMessage: 'Signup success',
    );
  }

  Future<void> _runAuthAction({
    required String actionLabel,
    required Future<dynamic> Function() action,
    required String successMessage,
  }) async {
    emit(AuthLoading());

    const maxAttempts = 2;
    var attempt = 0;

    while (true) {
      try {
        final user = await action();
        _logger.i('$successMessage: ${user.email}', error: null);
        emit(AuthSuccess(user));
        return;
      } on NetworkException catch (e) {
        attempt++;
        _logger.w(
          'NetworkException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on TimeoutRequestException catch (e) {
        attempt++;
        _logger.w(
          'TimeoutRequestException on $actionLabel attempt $attempt: ${e.message}',
        );
        if (attempt >= maxAttempts) {
          emit(AuthFailure(e.message));
          return;
        }
      } on AuthException catch (e) {
        _logger.w('AuthException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } on AppException catch (e) {
        _logger.w('AppException on $actionLabel: ${e.message}');
        emit(AuthFailure(e.message));
        return;
      } catch (e, s) {
        _logger.e('Unexpected error on $actionLabel', error: e, stackTrace: s);
        emit(AuthFailure('Unexpected error. Please try again.'));
        return;
      }
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\dashboard_screen.dart =====
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

class DashboardScreen extends StatefulWidget {
  const DashboardScreen({super.key});

  @override
  State<DashboardScreen> createState() => _DashboardScreenState();
}

class _DashboardScreenState extends State<DashboardScreen> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Dashboard'),
      ),
      body: const Center(
        child: Text('Welcome to the Dashboard!'),
      ),
    );
  }
}
\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _formKey = GlobalKey<FormState>();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  void _onLoginPressed(bool isLoading) {
    if (isLoading) return;

    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().login(
          _emailController.text.trim(),
          _passwordController.text,
        );
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final colorScheme = theme.colorScheme;

    final loginImage = Assets.images.loginImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      backgroundColor: colorScheme.background,
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) {
            if (state is AuthFailure) {
              ScaffoldMessenger.of(context)
                ..hideCurrentSnackBar()
                ..showSnackBar(
                  SnackBar(content: Text(state.message)),
                );
              return;
            }

            if (state is AuthSuccess) {
              // ✅ LOGIN THÀNH CÔNG → DASHBOARD (clear stack)
              Navigator.pushNamedAndRemoveUntil(
                context,
                AppRoutes.dashboard,
                (_) => false,
              );
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return SingleChildScrollView(
              padding: const EdgeInsets.symmetric(horizontal: 24),
              child: Form(
                key: _formKey,
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  crossAxisAlignment: CrossAxisAlignment.stretch,
                  children: [
                    const SizedBox(height: 40),
                    Text(
                      'Welcome to Personal\nFinance Tracker',
                      textAlign: TextAlign.center,
                      style: theme.textTheme.headlineSmall?.copyWith(
                        fontWeight: FontWeight.bold,
                        color: colorScheme.onBackground,
                      ),
                    ),
                    const SizedBox(height: 32),
                    Center(child: loginImage),
                    const SizedBox(height: 32),
                    TextFormField(
                      controller: _emailController,
                      keyboardType: TextInputType.emailAddress,
                      validator: AppValidators.email,
                      decoration: InputDecoration(
                        labelText: 'Email',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                      ),
                    ),
                    const SizedBox(height: 16),
                    TextFormField(
                      controller: _passwordController,
                      obscureText: _isPasswordHidden,
                      keyboardType: TextInputType.visiblePassword,
                      validator: AppValidators.password,
                      decoration: InputDecoration(
                        labelText: 'Password',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                        suffixIcon: IconButton(
                          icon: Icon(
                            _isPasswordHidden
                                ? Icons.visibility_off
                                : Icons.visibility,
                          ),
                          onPressed: () {
                            setState(() {
                              _isPasswordHidden = !_isPasswordHidden;
                            });
                          },
                        ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    SizedBox(
                      height: 52,
                      child: ElevatedButton(
                        onPressed: () => _onLoginPressed(isLoading),
                        style: ElevatedButton.styleFrom(
                          backgroundColor: colorScheme.primary,
                          foregroundColor: colorScheme.onPrimary,
                          shape: RoundedRectangleBorder(
                            borderRadius: BorderRadius.circular(12),
                          ),
                        ),
                        child: isLoading
                            ? const SizedBox(
                                width: 22,
                                height: 22,
                                child: CircularProgressIndicator(
                                  strokeWidth: 2,
                                ),
                              )
                            : const Text(
                                'Login',
                                style: TextStyle(
                                  fontSize: 18,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                      ),
                    ),
                    const SizedBox(height: 24),
                    Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          "Don't have an account? ",
                          style: theme.textTheme.bodyMedium?.copyWith(
                            color: colorScheme.onSurface.withOpacity(0.6),
                          ),
                        ),
                        GestureDetector(
                          onTap: () {
                            Navigator.pushNamed(context, AppRoutes.signUp);
                          },
                          child: Text(
                            "Register",
                            style: theme.textTheme.bodyMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                              color: colorScheme.primary,
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),
                  ],
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final _formKey = GlobalKey<FormState>();

  final _fullNameController = TextEditingController();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  final _confirmPasswordController = TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  void _onSignUpPressed(BuildContext context, bool isLoading) {
    if (isLoading) return;
    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().signup(
      _fullNameController.text.trim(),
      _emailController.text.trim(),
      _passwordController.text,
    );
  }

  void _showSnack(String msg) {
    ScaffoldMessenger.of(context)
      ..hideCurrentSnackBar()
      ..showSnackBar(SnackBar(content: Text(msg)));
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;
    final ts = theme.textTheme;

    final signUpImage = Assets.images.signUpImg.image(
      width: 240,
      height: 120,
      fit: BoxFit.contain,
    );

    return Scaffold(
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listener: (context, state) async {
            if (state is AuthFailure) {
              _showSnack(state.message);
            }
            if (state is AuthSuccess) {
              _showSnack('Sign up successful. Please login.');
              await Future.delayed(const Duration(milliseconds: 800));
              if (!mounted) return;
              Navigator.pushReplacementNamed(context, AppRoutes.login);
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return Stack(
              children: [
                Center(
                  child: SingleChildScrollView(
                    padding: const EdgeInsets.symmetric(
                      horizontal: AppSpacing.lg,
                    ),
                    child: Form(
                      key: _formKey,
                      child: Column(
                        children: [
                          const SizedBox(height: AppSpacing.lg),
                          Text(
                            'Sign Up',
                            style: ts.headlineMedium?.copyWith(
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          signUpImage,
                          const SizedBox(height: AppSpacing.xl),
                          AppValidatedTextField(
                            controller: _fullNameController,
                            label: 'Full Name',
                            keyboardType: TextInputType.name,
                            validator: (value) =>
                                value == null || value.trim().isEmpty
                                ? 'Please enter your full name'
                                : null,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _emailController,
                            label: 'Email',
                            keyboardType: TextInputType.emailAddress,
                            validator: AppValidators.email,
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _passwordController,
                            label: 'Password',
                            obscureText: !_showPassword,
                            validator: AppValidators.password,
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showPassword = !_showPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          AppValidatedTextField(
                            controller: _confirmPasswordController,
                            label: 'Confirm password',
                            obscureText: !_showConfirmPassword,
                            validator: (value) => AppValidators.confirmPassword(
                              value,
                              _passwordController.text,
                            ),
                            keyboardType: TextInputType.visiblePassword,
                            suffixIcon: IconButton(
                              icon: Icon(
                                _showConfirmPassword
                                    ? Icons.visibility_off_outlined
                                    : Icons.visibility_outlined,
                                color: cs.onSurfaceVariant,
                              ),
                              onPressed: () => setState(
                                () => _showConfirmPassword =
                                    !_showConfirmPassword,
                              ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.lg),
                          SizedBox(
                            width: double.infinity,
                            height: AppSpacing.xxl,
                            child: ElevatedButton(
                              style: ElevatedButton.styleFrom(
                                backgroundColor: cs.primary,
                                foregroundColor: cs.onPrimary,
                                shape: RoundedRectangleBorder(
                                  borderRadius: BorderRadius.circular(12),
                                ),
                              ),
                              onPressed: () =>
                                  _onSignUpPressed(context, isLoading),
                              child: isLoading
                                  ? const SizedBox(
                                      width: 20,
                                      height: 20,
                                      child: CircularProgressIndicator(
                                        strokeWidth: 2,
                                        valueColor: AlwaysStoppedAnimation(
                                          Colors.white,
                                        ),
                                      ),
                                    )
                                  : Text(
                                      'Sign Up',
                                      style: ts.titleMedium?.copyWith(
                                        fontWeight: FontWeight.w600,
                                      ),
                                    ),
                            ),
                          ),
                          const SizedBox(height: AppSpacing.md),
                          Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Text(
                                "Already have an account?",
                                style: ts.bodyMedium,
                              ),
                              const SizedBox(width: AppSpacing.xs),
                              GestureDetector(
                                onTap: () => Navigator.pushNamed(
                                  context,
                                  AppRoutes.login,
                                ),
                                child: Text(
                                  "Login",
                                  style: ts.bodyMedium?.copyWith(
                                    color: cs.primary,
                                    fontWeight: FontWeight.w600,
                                  ),
                                ),
                              ),
                            ],
                          ),
                          const SizedBox(height: AppSpacing.lg),
                        ],
                      ),
                    ),
                  ),
                ),
                if (isLoading)
                  Positioned.fill(
                    child: AbsorbPointer(
                      absorbing: true,
                      child: Container(
                        color: Colors.black.withOpacity(0.2),
                        alignment: Alignment.center,
                        child: const SizedBox(
                          width: 36,
                          height: 36,
                          child: CircularProgressIndicator(strokeWidth: 3),
                        ),
                      ),
                    ),
                  ),
              ],
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: const ColorFilter.mode(Colors.green, BlendMode.srcIn),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,

                const SizedBox(height: 24),

                const Text(
                  'Welcome',
                  style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold),
                ),

                const SizedBox(height: 12),

                const Text(
                  'Take control of your finances with us.',
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 16, color: Colors.black54),
                ),

                const SizedBox(height: 32),
                SizedBox(
                  width: double.infinity,
                  height: 52,
                  child: ElevatedButton(
                    onPressed: () {
                      Navigator.pushNamed(context, AppRoutes.login);
                    },
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.green,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                    child: const Text(
                      'Get Started',
                      style: TextStyle(
                        fontSize: 18,
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const String aEnv = '.env';
  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();

  /// List of all assets
  static List<String> get values => [aEnv];
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_validated_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart'; 

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_validated_text_field.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:flutter/material.dart';

class AppValidatedTextField extends StatelessWidget {
  final TextEditingController controller;
  final String label;
  final String? hintText;
  final String? Function(String?)? validator;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextInputType keyboardType;
  final TextInputAction? textInputAction;
  final ValueChanged<String>? onChanged;
  final bool enabled;

  const AppValidatedTextField({
    super.key,
    required this.controller,
    required this.label,
    this.hintText,
    this.validator,
    this.obscureText = false,
    this.suffixIcon,
    this.keyboardType = TextInputType.text,
    this.textInputAction,
    this.onChanged,
    this.enabled = true,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;

    OutlineInputBorder border(Color color) => OutlineInputBorder(
      borderRadius: AppRadius.medium,
      borderSide: BorderSide(color: color, width: 1),
    );

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          label,
          style: theme.textTheme.bodyMedium?.copyWith(
            fontWeight: FontWeight.w500,
            color: cs.onBackground,
          ),
        ),
        const SizedBox(height: 8),
        TextFormField(
          controller: controller,
          obscureText: obscureText,
          validator: validator,
          autovalidateMode: AutovalidateMode.onUserInteraction,
          keyboardType: keyboardType,
          textInputAction: textInputAction,
          onChanged: onChanged,
          enabled: enabled,
          decoration: InputDecoration(
            hintText: hintText ?? label,
            hintStyle: theme.textTheme.bodyMedium?.copyWith(
              color: cs.onSurfaceVariant,
            ),
            contentPadding: const EdgeInsets.all(16),
            suffixIcon: suffixIcon,
            border: border(cs.outline),
            enabledBorder: border(cs.outline),
            focusedBorder: border(cs.primary),
            errorBorder: border(cs.error),
            focusedErrorBorder: border(cs.error),
            disabledBorder: border(cs.outlineVariant),
          ),
        ),
      ],
    );
  }
}

\n

\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'dart:io' show Platform;
import 'package:flutter/foundation.dart' show kIsWeb;
import 'package:window_size/window_size.dart';
import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  String? initError;

  try {
    await dotenv.load(fileName: '.env');

    final supabaseUrl = dotenv.env['SUPABASE_URL']?.trim();
    final supabaseAnonKey = dotenv.env['SUPABASE_ANON_KEY']?.trim();

    if (supabaseUrl == null ||
        supabaseUrl.isEmpty ||
        supabaseAnonKey == null ||
        supabaseAnonKey.isEmpty) {
      throw Exception('Missing SUPABASE_URL or SUPABASE_ANON_KEY in .env');
    }

    setupDI(
      supabaseUrl: supabaseUrl,
      supabaseAnonKey: supabaseAnonKey,
    );
  } catch (e, st) {
    debugPrint('❌ Init error: $e');
    debugPrintStack(stackTrace: st);
    initError = e.toString();
  }
  setupWindow();
  runApp(initError != null ? ErrorApp(errorMessage: initError) : const AppRoot());
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

const double windowWidth = 500;
const double windowHeight = 854;

void setupWindow() {
  if (!kIsWeb &&
      (Platform.isWindows || Platform.isLinux || Platform.isMacOS)) {
    WidgetsFlutterBinding.ensureInitialized();
    setWindowTitle('Finance Tracker');
    setWindowMinSize(const Size(windowWidth, windowHeight));
    setWindowMaxSize(const Size(windowWidth, windowHeight));
    getCurrentScreen().then((screen) {
      setWindowFrame(
        Rect.fromCenter(
          center: screen!.frame.center,
          width: windowWidth,
          height: windowHeight,
        ),
      );
    });
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      builder: (context, child) {
        final mq = MediaQuery.of(context);
        return MediaQuery(
          data: mq.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },
      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: AppTheme.light,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(AppSpacing.lg),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: AppSpacing.md),
                Text(
                  'App initialization failed',
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.titleMedium,
                ),
                const SizedBox(height: AppSpacing.sm),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.bodyMedium,
                ),
                const SizedBox(height: AppSpacing.lg),
                Text(
                  'Please check your .env and Supabase config.',
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.bodySmall,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\constants\strings.dart =====
class AppStrings {
  static const appName = 'Personal Finance Tracker';

  static const welcome = 'Welcome';
  static const welcomeTitle = 'Welcome to Personal\nFinance Tracker';
  static const welcomeSubtitle = 'Take control of your finances with us.';
  static const getStarted = 'Get Started';

  static const login = 'Login';
  static const register = 'Register';
  static const signUpTitle = 'Sign Up';

  static const signUpSuccess = 'Sign up successful';
  static const signUpSuccessVerifyEmail =
      'Sign up successful. Please verify your email before logging in.';

  static const alreadyHaveAccount = 'Already have an account?';
  static const dontHaveAccount = "Don't have an account?";

  static const fullNameLabel = 'Full Name';
  static const emailLabel = 'Email';
  static const passwordLabel = 'Password';
  static const confirmPasswordLabel = 'Confirm password';

  static const fullNameRequired = 'Please enter your full name';
  static const emailRequired = 'Please enter your email';
  static const invalidEmailFormat = 'Email format is invalid';

  static const passwordRequired = 'Please enter your password';
  static const passwordMinLength8 = 'Password must be at least 8 characters';

  static const confirmPasswordRequired = 'Please confirm your password';
  static const passwordNotMatch = 'Password does not match';

  static const loginFailed = 'Login failed';
  static const signupFailed = 'Signup failed';

  static const genericError = 'Something went wrong';
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import '../network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
    SessionLocalDataSourcePrefs.new,
  );

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(
    () => DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () =>
          getIt<SessionLocalDataSource>().getAccessToken(),
    ).dio,
  );

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(
    () => Login(getIt<AuthRepository>()),
  );
  getIt.registerLazySingleton<Signup>(
    () => Signup(getIt<AuthRepository>()),
  );

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(
      login: getIt<Login>(),
      signup: getIt<Signup>(),
    ),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
class AppException implements Exception {
  final String message;
  const AppException(this.message);
  @override
  String toString() => message;
}

class NetworkException extends AppException {
  const NetworkException([super.message = 'Network error. Check connection']);
}

class TimeoutRequestException extends AppException {
  const TimeoutRequestException([super.message = 'Request timed out']);
}

class AuthException extends AppException {
  const AuthException([super.message = 'Authentication failed']);
}

class ValidationException extends AppException {
  const ValidationException([super.message = 'Invalid input data']);
}

class ServerException extends AppException {
  const ServerException([super.message = 'Server error occurred']);
}
class CacheException extends AppException {
  const CacheException([super.message = 'Cache error occurred']);
}
\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'package:dio/dio.dart';
import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic e) {
    if (e is AppException) return e;
    if (e is SocketException) return const NetworkException('No internet connection');
    if (e is TimeoutException) return const TimeoutRequestException();
    if (e is DioException) return _dio(e);
    return AppException(e.toString());
  }

  static AppException _dio(DioException e) {
    final s = e.response?.statusCode;
    final d = e.response?.data;
    final m = _msg(d) ?? e.message ?? 'Request failed';

    if (s == 400 || s == 401 || s == 403) return AuthException(m);
    if (s != null && s >= 500) return ServerException(m);
    return ServerException(m);
  }

  static String? _msg(dynamic d) {
    if (d is String && d.trim().isNotEmpty) return d.trim();
    if (d is Map<String, dynamic>) {
      for (final k in ['msg', 'error_description', 'message', 'error', 'error_code', 'code']) {
        final v = d[k]?.toString().trim();
        if (v != null && v.isNotEmpty) return v;
      }
    }
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

typedef TokenProvider = Future<String?> Function();

class DioClient {
  final Dio dio;

  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            connectTimeout: const Duration(seconds: 15),
            receiveTimeout: const Duration(seconds: 15),
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          final token = await tokenProvider();
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';
          handler.next(options);
        },
        onError: (e, handler) {
          handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
import 'package:shared_preferences/shared_preferences.dart';

abstract class SessionLocalDataSource {
  Future<void> saveAccessToken(String token);
  Future<String?> getAccessToken();
  Future<void> clear();
}

class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  static const _kAccessToken = 'access_token';

  Future<SharedPreferences> get _prefs =>
      SharedPreferences.getInstance();

  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await _prefs;
    await prefs.setString(_kAccessToken, token);
  }

  @override
  Future<String?> getAccessToken() async {
    final prefs = await _prefs;
    return prefs.getString(_kAccessToken);
  }

  @override
  Future<void> clear() async {
    final prefs = await _prefs;
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}


\n
===== C:\Works\finance_tracking_app\lib\main.dart =====
import 'dart:async';
import 'dart:io' show Platform;

import 'package:flutter/foundation.dart' show kIsWeb;
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:window_size/window_size.dart';

import 'package:finance_tracker_app/core/di/di.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/shared/widgets/error_boundary.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

const double windowWidth = 500;
const double windowHeight = 854;

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();

  await runZonedGuarded(() async {
    final initResult = await _initApp();

    if (initResult == null) {
      _setupWindow();
      runApp(
        ErrorBoundary(
          reporter: _reportCrash,
          child: const AppRoot(),
        ),
      );
    } else {
      runApp(
        ErrorBoundary(
          reporter: _reportCrash,
          child: ErrorApp(errorMessage: initResult),
        ),
      );
    }
  }, (error, stack) async {
    await _reportCrash(error, stack);
  });
}

Future<String?> _initApp() async {
  try {
    await dotenv.load(fileName: '.env');

    final supabaseUrl = _requireEnv('SUPABASE_URL');
    final supabaseAnonKey = _requireEnv('SUPABASE_ANON_KEY');

    _validateSupabaseUrl(supabaseUrl);
    _validateAnonKey(supabaseAnonKey);

    setupDI(
      supabaseUrl: supabaseUrl,
      supabaseAnonKey: supabaseAnonKey,
    );

    return null;
  } catch (e, st) {
    debugPrintStack(stackTrace: st);
    return e.toString();
  }
}

String _requireEnv(String key) {
  final v = dotenv.env[key]?.trim();
  if (v == null || v.isEmpty) {
    throw Exception('Missing $key in .env');
  }
  return v;
}

void _validateSupabaseUrl(String url) {
  final uri = Uri.tryParse(url);
  if (uri == null || !uri.isAbsolute || uri.scheme != 'https') {
    throw Exception('Invalid SUPABASE_URL');
  }
}

void _validateAnonKey(String anonKey) {
  final parts = anonKey.split('.');
  final looksLikeJwt = parts.length == 3 && anonKey.startsWith('eyJ');
  if (!looksLikeJwt && anonKey.length < 40) {
    throw Exception('Invalid SUPABASE_ANON_KEY');
  }
}

void _setupWindow() {
  if (!kIsWeb && (Platform.isWindows || Platform.isLinux || Platform.isMacOS)) {
    setWindowTitle('Finance Tracker');
    setWindowMinSize(const Size(windowWidth, windowHeight));
    setWindowMaxSize(const Size(windowWidth, windowHeight));

    getCurrentScreen().then((screen) {
      if (screen == null) return;
      setWindowFrame(
        Rect.fromCenter(
          center: screen.frame.center,
          width: windowWidth,
          height: windowHeight,
        ),
      );
    });
  }
}

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider<AuthCubit>(create: (_) => getIt<AuthCubit>()),
      ],
      child: const MyApp(),
    );
  }
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      builder: (context, child) {
        final mq = MediaQuery.of(context);
        return MediaQuery(
          data: mq.copyWith(textScaler: const TextScaler.linear(1.0)),
          child: child ?? const SizedBox.shrink(),
        );
      },
      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      themeMode: ThemeMode.light,
      navigatorKey: AppRouter.navigatorKey,
      initialRoute: AppRoutes.welcome,
      onGenerateRoute: AppRouter.onGenerateRoute,
    );
  }
}

class ErrorApp extends StatelessWidget {
  final String errorMessage;

  const ErrorApp({super.key, required this.errorMessage});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: AppTheme.light,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(AppSpacing.lg),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                const Icon(Icons.error_outline, size: 64),
                const SizedBox(height: AppSpacing.md),
                Text(
                  'App initialization failed',
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.titleMedium,
                ),
                const SizedBox(height: AppSpacing.sm),
                Text(
                  errorMessage,
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.bodyMedium,
                ),
                const SizedBox(height: AppSpacing.lg),
                Text(
                  'Please check your .env and Supabase config.',
                  textAlign: TextAlign.center,
                  style: Theme.of(context).textTheme.bodySmall,
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

Future<void> _reportCrash(
  Object error,
  StackTrace stack, {
  FlutterErrorDetails? details,
}) async {
  debugPrint('💥 Unhandled error: $error');
  debugPrintStack(stackTrace: stack);
}

\n
===== C:\Works\finance_tracking_app\lib\core\constants\strings.dart =====
class AppStrings {
  static const appName = 'Personal Finance Tracker';

  static const welcome = 'Welcome';
  static const welcomeTitle = 'Welcome to Personal\nFinance Tracker';
  static const welcomeSubtitle = 'Take control of your finances with us.';
  static const getStarted = 'Get Started';

  static const login = 'Login';
  static const register = 'Register';
  static const signUpTitle = 'Sign Up';

  static const signUpSuccess = 'Sign up successful';
  static const signUpSuccessVerifyEmail =
      'Sign up successful. Please verify your email before logging in.';

  static const alreadyHaveAccount = 'Already have an account?';
  static const dontHaveAccount = "Don't have an account?";

  static const fullNameLabel = 'Full Name';
  static const emailLabel = 'Email';
  static const passwordLabel = 'Password';
  static const confirmPasswordLabel = 'Confirm password';

  static const fullNameRequired = 'Please enter your full name';
  static const emailRequired = 'Please enter your email';
  static const invalidEmailFormat = 'Email format is invalid';

  static const passwordRequired = 'Please enter your password';
  static const passwordMinLength8 = 'Password must be at least 8 characters';

  static const confirmPasswordRequired = 'Please confirm your password';
  static const passwordNotMatch = 'Password does not match';

  static const loginFailed = 'Login failed';
  static const signupFailed = 'Signup failed';

  static const genericError = 'Something went wrong';
}

\n
===== C:\Works\finance_tracking_app\lib\core\di\di.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/network/session_local_data_source.dart';
import 'package:get_it/get_it.dart';

import '../network/dio_client.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/repositories/auth_repository_impl.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/login.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';

final getIt = GetIt.instance;

void setupDI({
  required String supabaseUrl,
  required String supabaseAnonKey,
}) {
  // =======================
  // Session storage (SharedPreferences for ALL platforms)
  // =======================
  getIt.registerLazySingleton<SessionLocalDataSource>(
  () => SessionLocalDataSourcePrefs(),
);

  // =======================
  // Dio
  // =======================
  getIt.registerLazySingleton<Dio>(
    () => DioClient(
      baseUrl: supabaseUrl,
      anonKey: supabaseAnonKey,
      tokenProvider: () =>
          getIt<SessionLocalDataSource>().getAccessToken(),
    ).dio,
  );

  // =======================
  // Data Sources
  // =======================
  getIt.registerLazySingleton<AuthRemoteDataSource>(
    () => AuthRemoteDataSourceImpl(getIt<Dio>()),
  );

  // =======================
  // Repositories
  // =======================
  getIt.registerLazySingleton<AuthRepository>(
    () => AuthRepositoryImpl(
      remote: getIt<AuthRemoteDataSource>(),
      sessionLocal: getIt<SessionLocalDataSource>(),
    ),
  );

  // =======================
  // Usecases
  // =======================
  getIt.registerLazySingleton<Login>(
    () => Login(getIt<AuthRepository>()),
  );
  getIt.registerLazySingleton<Signup>(
    () => Signup(getIt<AuthRepository>()),
  );

  // =======================
  // Cubits
  // =======================
  getIt.registerFactory<AuthCubit>(
    () => AuthCubit(
      login: getIt<Login>(),
      signup: getIt<Signup>(),
    ),
  );
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\dio_exception_mapper.dart =====
import 'package:dio/dio.dart';

import 'exceptions.dart';

class DioExceptionMapper {
  static AppException map(DioException e) {
    final s = e.response?.statusCode;
    final d = e.response?.data;
    final m = _msg(d) ?? e.message ?? 'Request failed';

    if (s == 401 || s == 403) return AuthException(m);
    if (s == 400 ) return ValidationException(m);
    if (s != null && s >= 500) return ServerException(m);
    return ServerException(m);
  }

  static String? _msg(dynamic d) {
    if (d is String && d.trim().isNotEmpty) return d.trim();

    if (d is Map) {
      for (final k in ['msg', 'error_description', 'message', 'error', 'error_code', 'code']) {
        final v = d[k]?.toString().trim();
        if (v != null && v.isNotEmpty) return v;
      }
    }

    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\error\exceptions.dart =====
class AppException implements Exception {
  final String message;
  const AppException(this.message);
  @override
  String toString() => message;
}

class NetworkException extends AppException {
  const NetworkException([super.message = 'Network error. Check connection']);
}

class TimeoutRequestException extends AppException {
  const TimeoutRequestException([super.message = 'Request timed out']);
}

class AuthException extends AppException {
  const AuthException([super.message = 'Authentication failed']);
}

class ValidationException extends AppException {
  const ValidationException([super.message = 'Invalid input data']);
}

class ServerException extends AppException {
  const ServerException([super.message = 'Server error occurred']);
}
class CacheException extends AppException {
  const CacheException([super.message = 'Cache error occurred']);
}
\n
===== C:\Works\finance_tracking_app\lib\core\error\exception_mapper.dart =====
import 'dart:async';
import 'dart:io';

import 'exceptions.dart';

class ExceptionMapper {
  static AppException map(dynamic e) {
    if (e is AppException) return e;
    if (e is SocketException) return const NetworkException('No internet connection');
    if (e is TimeoutException) return const TimeoutRequestException();
    return AppException(e.toString());
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\dio_client.dart =====
import 'package:dio/dio.dart';

/// Provides the current access token for authenticated requests.
///
/// Returns:
/// - A valid access token if the user is logged in
/// - `null` if no token is available
typedef TokenProvider = Future<String?> Function();

/// Centralized HTTP client wrapper around Dio.
///
/// Responsibilities:
/// - Configure base URL and default headers
/// - Automatically attach authentication headers
/// - Apply global timeouts
///
/// This client is designed to work with Supabase APIs.
class DioClient {
  /// The underlying Dio instance used for HTTP requests.
  final Dio dio;

  /// Creates a configured [DioClient].
  ///
  /// [baseUrl] - Supabase project base URL  
  /// [anonKey] - Supabase anonymous public API key  
  /// [tokenProvider] - Async function that returns the current access token
  ///
  /// If [tokenProvider] returns `null`, the client falls back to using
  /// the anonymous key for unauthenticated requests.
  DioClient({
    required String baseUrl,
    required String anonKey,
    required TokenProvider tokenProvider,
  }) : dio = Dio(
          BaseOptions(
            baseUrl: baseUrl,
            /// Maximum duration to establish a connection
            connectTimeout: const Duration(seconds: 15),

            /// Maximum duration to wait for a response
            receiveTimeout: const Duration(seconds: 15),

            /// Default headers applied to all requests
            headers: {
              'apikey': anonKey,
              'Content-Type': 'application/json',
              'Accept': 'application/json',
            },
          ),
        ) {
    /// Interceptor responsible for injecting authentication headers
    /// into every outgoing request.
    dio.interceptors.add(
      InterceptorsWrapper(
        /// Attaches `Authorization` header before the request is sent.
        ///
        /// - Uses `Bearer <access_token>` when available
        /// - Falls back to `Bearer <anonKey>` for public endpoints
        onRequest: (options, handler) async {
          final token = await tokenProvider();
          options.headers['Authorization'] = 'Bearer ${token ?? anonKey}';
          handler.next(options);
        },

        /// Passes through errors without modification.
        ///
        /// Error mapping and handling should be done at a higher layer
        /// (e.g. data source or repository).
        onError: (e, handler) {
          handler.next(e);
        },
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\session_local_data_source.dart =====
import 'package:shared_preferences/shared_preferences.dart';

/// Abstraction for local session storage.
///
/// Responsible for persisting and retrieving authentication
/// session data (e.g. access token) on the device.
abstract class SessionLocalDataSource {
  /// Saves the access token locally.
  ///
  /// This token is typically used for authenticating
  /// subsequent API requests.
  Future<void> saveAccessToken(String token);

  /// Retrieves the stored access token.
  ///
  /// Returns `null` if no token is stored.
  Future<String?> getAccessToken();

  /// Clears all stored session data.
  ///
  /// Should be called on logout or when the session becomes invalid.
  Future<void> clear();
}

/// SharedPreferences-based implementation of [SessionLocalDataSource].
///
/// ⚠️ Security note:
/// - Tokens are stored in plain text.
/// - Suitable for MVP/demo or low-risk environments.
/// - Not recommended for high-security production apps.
class SessionLocalDataSourcePrefs implements SessionLocalDataSource {
  /// Key used to store the access token in SharedPreferences.
  static const _kAccessToken = 'access_token';

  /// Lazily retrieves the SharedPreferences instance.
  Future<SharedPreferences> get _prefs =>
      SharedPreferences.getInstance();

  /// Stores the access token in SharedPreferences.
  @override
  Future<void> saveAccessToken(String token) async {
    final prefs = await _prefs;
    await prefs.setString(_kAccessToken, token);
  }

  /// Reads the access token from SharedPreferences.
  ///
  /// Returns `null` if the token does not exist.
  @override
  Future<String?> getAccessToken() async {
    final prefs = await _prefs;
    return prefs.getString(_kAccessToken);
  }

  /// Removes the access token from local storage.
  @override
  Future<void> clear() async {
    final prefs = await _prefs;
    await prefs.remove(_kAccessToken);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\network\supabase_endpoints.dart =====
/// Centralized Supabase REST endpoints
/// Used by Dio (Auth / PostgREST / Storage)
///
/// Base URL (example):
///   https://xyzcompany.supabase.co
///
/// Full request example:
///   POST {baseUrl}/auth/v1/token?grant_type=password
///
class SupabaseEndpoints {
  SupabaseEndpoints._();

  // =======================
  // Auth (GoTrue)
  // =======================

  /// POST /auth/v1/signup
  static const String authSignUp = '/auth/v1/signup';

  /// POST /auth/v1/token?grant_type=password
  static const String authToken = '/auth/v1/token';

  /// GET /auth/v1/user
  static const String authUser = '/auth/v1/user';

  /// POST /auth/v1/logout
  /// (Optional — usually not required for mobile apps)
  static const String authLogout = '/auth/v1/logout';

  // =======================
  // Database (PostgREST)
  // =======================

  /// Base path for PostgREST
  static const String rest = '/rest/v1';

  /// Example usage:
  ///   GET /rest/v1/profiles?select=*
  ///   POST /rest/v1/profiles
  static String table(String tableName) => '$rest/$tableName';

  // =======================
  // Storage
  // =======================

  /// Base path for Storage API
  static const String storage = '/storage/v1';

  /// List objects in bucket
  /// GET /storage/v1/object/list/{bucket}
  static String storageList(String bucket) =>
      '$storage/object/list/$bucket';

  /// Upload object
  /// POST /storage/v1/object/{bucket}/{path}
  static String storageUpload(String bucket, String path) =>
      '$storage/object/$bucket/$path';

  /// Download object (public or authorized)
  /// GET /storage/v1/object/public/{bucket}/{path}
  static String storagePublic(String bucket, String path) =>
      '$storage/object/public/$bucket/$path';
}

\n
===== C:\Works\finance_tracking_app\lib\core\router\app_router.dart =====
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/dashboard_screen.dart';
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/feature/users/auth/presentation/pages/welcome_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/login_screen.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/pages/sign_up_screen.dart';

class AppRoutes {
  static const String welcome = '/';
  static const String login = '/login';
  static const String signUp = '/sign-up';

  // ✅ New
  static const String dashboard = '/dashboard';
}

class AppRouter {
  static final GlobalKey<NavigatorState> navigatorKey =
      GlobalKey<NavigatorState>();

  static Route<dynamic> onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case AppRoutes.welcome:
        return _material(const WelcomeScreen(), settings);

      case AppRoutes.login:
        return _material(const LoginScreen(), settings);

      case AppRoutes.signUp:
        return _material(const SignUpScreen(), settings);

      // ✅ New
      case AppRoutes.dashboard:
        return _material(const DashboardScreen(), settings);

      default:
        return _unknownRoute(settings);
    }
  }

  static MaterialPageRoute _material(Widget page, RouteSettings settings) {
    return MaterialPageRoute(
      builder: (_) => page,
      settings: settings,
    );
  }

  static Route<dynamic> _unknownRoute(RouteSettings settings) {
    return MaterialPageRoute(
      settings: settings,
      builder: (_) => const Scaffold(
        body: Center(child: Text('Route not found')),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\theme\app_theme.dart =====
import 'package:flutter/material.dart';

class AppSpacing {
  static const double xs = 4;
  static const double sm = 8;
  static const double md = 16;
  static const double lg = 24;
  static const double xl = 32;
  static const double xxl = 40;
}

class AppColors {
  static const Color primary = Color(0xFF1A73E8);
  static const Color primaryLight = Color(0xFFEEF5FF);
  static const Color primaryDark = Color(0xFF0F4FB8);

  static const Color secondary = Color(0xFFFF8A00);
  static const Color secondaryLight = Color(0xFFFFF3E6);
  static const Color secondaryDark = Color(0xFFCC6F00);

  static const Color neutral900 = Color(0xFF212121);
  static const Color neutral800 = Color(0xFF303030);
  static const Color neutral700 = Color(0xFF424242);
  static const Color neutral600 = Color(0xFF616161);
  static const Color neutral500 = Color(0xFF757575);
  static const Color neutral400 = Color(0xFF9E9E9E);
  static const Color neutral300 = Color(0xFFBDBDBD);
  static const Color neutral200 = Color(0xFFE0E0E0);
  static const Color neutral100 = Color(0xFFEFEFEF);
  static const Color neutral50 = Color(0xFFF7F7F7);

  static const Color white = Colors.white;

  static const Color success = Color(0xFF4CAF50);
  static const Color error = Color(0xFFE53935);
  static const Color warning = Color(0xFFFFC107);
  static const Color info = Color(0xFF0288D1);
}

class AppTextStyles {
  static const String _font = 'Roboto';

  static TextStyle get display => const TextStyle(
        fontFamily: _font,
        fontSize: 34,
        fontWeight: FontWeight.w700,
        height: 1.2,
        color: AppColors.neutral900,
      );

  static TextStyle get headline => const TextStyle(
        fontFamily: _font,
        fontSize: 24,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get title => const TextStyle(
        fontFamily: _font,
        fontSize: 20,
        fontWeight: FontWeight.w600,
        height: 1.3,
        color: AppColors.neutral900,
      );

  static TextStyle get bodyLg => const TextStyle(
        fontFamily: _font,
        fontSize: 16,
        fontWeight: FontWeight.w500,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get body => const TextStyle(
        fontFamily: _font,
        fontSize: 14,
        fontWeight: FontWeight.w400,
        height: 1.4,
        color: AppColors.neutral900,
      );

  static TextStyle get caption => const TextStyle(
        fontFamily: _font,
        fontSize: 12,
        fontWeight: FontWeight.w400,
        height: 1.3,
        color: AppColors.neutral600,
      );
}

class AppRadius {
  static const BorderRadius small = BorderRadius.all(Radius.circular(8));
  static const BorderRadius medium = BorderRadius.all(Radius.circular(12));
  static const BorderRadius large = BorderRadius.all(Radius.circular(20));
  static const BorderRadius pill = BorderRadius.all(Radius.circular(100));
}

class AppShadows {
  static List<BoxShadow> level1 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.08),
      blurRadius: 4,
      offset: const Offset(0, 2),
    ),
  ];

  static List<BoxShadow> level2 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.12),
      blurRadius: 12,
      offset: const Offset(0, 4),
    ),
  ];

  static List<BoxShadow> level3 = [
    BoxShadow(
      color: Colors.black.withOpacity(0.16),
      blurRadius: 20,
      offset: const Offset(0, 8),
    ),
  ];
}

class AppTheme {
  static ThemeData get light {
    final base = ThemeData.light(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: AppColors.white,
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: AppColors.white,
        background: AppColors.white,
        outline: AppColors.neutral300,
        outlineVariant: AppColors.neutral200,
        onSurfaceVariant: AppColors.neutral500,
      ),
      textTheme: base.textTheme.copyWith(
        displayLarge: AppTextStyles.display,
        headlineMedium: AppTextStyles.headline,
        titleMedium: AppTextStyles.title,
        bodyLarge: AppTextStyles.bodyLg,
        bodyMedium: AppTextStyles.body,
        bodySmall: AppTextStyles.caption,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: AppColors.white,
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral900,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral900),
      ),
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          backgroundColor: AppColors.primary,
          foregroundColor: AppColors.white,
          padding: const EdgeInsets.symmetric(vertical: 14, horizontal: 20),
          shape: RoundedRectangleBorder(
            borderRadius: AppRadius.medium,
          ),
          textStyle: const TextStyle(
            fontFamily: 'Roboto',
            fontSize: 14,
            fontWeight: FontWeight.w600,
          ),
        ),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: AppColors.neutral50,
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral200),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral200),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        errorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error),
        ),
        focusedErrorBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.error, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
      cardTheme: CardThemeData(
        color: AppColors.white,
        elevation: 0,
        margin: EdgeInsets.zero,
        shape: RoundedRectangleBorder(
          borderRadius: AppRadius.large,
          side: const BorderSide(color: AppColors.neutral200),
        ),
        shadowColor: Colors.black.withOpacity(0.12),
      ),
    );
  }

  static ThemeData get dark {
    final base = ThemeData.dark(useMaterial3: false);

    return base.copyWith(
      scaffoldBackgroundColor: const Color(0xFF121212),
      primaryColor: AppColors.primary,
      colorScheme: base.colorScheme.copyWith(
        primary: AppColors.primary,
        secondary: AppColors.secondary,
        error: AppColors.error,
        surface: const Color(0xFF1D1D1D),
        background: const Color(0xFF121212),
        outline: AppColors.neutral600,
        outlineVariant: AppColors.neutral700,
        onSurfaceVariant: AppColors.neutral400,
      ),
      textTheme: base.textTheme.apply(
        fontFamily: 'Roboto',
        bodyColor: AppColors.neutral100,
        displayColor: AppColors.neutral100,
      ),
      appBarTheme: const AppBarTheme(
        backgroundColor: Color(0xFF121212),
        elevation: 0,
        centerTitle: true,
        titleTextStyle: TextStyle(
          fontFamily: 'Roboto',
          fontSize: 20,
          fontWeight: FontWeight.w600,
          color: AppColors.neutral100,
        ),
        iconTheme: IconThemeData(color: AppColors.neutral100),
      ),
      inputDecorationTheme: InputDecorationTheme(
        filled: true,
        fillColor: const Color(0xFF1D1D1D),
        contentPadding: const EdgeInsets.all(16),
        border: OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: const BorderSide(color: AppColors.neutral600),
        ),
        enabledBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.neutral600),
        ),
        focusedBorder: const OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: AppColors.primary, width: 1.5),
        ),
        hintStyle: AppTextStyles.body.copyWith(color: AppColors.neutral400),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\app_validators.dart =====
import 'package:email_validator/email_validator.dart';
import 'package:finance_tracker_app/core/constants/strings.dart';

class AppValidators {
  static String? email(String? value) {
    final v = value?.trim();

    if (v == null || v.isEmpty) {
      return AppStrings.emailRequired;
    }

    if (!EmailValidator.validate(v)) {
      return AppStrings.invalidEmailFormat;
    }

    return null;
  }

  static String? password(String? value) {
    if (value == null || value.isEmpty) {
      return AppStrings.passwordRequired;
    }

    if (value.length < 8) {
      return AppStrings.passwordMinLength8;
    }

    return null;
  }

  static String? confirmPassword(String? value, String password) {
    if (value == null || value.isEmpty) {
      return AppStrings.confirmPasswordRequired;
    }

    if (value != password) {
      return AppStrings.passwordNotMatch;
    }

    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\core\utils\safe_async.dart =====
import 'package:flutter/material.dart';

typedef ErrorHandler = void Function(Object error, StackTrace stack);

Future<T?> safeAsync<T>(
  BuildContext context,
  Future<T> Function() task, {
  ErrorHandler? onError,
  String? userMessage,
}) async {
  try {
    return await task();
  } catch (e, st) {
    onError?.call(e, st);

    if (context.mounted) {
      final msg = userMessage ?? 'Something went wrong. Please try again.';
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text(msg)),
      );
    }
    return null;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\dashboard\data\models\dashboard_remote_data_source.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/error/exception_mapper.dart';

abstract class DashboardRemoteDataSource {
  Future<List<dynamic>> fetchMonthTotals(DateTime month);
  Future<List<Map<String, dynamic>>> fetchRecentTransactions();
}

class DashboardRemoteDataSourceImpl implements DashboardRemoteDataSource {
  final Dio dio;

  DashboardRemoteDataSourceImpl(this.dio);

  @override
  Future<List<dynamic>> fetchMonthTotals(DateTime month) async {
    try {
      final monthStart =
          DateTime(month.year, month.month, 1).toIso8601String().split('T').first;

      final res = await dio.get(
        '/rest/v1/v_month_totals',
        queryParameters: {
          'month': 'eq.$monthStart',
          'select': 'type,total',
        },
      );

      return List<dynamic>.from(res.data);
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<List<Map<String, dynamic>>> fetchRecentTransactions() async {
    try {
      final res = await dio.get(
        '/rest/v1/transactions',
        queryParameters: {
          'select': 'amount,type,date,categories(name,icon)',
          'order': 'date.desc',
          'limit': '5',
        },
      );

      return List<Map<String, dynamic>>.from(res.data);
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\dashboard\data\repositories\dashboard_repository_impl.dart =====
import 'package:finance_tracker_app/feature/dashboard/domain/entities/dashboard_models.dart';
import '../../domain/repositories/dashboard_repository.dart';
import '../models/dashboard_remote_data_source.dart';

class DashboardRepositoryImpl implements DashboardRepository {
  final DashboardRemoteDataSource remote;

  DashboardRepositoryImpl(this.remote);

  @override
  Future<(DashboardSummaryModel, List<DashboardTransactionModel>)> getDashboard() async {
    final totalsRaw = await remote.fetchMonthTotals(DateTime.now());
    final txRaw = await remote.fetchRecentTransactions();

    final summaryModel =
        DashboardSummaryModel.fromMonthTotals(totalsRaw);

    final transactions = txRaw
        .map(DashboardTransactionModel.fromJson)
        .map(
          (m) => DashboardTransactionModel(
            title: m.title,
            icon: m.icon,
            date: m.date,
            amount: m.amount,
            isIncome: m.isIncome,
          ),
        )
        .toList();

    final summary = DashboardSummaryModel(
      income: summaryModel.income,
      expenses: summaryModel.expenses,
    );

    return (summary, transactions);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\dashboard\domain\entities\dashboard_models.dart =====
class DashboardSummaryModel {
  final double income;
  final double expenses;

  const DashboardSummaryModel({
    required this.income,
    required this.expenses,
  });

  factory DashboardSummaryModel.fromMonthTotals(List<dynamic> rows) {
    double income = 0;
    double expenses = 0;

    for (final r in rows) {
      if (r['type'] == 'INCOME') {
        income = (r['total'] ?? 0).toDouble();
      } else if (r['type'] == 'EXPENSE') {
        expenses = (r['total'] ?? 0).toDouble();
      }
    }

    return DashboardSummaryModel(
      income: income,
      expenses: expenses,
    );
  }
}

class DashboardTransactionModel {
  final String title;
  final String icon;
  final DateTime date;
  final double amount;
  final bool isIncome;

  const DashboardTransactionModel({
    required this.title,
    required this.icon,
    required this.date,
    required this.amount,
    required this.isIncome,
  });

  factory DashboardTransactionModel.fromJson(
    Map<String, dynamic> json,
  ) {
    final category = json['categories'] as Map<String, dynamic>;

    return DashboardTransactionModel(
      title: category['name'],
      icon: category['icon'],
      date: DateTime.parse(json['date']),
      amount: (json['amount'] ?? 0).toDouble(),
      isIncome: json['type'] == 'INCOME',
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\dashboard\domain\repositories\dashboard_repository.dart =====
import 'package:finance_tracker_app/feature/dashboard/domain/entities/dashboard_models.dart';

abstract class DashboardRepository {
  Future<(DashboardSummaryModel, List<DashboardTransactionModel>)> getDashboard();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\dashboard\domain\usecases\get_dashboard_data.dart =====

import 'package:finance_tracker_app/feature/dashboard/domain/entities/dashboard_models.dart';
import '../repositories/dashboard_repository.dart';

class GetDashboardData {
  final DashboardRepository repository;

  GetDashboardData(this.repository);

  Future<(DashboardSummaryModel, List<DashboardTransactionModel>)> call() {
    return repository.getDashboard();
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\models\auth_remote_data_source.dart =====
import 'package:dio/dio.dart';
import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/error/dio_exception_mapper.dart';
import 'package:finance_tracker_app/core/error/exception_mapper.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/network/supabase_endpoints.dart';

/// Result object returned after a signup request.
///
/// [requireEmailVerification] indicates whether the user must verify
/// their email before being able to log in.
/// [message] is a user-facing success message.
class SignUpResult {
  final bool requireEmailVerification;
  final String message;

  const SignUpResult({
    required this.requireEmailVerification,
    required this.message,
  });
}

/// Contract for authentication-related remote operations.
///
/// This data source communicates directly with Supabase Auth APIs.
abstract class AuthRemoteDataSource {
  /// Registers a new user account.
  ///
  /// Throws [AuthException], [NetworkException], or [ServerException]
  /// depending on the failure type.
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  });

  /// Authenticates a user and returns an access token.
  ///
  /// Throws [AuthException] if credentials are invalid.
  /// Throws [NetworkException] on connectivity issues.
  /// Throws [ServerException] on unexpected server responses.
  Future<String> login({
    required String email,
    required String password,
  });

  /// Fetches the currently authenticated user profile from Supabase.
  ///
  /// Returns a raw JSON map representing the user object.
  Future<Map<String, dynamic>> getMe();
}

/// Dio-based implementation of [AuthRemoteDataSource].
///
/// This class is part of the data layer and is responsible for:
/// - Making HTTP requests
/// - Mapping Dio-specific errors
/// - Converting low-level errors into domain-friendly exceptions
class AuthRemoteDataSourceImpl implements AuthRemoteDataSource {
  /// Dio HTTP client instance.
  final Dio dio;

  AuthRemoteDataSourceImpl(this.dio);

  /// Guards API calls and centralizes error mapping.
  ///
  /// - Dio errors are mapped using [DioExceptionMapper]
  /// - Domain-level exceptions are rethrown
  /// - Unknown errors are handled by [ExceptionMapper]
  Future<T> _guard<T>(Future<T> Function() run) async {
    try {
      return await run();
    } on DioException catch (e) {
      throw DioExceptionMapper.map(e);
    } on AppException {
      rethrow;
    } catch (e) {
      throw ExceptionMapper.map(e);
    }
  }

  @override
  Future<SignUpResult> signup({
    required String fullName,
    required String email,
    required String password,
  }) {
    return _guard(() async {
      final res = await dio.post(
        SupabaseEndpoints.authSignUp,
        data: {
          'email': email,
          'password': password,
          'data': {'full_name': fullName},
        },
      );

      final body = res.data;
      final session = body is Map<String, dynamic> ? body['session'] : null;

      final requireEmailVerification = session == null;

      return SignUpResult(
        requireEmailVerification: requireEmailVerification,
        message: requireEmailVerification
            ? AppStrings.signUpSuccessVerifyEmail
            : AppStrings.signUpSuccess,
      );
    });
  }

  @override
  Future<String> login({
    required String email,
    required String password,
  }) {
    return _guard(() async {
      final res = await dio.post(
        SupabaseEndpoints.authToken,
        queryParameters: const {'grant_type': 'password'},
        data: {'email': email, 'password': password},
      );

      final data = res.data;
      final token = data is Map<String, dynamic>
          ? (data['access_token'] ?? '').toString().trim()
          : '';

      if (token.isEmpty) {
        throw const ServerException(AppStrings.genericError);
      }

      return token;
    });
  }

  @override
  Future<Map<String, dynamic>> getMe() {
    return _guard(() async {
      final res = await dio.get(SupabaseEndpoints.authUser);
      final data = res.data;

      if (data is Map<String, dynamic>) return data;

      throw const ServerException(AppStrings.genericError);
    });
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\data\repositories\auth_repository_impl.dart =====
import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';
import 'package:finance_tracker_app/core/network/session_local_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/data/models/auth_remote_data_source.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';

class AuthRepositoryImpl implements AuthRepository {
  final AuthRemoteDataSource remote;
  final SessionLocalDataSource sessionLocal;

  AuthRepositoryImpl({
    required this.remote,
    required this.sessionLocal,
  });

  @override
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  }) async {
    final result = await remote.signup(
      fullName: fullName,
      email: email,
      password: password,
    );

    if (result.requireEmailVerification) {
      throw AuthException(result.message);
    }

    final token = await remote.login(email: email, password: password);
    await sessionLocal.saveAccessToken(token);

    return _fetchMe();
  }

  @override
  Future<UserModel> login({
    required String email,
    required String password,
  }) async {
    try {
      final token = await remote.login(email: email, password: password);
      await sessionLocal.saveAccessToken(token);
      return _fetchMe();
    } on AppException {
      rethrow;
    } catch (_) {
      throw const AuthException(AppStrings.loginFailed);
    }
  }

  Future<UserModel> _fetchMe() async {
    final me = await remote.getMe();
    final meta = me['user_metadata'];

    return UserModel(
      id: (me['id'] ?? '').toString(),
      email: (me['email'] ?? '').toString(),
      fullName: meta is Map<String, dynamic> ? meta['full_name'] as String? : null,
    );
  }

  @override
  Future<void> logout() => sessionLocal.clear();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.dart =====
import 'package:freezed_annotation/freezed_annotation.dart';

part 'user_model.freezed.dart';
part 'user_model.g.dart';

@freezed
abstract class UserModel with _$UserModel {
  const factory UserModel({
    required String id,
    required String email,
    String? fullName,
  }) = _UserModel;

  factory UserModel.fromJson(Map<String, dynamic> json) =>
      _$UserModelFromJson(json);
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.freezed.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND
// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'user_model.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

// dart format off
T _$identity<T>(T value) => value;

/// @nodoc
mixin _$UserModel {

 String get id; String get email; String? get fullName;
/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
$UserModelCopyWith<UserModel> get copyWith => _$UserModelCopyWithImpl<UserModel>(this as UserModel, _$identity);

  /// Serializes this UserModel to a JSON map.
  Map<String, dynamic> toJson();


@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class $UserModelCopyWith<$Res>  {
  factory $UserModelCopyWith(UserModel value, $Res Function(UserModel) _then) = _$UserModelCopyWithImpl;
@useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class _$UserModelCopyWithImpl<$Res>
    implements $UserModelCopyWith<$Res> {
  _$UserModelCopyWithImpl(this._self, this._then);

  final UserModel _self;
  final $Res Function(UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@pragma('vm:prefer-inline') @override $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_self.copyWith(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}

}


/// Adds pattern-matching-related methods to [UserModel].
extension UserModelPatterns on UserModel {
/// A variant of `map` that fallback to returning `orElse`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeMap<TResult extends Object?>(TResult Function( _UserModel value)?  $default,{required TResult orElse(),}){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// Callbacks receives the raw object, upcasted.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case final Subclass2 value:
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult map<TResult extends Object?>(TResult Function( _UserModel value)  $default,){
final _that = this;
switch (_that) {
case _UserModel():
return $default(_that);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `map` that fallback to returning `null`.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case final Subclass value:
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? mapOrNull<TResult extends Object?>(TResult? Function( _UserModel value)?  $default,){
final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that);case _:
  return null;

}
}
/// A variant of `when` that fallback to an `orElse` callback.
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return orElse();
/// }
/// ```

@optionalTypeArgs TResult maybeWhen<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)?  $default,{required TResult orElse(),}) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return orElse();

}
}
/// A `switch`-like method, using callbacks.
///
/// As opposed to `map`, this offers destructuring.
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case Subclass2(:final field2):
///     return ...;
/// }
/// ```

@optionalTypeArgs TResult when<TResult extends Object?>(TResult Function( String id,  String email,  String? fullName)  $default,) {final _that = this;
switch (_that) {
case _UserModel():
return $default(_that.id,_that.email,_that.fullName);case _:
  throw StateError('Unexpected subclass');

}
}
/// A variant of `when` that fallback to returning `null`
///
/// It is equivalent to doing:
/// ```dart
/// switch (sealedClass) {
///   case Subclass(:final field):
///     return ...;
///   case _:
///     return null;
/// }
/// ```

@optionalTypeArgs TResult? whenOrNull<TResult extends Object?>(TResult? Function( String id,  String email,  String? fullName)?  $default,) {final _that = this;
switch (_that) {
case _UserModel() when $default != null:
return $default(_that.id,_that.email,_that.fullName);case _:
  return null;

}
}

}

/// @nodoc
@JsonSerializable()

class _UserModel implements UserModel {
  const _UserModel({required this.id, required this.email, this.fullName});
  factory _UserModel.fromJson(Map<String, dynamic> json) => _$UserModelFromJson(json);

@override final  String id;
@override final  String email;
@override final  String? fullName;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @JsonKey(includeFromJson: false, includeToJson: false)
@pragma('vm:prefer-inline')
_$UserModelCopyWith<_UserModel> get copyWith => __$UserModelCopyWithImpl<_UserModel>(this, _$identity);

@override
Map<String, dynamic> toJson() {
  return _$UserModelToJson(this, );
}

@override
bool operator ==(Object other) {
  return identical(this, other) || (other.runtimeType == runtimeType&&other is _UserModel&&(identical(other.id, id) || other.id == id)&&(identical(other.email, email) || other.email == email)&&(identical(other.fullName, fullName) || other.fullName == fullName));
}

@JsonKey(includeFromJson: false, includeToJson: false)
@override
int get hashCode => Object.hash(runtimeType,id,email,fullName);

@override
String toString() {
  return 'UserModel(id: $id, email: $email, fullName: $fullName)';
}


}

/// @nodoc
abstract mixin class _$UserModelCopyWith<$Res> implements $UserModelCopyWith<$Res> {
  factory _$UserModelCopyWith(_UserModel value, $Res Function(_UserModel) _then) = __$UserModelCopyWithImpl;
@override @useResult
$Res call({
 String id, String email, String? fullName
});




}
/// @nodoc
class __$UserModelCopyWithImpl<$Res>
    implements _$UserModelCopyWith<$Res> {
  __$UserModelCopyWithImpl(this._self, this._then);

  final _UserModel _self;
  final $Res Function(_UserModel) _then;

/// Create a copy of UserModel
/// with the given fields replaced by the non-null parameter values.
@override @pragma('vm:prefer-inline') $Res call({Object? id = null,Object? email = null,Object? fullName = freezed,}) {
  return _then(_UserModel(
id: null == id ? _self.id : id // ignore: cast_nullable_to_non_nullable
as String,email: null == email ? _self.email : email // ignore: cast_nullable_to_non_nullable
as String,fullName: freezed == fullName ? _self.fullName : fullName // ignore: cast_nullable_to_non_nullable
as String?,
  ));
}


}

// dart format on

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\entities\user_model.g.dart =====
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'user_model.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_UserModel _$UserModelFromJson(Map<String, dynamic> json) => _UserModel(
  id: json['id'] as String,
  email: json['email'] as String,
  fullName: json['fullName'] as String?,
);

Map<String, dynamic> _$UserModelToJson(_UserModel instance) =>
    <String, dynamic>{
      'id': instance.id,
      'email': instance.email,
      'fullName': instance.fullName,
    };

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\repositories\auth_repository.dart =====
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';

abstract class AuthRepository {
  Future<UserModel> login({required String email, required String password});
  Future<UserModel> signup({
    required String email,
    required String password,
    required String fullName,
  });
  Future<void> logout();
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\login.dart =====
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/validators/auth_validators.dart';

class Login {
  final AuthRepository repository;
  Login(this.repository);

  Future<UserModel> call({
    required String email,
    required String password,
  }) {
    final e = AuthValidators.validateEmail(email);
    AuthValidators.validatePassword(password);
    return repository.login(email: e, password: password);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\usecases\sign_up.dart =====
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/repositories/auth_repository.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/validators/auth_validators.dart';

class Signup {
  final AuthRepository repository;
  Signup(this.repository);

  Future<UserModel> call({
    required String email,
    required String password,
    required String fullName,
  }) {
    final n = AuthValidators.validateFullName(fullName);
    final e = AuthValidators.validateEmail(email);
    AuthValidators.validatePassword(password);
    return repository.signup(email: e, password: password, fullName: n);
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\domain\validators\auth_validators.dart =====
import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';

class AuthValidators {
  static String _trim(String v) => v.trim();

  static String validateEmail(String email) {
    final e = _trim(email);

    if (e.isEmpty) {
      throw ValidationException(AppStrings.emailRequired);
    }

    if (!e.contains('@') || !e.contains('.')) {
      throw ValidationException(AppStrings.invalidEmailFormat);
    }

    final parts = e.split('@');
    if (parts.length != 2 || parts[1].trim().isEmpty) {
      throw ValidationException(AppStrings.invalidEmailFormat);
    }

    return e;
  }

  static void validatePassword(String password) {
    if (password.isEmpty) {
      throw ValidationException(AppStrings.passwordRequired);
    }

    if (password.length < 8) {
      throw ValidationException(AppStrings.passwordMinLength8);
    }
  }

  static String validateFullName(String fullName) {
    final n = _trim(fullName);

    if (n.isEmpty) {
      throw ValidationException(AppStrings.fullNameRequired);
    }

    return n;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_cubit.dart =====
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:logger/logger.dart';

import 'auth_state.dart';
import '../../domain/usecases/login.dart';
import '../../domain/usecases/sign_up.dart';
import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/error/exceptions.dart';

class AuthCubit extends Cubit<AuthState> {
  final Login _login;
  final Signup _signup;
  final Logger _logger;

  AuthCubit({
    required Login login,
    required Signup signup,
    Logger? logger,
  })  : _login = login,
        _signup = signup,
        _logger = logger ?? Logger(),
        super(AuthInitial());

  Future<void> login(String email, String password) async {
    if (state is AuthLoading) return;
    await _run(
      action: () => _login(email: email, password: password),
      label: AppStrings.login,
    );
  }

  Future<void> signup(String fullName, String email, String password) async {
    if (state is AuthLoading) return;
    await _run(
      action: () => _signup(fullName: fullName, email: email, password: password),
      label: AppStrings.signUpTitle,
    );
  }

  Future<void> _run({
    required Future<dynamic> Function() action,
    required String label,
  }) async {
    emit(AuthLoading());

    for (var attempt = 1; attempt <= 2; attempt++) {
      try {
        final user = await action();
        _logger.i('$label: ${user.email}');
        emit(AuthSuccess(user));
        return;
      } on TimeoutRequestException catch (e) {
        _logger.w(e.message);
        if (attempt == 2) {
          emit(AuthFailure(e.message));
          return;
        }
      } on NetworkException catch (e) {
        _logger.w(e.message);
        if (attempt == 2) {
          emit(AuthFailure(e.message));
          return;
        }
      } on AppException catch (e) {
        _logger.w(e.message);
        emit(AuthFailure(e.message));
        return;
      } catch (e, s) {
        _logger.e(AppStrings.genericError, error: e, stackTrace: s);
        emit(AuthFailure(AppStrings.genericError));
        return;
      }
    }
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\cubit\auth_state.dart =====
import 'package:equatable/equatable.dart';
import 'package:finance_tracker_app/feature/users/auth/domain/entities/user_model.dart';

sealed class AuthState extends Equatable {
  @override
  List<Object?> get props => [];
}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthSuccess extends AuthState {
  final UserModel user;
  AuthSuccess(this.user);

  @override
  List<Object?> get props => [user];
}

class AuthFailure extends AuthState {
  final String message;
  AuthFailure(this.message);

  @override
  List<Object?> get props => [message];
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\dashboard_screen.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class DashboardScreen extends StatefulWidget {
  const DashboardScreen({super.key});

  @override
  State<DashboardScreen> createState() => _DashboardScreenState();
}

class _DashboardScreenState extends State<DashboardScreen> {
  int _navIndex = 0;

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final tt = theme.textTheme;

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: ConstrainedBox(
            constraints: const BoxConstraints(maxWidth: 420),
            child: SingleChildScrollView(
              padding: const EdgeInsets.fromLTRB(
                AppSpacing.lg,
                AppSpacing.lg,
                AppSpacing.lg,
                AppSpacing.xl,
              ),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.stretch,
                children: [
                  DashboardHeader(
                    title: 'Dashboard',
                    style: tt.headlineMedium?.copyWith(
                      fontWeight: FontWeight.w700,
                    ),
                  ),
                  const SizedBox(height: AppSpacing.lg),
                  const SummaryRow(
                    items: [
                      SummaryItem(
                        label: 'INCOME',
                        value: '\$2,600',
                        background: Color(0xFF5AA9A6),
                      ),
                      SummaryItem(
                        label: 'EXPENSES',
                        value: '\$1,400',
                        background: Color(0xFFF2A34B),
                      ),
                      SummaryItem(
                        label: 'BALANCE',
                        value: '\$1,200',
                        background: Color(0xFF0B6B6B),
                      ),
                    ],
                  ),
                  const SizedBox(height: AppSpacing.xl),
                  const DonutAndLegend(
                    income: 2600,
                    expenses: 1400,
                    incomeColor: Color(0xFF5AA9A6),
                    expensesColor: Color(0xFFF2A34B),
                  ),
                  const SizedBox(height: AppSpacing.xl),
                  Text(
                    'Recent Transactions',
                    style: tt.titleMedium?.copyWith(fontWeight: FontWeight.w700),
                  ),
                  const SizedBox(height: AppSpacing.md),
                  const TransactionTile(
                    icon: Icons.attach_money,
                    iconColor: Color(0xFF5AA9A6),
                    title: 'Salary',
                    date: 'Apr 25',
                    amountPrimary: '\$2000',
                    amountSecondary: '\$200',
                  ),
                  const SizedBox(height: AppSpacing.sm),
                  const TransactionTile(
                    icon: Icons.restaurant,
                    iconColor: Color(0xFFF2A34B),
                    title: 'Groceries',
                    date: 'Apr 24',
                    amountPrimary: '\$120',
                    amountSecondary: '\$120',
                  ),
                  const SizedBox(height: AppSpacing.sm),
                  const TransactionTile(
                    icon: Icons.home,
                    iconColor: Color(0xFFF2A34B),
                    title: 'Apartment',
                    date: 'Apr 22',
                    amountPrimary: '\$850',
                    amountSecondary: '\$850',
                  ),
                ],
              ),
            ),
          ),
        ),
      ),
      bottomNavigationBar: DashboardBottomNav(
        currentIndex: _navIndex,
        onChanged: (i) => setState(() => _navIndex = i),
        items: const [
          DashboardNavItem(icon: Icons.home, label: 'Home'),
          DashboardNavItem(icon: Icons.add, label: 'Add'),
          DashboardNavItem(icon: Icons.history, label: 'History'),
          DashboardNavItem(icon: Icons.bar_chart, label: 'Report'),
          DashboardNavItem(icon: Icons.settings, label: 'Settings'),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\login_screen.dart =====
import 'package:finance_tracker_app/shared/widgets/auth_ui.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final _formKey = GlobalKey<FormState>();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool _isPasswordHidden = true;

  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }

  void _onLoginPressed(bool isLoading) {
    if (isLoading) return;

    AuthUi.unfocus(context);

    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().login(
          _emailController.text.trim(),
          _passwordController.text,
        );
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final textTheme = theme.textTheme;
    final colorScheme = theme.colorScheme;

    return Scaffold(
      backgroundColor: colorScheme.background,
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listenWhen: (prev, next) => next is AuthFailure || next is AuthSuccess,
          listener: (context, state) {
            if (state is AuthFailure) {
              AuthUi.snack(context, state.message);
              return;
            }

            if (state is AuthSuccess) {
              Navigator.pushNamedAndRemoveUntil(
                context,
                AppRoutes.dashboard,
                (_) => false,
              );
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return AuthLoadingOverlay(
              isLoading: isLoading,
              child: Center(
                child: SingleChildScrollView(
                  padding: const EdgeInsets.symmetric(horizontal: AppSpacing.lg),
                  child: Form(
                    key: _formKey,
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.stretch,
                      children: [
                        const SizedBox(height: AppSpacing.xl),
                        Text(
                          AppStrings.welcomeTitle,
                          textAlign: TextAlign.center,
                          style: textTheme.headlineMedium,
                        ),
                        const SizedBox(height: AppSpacing.lg),
                        Assets.images.loginImg.image(
                          width: 240,
                          height: 120,
                          fit: BoxFit.contain,
                        ),
                        const SizedBox(height: AppSpacing.xl),
                        AppValidatedTextField(
                          controller: _emailController,
                          label: AppStrings.emailLabel,
                          keyboardType: TextInputType.emailAddress,
                          validator: AppValidators.email,
                          enabled: !isLoading,
                          textInputAction: TextInputAction.next,
                        ),
                        const SizedBox(height: AppSpacing.md),
                        AppValidatedTextField(
                          controller: _passwordController,
                          label: AppStrings.passwordLabel,
                          obscureText: _isPasswordHidden,
                          keyboardType: TextInputType.visiblePassword,
                          validator: AppValidators.password,
                          enabled: !isLoading,
                          textInputAction: TextInputAction.done,
                          onFieldSubmitted: (_) => _onLoginPressed(isLoading),
                          suffixIcon: IconButton(
                            icon: Icon(
                              _isPasswordHidden
                                  ? Icons.visibility_off_outlined
                                  : Icons.visibility_outlined,
                              color: colorScheme.onSurfaceVariant,
                            ),
                            onPressed: isLoading
                                ? null
                                : () => setState(() {
                                      _isPasswordHidden = !_isPasswordHidden;
                                    }),
                          ),
                        ),
                        const SizedBox(height: AppSpacing.lg),
                        SizedBox(
                          height: AppSpacing.xxl,
                          child: ElevatedButton(
                            onPressed: isLoading ? null : () => _onLoginPressed(isLoading),
                            child: isLoading
                                ? const SizedBox(
                                    width: 20,
                                    height: 20,
                                    child: CircularProgressIndicator(strokeWidth: 2),
                                  )
                                : Text(AppStrings.login, style: textTheme.titleMedium),
                          ),
                        ),
                        const SizedBox(height: AppSpacing.md),
                        IgnorePointer(
                          ignoring: isLoading,
                          child: Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Text(AppStrings.dontHaveAccount, style: textTheme.bodyMedium),
                              const SizedBox(width: AppSpacing.xs),
                              GestureDetector(
                                onTap: () => Navigator.pushNamed(context, AppRoutes.signUp),
                                child: Text(
                                  AppStrings.register,
                                  style: textTheme.bodyMedium?.copyWith(
                                    color: colorScheme.primary,
                                    fontWeight: FontWeight.w600,
                                  ),
                                ),
                              ),
                            ],
                          ),
                        ),
                        const SizedBox(height: AppSpacing.lg),
                      ],
                    ),
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\sign_up_screen.dart =====
import 'package:finance_tracker_app/shared/widgets/auth_ui.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/core/utils/app_validators.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_cubit.dart';
import 'package:finance_tracker_app/feature/users/auth/presentation/cubit/auth_state.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';
import 'package:finance_tracker_app/shared/widgets/ui_kit.dart';

class SignUpScreen extends StatefulWidget {
  const SignUpScreen({super.key});

  @override
  State<SignUpScreen> createState() => _SignUpScreenState();
}

class _SignUpScreenState extends State<SignUpScreen> {
  final _formKey = GlobalKey<FormState>();

  final _fullNameController = TextEditingController();
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  final _confirmPasswordController = TextEditingController();

  bool _showPassword = false;
  bool _showConfirmPassword = false;

  @override
  void dispose() {
    _fullNameController.dispose();
    _emailController.dispose();
    _passwordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  void _onSignUpPressed(bool isLoading) {
    if (isLoading) return;

    AuthUi.unfocus(context);

    final isValid = _formKey.currentState?.validate() ?? false;
    if (!isValid) return;

    context.read<AuthCubit>().signup(
          _fullNameController.text.trim(),
          _emailController.text.trim(),
          _passwordController.text,
        );
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final textTheme = theme.textTheme;
    final colorScheme = theme.colorScheme;

    return Scaffold(
      body: SafeArea(
        child: BlocConsumer<AuthCubit, AuthState>(
          listenWhen: (prev, next) => next is AuthFailure || next is AuthSuccess,
          listener: (context, state) async {
            if (state is AuthFailure) {
              AuthUi.snack(context, state.message);
              return;
            }

            if (state is AuthSuccess) {
              AuthUi.snack(context, AppStrings.signUpSuccess);
              await Future.delayed(const Duration(milliseconds: 800));
              if (!mounted) return;
              Navigator.pushReplacementNamed(context, AppRoutes.login);
            }
          },
          builder: (context, state) {
            final isLoading = state is AuthLoading;

            return AuthLoadingOverlay(
              isLoading: isLoading,
              child: Center(
                child: SingleChildScrollView(
                  padding: const EdgeInsets.symmetric(horizontal: AppSpacing.lg),
                  child: Form(
                    key: _formKey,
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.stretch,
                      children: [
                        const SizedBox(height: AppSpacing.lg),
                        Text(
                          AppStrings.signUpTitle,
                          textAlign: TextAlign.center,
                          style: textTheme.headlineMedium,
                        ),
                        const SizedBox(height: AppSpacing.lg),
                        Assets.images.signUpImg.image(
                          width: 240,
                          height: 120,
                          fit: BoxFit.contain,
                        ),
                        const SizedBox(height: AppSpacing.xl),
                        AppValidatedTextField(
                          controller: _fullNameController,
                          label: AppStrings.fullNameLabel,
                          keyboardType: TextInputType.name,
                          validator: (value) {
                            final v = value?.trim();
                            if (v == null || v.isEmpty) return AppStrings.fullNameRequired;
                            return null;
                          },
                          enabled: !isLoading,
                          textInputAction: TextInputAction.next,
                        ),
                        const SizedBox(height: AppSpacing.md),
                        AppValidatedTextField(
                          controller: _emailController,
                          label: AppStrings.emailLabel,
                          keyboardType: TextInputType.emailAddress,
                          validator: AppValidators.email,
                          enabled: !isLoading,
                          textInputAction: TextInputAction.next,
                        ),
                        const SizedBox(height: AppSpacing.md),
                        AppValidatedTextField(
                          controller: _passwordController,
                          label: AppStrings.passwordLabel,
                          obscureText: !_showPassword,
                          keyboardType: TextInputType.visiblePassword,
                          validator: AppValidators.password,
                          enabled: !isLoading,
                          textInputAction: TextInputAction.next,
                          suffixIcon: IconButton(
                            icon: Icon(
                              _showPassword ? Icons.visibility_off_outlined : Icons.visibility_outlined,
                            ),
                            onPressed: isLoading
                                ? null
                                : () => setState(() {
                                      _showPassword = !_showPassword;
                                    }),
                          ),
                        ),
                        const SizedBox(height: AppSpacing.md),
                        AppValidatedTextField(
                          controller: _confirmPasswordController,
                          label: AppStrings.confirmPasswordLabel,
                          obscureText: !_showConfirmPassword,
                          keyboardType: TextInputType.visiblePassword,
                          validator: (value) => AppValidators.confirmPassword(
                            value,
                            _passwordController.text,
                          ),
                          enabled: !isLoading,
                          textInputAction: TextInputAction.done,
                          onFieldSubmitted: (_) => _onSignUpPressed(isLoading),
                          suffixIcon: IconButton(
                            icon: Icon(
                              _showConfirmPassword ? Icons.visibility_off_outlined : Icons.visibility_outlined,
                            ),
                            onPressed: isLoading
                                ? null
                                : () => setState(() {
                                      _showConfirmPassword = !_showConfirmPassword;
                                    }),
                          ),
                        ),
                        const SizedBox(height: AppSpacing.lg),
                        SizedBox(
                          height: AppSpacing.xxl,
                          child: ElevatedButton(
                            onPressed: isLoading ? null : () => _onSignUpPressed(isLoading),
                            child: isLoading
                                ? const SizedBox(
                                    width: 20,
                                    height: 20,
                                    child: CircularProgressIndicator(strokeWidth: 2),
                                  )
                                : Text(AppStrings.signUpTitle, style: textTheme.titleMedium),
                          ),
                        ),
                        const SizedBox(height: AppSpacing.md),
                        IgnorePointer(
                          ignoring: isLoading,
                          child: Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Text(AppStrings.alreadyHaveAccount, style: textTheme.bodyMedium),
                              const SizedBox(width: AppSpacing.xs),
                              GestureDetector(
                                onTap: () => Navigator.pushNamed(context, AppRoutes.login),
                                child: Text(
                                  AppStrings.login,
                                  style: textTheme.bodyMedium?.copyWith(
                                    color: colorScheme.primary,
                                    fontWeight: FontWeight.w600,
                                  ),
                                ),
                              ),
                            ],
                          ),
                        ),
                        const SizedBox(height: AppSpacing.lg),
                      ],
                    ),
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\feature\users\auth\presentation\pages\welcome_screen.dart =====
import 'package:flutter/material.dart';

import 'package:finance_tracker_app/core/constants/strings.dart';
import 'package:finance_tracker_app/core/router/app_router.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:finance_tracker_app/gen/assets.gen.dart';

class WelcomeScreen extends StatelessWidget {
  const WelcomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final ts = theme.textTheme;
    final cs = theme.colorScheme;

    final wallet = Assets.icons.walletSolid.svg(
      width: 200,
      height: 200,
      colorFilter: ColorFilter.mode(cs.primary, BlendMode.srcIn),
    );

    return Scaffold(
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: AppSpacing.lg),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                wallet,
                const SizedBox(height: AppSpacing.lg),
                Text(
                  AppStrings.welcome,
                  style: ts.headlineMedium,
                ),
                const SizedBox(height: AppSpacing.sm),
                Text(
                  AppStrings.welcomeSubtitle,
                  textAlign: TextAlign.center,
                  style: ts.bodyLarge?.copyWith(
                    color: cs.onSurfaceVariant,
                  ),
                ),
                const SizedBox(height: AppSpacing.xl),
                SizedBox(
                  width: double.infinity,
                  height: AppSpacing.xxl,
                  child: ElevatedButton(
                    onPressed: () => Navigator.pushNamed(
                      context,
                      AppRoutes.login,
                    ),
                    child: Text(
                      AppStrings.getStarted,
                      style: ts.titleMedium,
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\gen\assets.gen.dart =====
// dart format width=80

/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  FlutterGen
/// *****************************************************

// coverage:ignore-file
// ignore_for_file: type=lint
// ignore_for_file: deprecated_member_use,directives_ordering,implicit_dynamic_list_literal,unnecessary_import

import 'package:flutter/services.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/flutter_svg.dart' as _svg;
import 'package:vector_graphics/vector_graphics.dart' as _vg;

class $AssetsIconsGen {
  const $AssetsIconsGen();

  /// File path: assets/icons/wallet-solid.svg
  SvgGenImage get walletSolid =>
      const SvgGenImage('assets/icons/wallet-solid.svg');

  /// List of all assets
  List<SvgGenImage> get values => [walletSolid];
}

class $AssetsImagesGen {
  const $AssetsImagesGen();

  /// File path: assets/images/login_img.png
  AssetGenImage get loginImg =>
      const AssetGenImage('assets/images/login_img.png');

  /// File path: assets/images/sign_up_img.png
  AssetGenImage get signUpImg =>
      const AssetGenImage('assets/images/sign_up_img.png');

  /// List of all assets
  List<AssetGenImage> get values => [loginImg, signUpImg];
}

class Assets {
  const Assets._();

  static const String aEnv = '.env';
  static const $AssetsIconsGen icons = $AssetsIconsGen();
  static const $AssetsImagesGen images = $AssetsImagesGen();

  /// List of all assets
  static List<String> get values => [aEnv];
}

class AssetGenImage {
  const AssetGenImage(
    this._assetName, {
    this.size,
    this.flavors = const {},
    this.animation,
  });

  final String _assetName;

  final Size? size;
  final Set<String> flavors;
  final AssetGenImageAnimation? animation;

  Image image({
    Key? key,
    AssetBundle? bundle,
    ImageFrameBuilder? frameBuilder,
    ImageErrorWidgetBuilder? errorBuilder,
    String? semanticLabel,
    bool excludeFromSemantics = false,
    double? scale,
    double? width,
    double? height,
    Color? color,
    Animation<double>? opacity,
    BlendMode? colorBlendMode,
    BoxFit? fit,
    AlignmentGeometry alignment = Alignment.center,
    ImageRepeat repeat = ImageRepeat.noRepeat,
    Rect? centerSlice,
    bool matchTextDirection = false,
    bool gaplessPlayback = true,
    bool isAntiAlias = false,
    String? package,
    FilterQuality filterQuality = FilterQuality.medium,
    int? cacheWidth,
    int? cacheHeight,
  }) {
    return Image.asset(
      _assetName,
      key: key,
      bundle: bundle,
      frameBuilder: frameBuilder,
      errorBuilder: errorBuilder,
      semanticLabel: semanticLabel,
      excludeFromSemantics: excludeFromSemantics,
      scale: scale,
      width: width,
      height: height,
      color: color,
      opacity: opacity,
      colorBlendMode: colorBlendMode,
      fit: fit,
      alignment: alignment,
      repeat: repeat,
      centerSlice: centerSlice,
      matchTextDirection: matchTextDirection,
      gaplessPlayback: gaplessPlayback,
      isAntiAlias: isAntiAlias,
      package: package,
      filterQuality: filterQuality,
      cacheWidth: cacheWidth,
      cacheHeight: cacheHeight,
    );
  }

  ImageProvider provider({AssetBundle? bundle, String? package}) {
    return AssetImage(_assetName, bundle: bundle, package: package);
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

class AssetGenImageAnimation {
  const AssetGenImageAnimation({
    required this.isAnimation,
    required this.duration,
    required this.frames,
  });

  final bool isAnimation;
  final Duration duration;
  final int frames;
}

class SvgGenImage {
  const SvgGenImage(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = false;

  const SvgGenImage.vec(this._assetName, {this.size, this.flavors = const {}})
    : _isVecFormat = true;

  final String _assetName;
  final Size? size;
  final Set<String> flavors;
  final bool _isVecFormat;

  _svg.SvgPicture svg({
    Key? key,
    bool matchTextDirection = false,
    AssetBundle? bundle,
    String? package,
    double? width,
    double? height,
    BoxFit fit = BoxFit.contain,
    AlignmentGeometry alignment = Alignment.center,
    bool allowDrawingOutsideViewBox = false,
    WidgetBuilder? placeholderBuilder,
    String? semanticsLabel,
    bool excludeFromSemantics = false,
    _svg.SvgTheme? theme,
    _svg.ColorMapper? colorMapper,
    ColorFilter? colorFilter,
    Clip clipBehavior = Clip.hardEdge,
    @deprecated Color? color,
    @deprecated BlendMode colorBlendMode = BlendMode.srcIn,
    @deprecated bool cacheColorFilter = false,
  }) {
    final _svg.BytesLoader loader;
    if (_isVecFormat) {
      loader = _vg.AssetBytesLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
      );
    } else {
      loader = _svg.SvgAssetLoader(
        _assetName,
        assetBundle: bundle,
        packageName: package,
        theme: theme,
        colorMapper: colorMapper,
      );
    }
    return _svg.SvgPicture(
      loader,
      key: key,
      matchTextDirection: matchTextDirection,
      width: width,
      height: height,
      fit: fit,
      alignment: alignment,
      allowDrawingOutsideViewBox: allowDrawingOutsideViewBox,
      placeholderBuilder: placeholderBuilder,
      semanticsLabel: semanticsLabel,
      excludeFromSemantics: excludeFromSemantics,
      colorFilter:
          colorFilter ??
          (color == null ? null : ColorFilter.mode(color, colorBlendMode)),
      clipBehavior: clipBehavior,
      cacheColorFilter: cacheColorFilter,
    );
  }

  String get path => _assetName;

  String get keyName => _assetName;
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\auth_ui.dart =====
import 'package:flutter/material.dart';

class AuthUi {
  static void unfocus(BuildContext context) {
    FocusScope.of(context).unfocus();
  }

  static void snack(BuildContext context, String msg) {
    if (!context.mounted) return;
    ScaffoldMessenger.of(context)
      ..hideCurrentSnackBar()
      ..showSnackBar(SnackBar(content: Text(msg)));
  }
}

class AuthLoadingOverlay extends StatelessWidget {
  final bool isLoading;
  final Widget child;

  const AuthLoadingOverlay({
    super.key,
    required this.isLoading,
    required this.child,
  });

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        child,
        if (isLoading)
          Positioned.fill(
            child: AbsorbPointer(
              absorbing: true,
              child: Container(
                color: Colors.black.withOpacity(0.2),
                alignment: Alignment.center,
                child: const CircularProgressIndicator(),
              ),
            ),
          ),
      ],
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\error_boundary.dart =====
import 'dart:async';
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';

typedef ErrorReporter = Future<void> Function(Object error, StackTrace stack, {FlutterErrorDetails? details});

class ErrorBoundary extends StatefulWidget {
  final Widget child;

  final Widget Function(BuildContext context, Object error, StackTrace stack)? fallbackBuilder;

  final ErrorReporter? reporter;

  final bool allowRetry;

  const ErrorBoundary({
    super.key,
    required this.child,
    this.fallbackBuilder,
    this.reporter,
    this.allowRetry = true,
  });

  @override
  State<ErrorBoundary> createState() => _ErrorBoundaryState();
}

class _ErrorBoundaryState extends State<ErrorBoundary> {
  Object? _error;
  StackTrace? _stack;

  @override
  void initState() {
    super.initState();
    _installErrorHandlers();
  }

  void _installErrorHandlers() {
    FlutterError.onError = (FlutterErrorDetails details) async {
      FlutterError.presentError(details);

      final error = details.exception;
      final stack = details.stack ?? StackTrace.current;

      await _report(error, stack, details: details);

      if (kReleaseMode) {
        _setError(error, stack);
      }
    };

    PlatformDispatcher.instance.onError = (Object error, StackTrace stack) {
      _report(error, stack);
      if (kReleaseMode) _setError(error, stack);
      return true; 
    };
  }

  void _setError(Object error, StackTrace stack) {
    if (!mounted) return;
    setState(() {
      _error = error;
      _stack = stack;
    });
  }

  Future<void> _report(Object error, StackTrace stack, {FlutterErrorDetails? details}) async {
    try {
      if (widget.reporter != null) {
        await widget.reporter!(error, stack, details: details);
      }
    } catch (_) {
    }
  }

  void _reset() {
    if (!mounted) return;
    setState(() {
      _error = null;
      _stack = null;
    });
  }

  @override
  Widget build(BuildContext context) {
    if (_error == null || _stack == null) return widget.child;

    if (widget.fallbackBuilder != null) {
      return widget.fallbackBuilder!(context, _error!, _stack!);
    }

    return MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Scaffold(
        body: Center(
          child: Padding(
            padding: const EdgeInsets.all(20),
            child: ConstrainedBox(
              constraints: const BoxConstraints(maxWidth: 420),
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: [
                  const Icon(Icons.error_outline, size: 64),
                  const SizedBox(height: 12),
                  Text(
                    'Something went wrong',
                    textAlign: TextAlign.center,
                    style: Theme.of(context).textTheme.titleLarge,
                  ),
                  const SizedBox(height: 8),
                  Text(
                    kReleaseMode
                        ? 'Please restart the app or try again.'
                        : '${_error.toString()}',
                    textAlign: TextAlign.center,
                  ),
                  if (widget.allowRetry) ...[
                    const SizedBox(height: 16),
                    FilledButton(
                      onPressed: _reset,
                      child: const Text('Try again'),
                    ),
                  ],
                ],
              ),
            ),
          ),
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\ui_kit.dart =====
library ui_kit;

export 'button/primary_button.dart';
export 'button/secondary_button.dart';
export 'button/icon_button.dart';
export 'button/loading_button.dart';

export 'input/app_validated_text_field.dart';
export 'input/app_password_field.dart';
export 'input/amount_input.dart';
export 'input/app_dropdown.dart';

// dashboard widgets
export 'dashboard_widget/header/dashboard_header.dart';

export 'dashboard_widget/summary/summary_item.dart';
export 'dashboard_widget/summary/summary_card.dart';
export 'dashboard_widget/summary/summary_row.dart';

export 'dashboard_widget/chart/donut_segment.dart';
export 'dashboard_widget/chart/donut_chart.dart';
export 'dashboard_widget/chart/legend_row.dart';
export 'dashboard_widget/chart/donut_and_legend.dart';

export 'dashboard_widget/transactions/transaction_tile.dart';

export 'dashboard_widget/navigation/dashboard_nav_item.dart';
export 'dashboard_widget/navigation/dashboard_bottom_nav.dart';

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\icon_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\loading_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\primary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\button\secondary_button.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\chart\donut_and_legend.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'donut_chart.dart';
import 'donut_segment.dart';
import 'legend_row.dart';

class DonutAndLegend extends StatelessWidget {
  final double income;
  final double expenses;
  final Color incomeColor;
  final Color expensesColor;

  const DonutAndLegend({
    super.key,
    required this.income,
    required this.expenses,
    required this.incomeColor,
    required this.expensesColor,
  });

  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        SizedBox(
          width: 170,
          height: 170,
          child: DonutChart(
            segments: [
              DonutSegment(value: income, color: incomeColor),
              DonutSegment(value: expenses, color: expensesColor),
            ],
            strokeWidth: 26,
            gapRadians: 0.06,
          ),
        ),
        const SizedBox(width: AppSpacing.lg),
        Expanded(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              LegendRow(color: incomeColor, label: 'Income'),
              const SizedBox(height: AppSpacing.md),
              LegendRow(color: expensesColor, label: 'Expenses'),
            ],
          ),
        ),
      ],
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\chart\donut_chart.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'donut_segment.dart';

class DonutChart extends StatelessWidget {
  final List<DonutSegment> segments;
  final double strokeWidth;
  final double gapRadians;

  const DonutChart({
    super.key,
    required this.segments,
    required this.strokeWidth,
    required this.gapRadians,
  });

  @override
  Widget build(BuildContext context) {
    return CustomPaint(
      painter: _DonutChartPainter(
        segments: segments,
        strokeWidth: strokeWidth,
        gapRadians: gapRadians,
      ),
    );
  }
}

class _DonutChartPainter extends CustomPainter {
  final List<DonutSegment> segments;
  final double strokeWidth;
  final double gapRadians;

  const _DonutChartPainter({
    required this.segments,
    required this.strokeWidth,
    required this.gapRadians,
  });

  @override
  void paint(Canvas canvas, Size size) {
    final center = Offset(size.width / 2, size.height / 2);
    final radius = (size.shortestSide / 2) - strokeWidth / 2;

    final total = segments.fold<double>(0, (s, e) => s + e.value);
    if (total <= 0) return;

    final bgPaint = Paint()
      ..style = PaintingStyle.stroke
      ..strokeWidth = strokeWidth
      ..strokeCap = StrokeCap.round
      ..color = AppColors.neutral200;

    canvas.drawCircle(center, radius, bgPaint);

    var start = -1.5707963267948966;

    for (final seg in segments) {
      final sweep = (seg.value / total) * 6.283185307179586;

      final paint = Paint()
        ..style = PaintingStyle.stroke
        ..strokeWidth = strokeWidth
        ..strokeCap = StrokeCap.round
        ..color = seg.color;

      final trimmed = (sweep - gapRadians).clamp(0.0, 6.283185307179586);

      canvas.drawArc(
        Rect.fromCircle(center: center, radius: radius),
        start,
        trimmed,
        false,
        paint,
      );

      start += sweep;
    }

    final holePaint = Paint()
      ..style = PaintingStyle.fill
      ..color = AppColors.white;

    canvas.drawCircle(center, radius - strokeWidth * 0.72, holePaint);
  }

  @override
  bool shouldRepaint(covariant _DonutChartPainter old) {
    return old.strokeWidth != strokeWidth ||
        old.gapRadians != gapRadians ||
        old.segments.length != segments.length;
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\chart\donut_segment.dart =====
import 'package:flutter/material.dart';

class DonutSegment {
  final double value;
  final Color color;

  const DonutSegment({
    required this.value,
    required this.color,
  });
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\chart\legend_row.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';

class LegendRow extends StatelessWidget {
  final Color color;
  final String label;

  const LegendRow({
    super.key,
    required this.color,
    required this.label,
  });

  @override
  Widget build(BuildContext context) {
    final tt = Theme.of(context).textTheme;

    return Row(
      children: [
        Container(
          width: 14,
          height: 36,
          decoration: BoxDecoration(
            color: color,
            borderRadius: AppRadius.pill,
          ),
        ),
        const SizedBox(width: AppSpacing.sm),
        Text(label, style: tt.bodyMedium),
      ],
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\header\dashboard_header.dart =====
import 'package:flutter/material.dart';

class DashboardHeader extends StatelessWidget {
  final String title;
  final TextStyle? style;

  const DashboardHeader({
    super.key,
    required this.title,
    this.style,
  });

  @override
  Widget build(BuildContext context) {
    return Text(
      title,
      textAlign: TextAlign.center,
      style: style,
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\navigation\dashboard_bottom_nav.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'dashboard_nav_item.dart';

class DashboardBottomNav extends StatelessWidget {
  final int currentIndex;
  final ValueChanged<int> onChanged;
  final List<DashboardNavItem> items;

  const DashboardBottomNav({
    super.key,
    required this.currentIndex,
    required this.onChanged,
    required this.items,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;
    final tt = theme.textTheme;

    return SafeArea(
      child: Container(
        padding: const EdgeInsets.fromLTRB(
          AppSpacing.lg,
          AppSpacing.sm,
          AppSpacing.lg,
          AppSpacing.sm,
        ),
        decoration: BoxDecoration(
          color: AppColors.white,
          border: const Border(top: BorderSide(color: AppColors.neutral200)),
          boxShadow: AppShadows.level1,
        ),
        child: Row(
          mainAxisAlignment: MainAxisAlignment.spaceBetween,
          children: [
            for (int i = 0; i < items.length; i++)
              _NavButton(
                item: items[i],
                selected: i == currentIndex,
                selectedColor: cs.primary,
                textTheme: tt,
                onTap: () => onChanged(i),
              ),
          ],
        ),
      ),
    );
  }
}

class _NavButton extends StatelessWidget {
  final DashboardNavItem item;
  final bool selected;
  final Color selectedColor;
  final TextTheme textTheme;
  final VoidCallback onTap;

  const _NavButton({
    required this.item,
    required this.selected,
    required this.selectedColor,
    required this.textTheme,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    final color = selected ? selectedColor : AppColors.neutral600;

    return InkWell(
      borderRadius: AppRadius.medium,
      onTap: onTap,
      child: Padding(
        padding: const EdgeInsets.symmetric(
          horizontal: AppSpacing.sm,
          vertical: AppSpacing.xs,
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            Icon(item.icon, color: color),
            const SizedBox(height: 2),
            Text(
              item.label,
              style: textTheme.bodySmall?.copyWith(
                color: color,
                fontWeight: selected ? FontWeight.w700 : FontWeight.w500,
              ),
            ),
          ],
        ),
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\navigation\dashboard_nav_item.dart =====
import 'package:flutter/material.dart';

class DashboardNavItem {
  final IconData icon;
  final String label;

  const DashboardNavItem({
    required this.icon,
    required this.label,
  });
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\summary\summary_card.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'summary_item.dart';

class SummaryCard extends StatelessWidget {
  final SummaryItem item;

  const SummaryCard({
    super.key,
    required this.item,
  });

  @override
  Widget build(BuildContext context) {
    final tt = Theme.of(context).textTheme;

    return Container(
      padding: const EdgeInsets.symmetric(
        horizontal: AppSpacing.md,
        vertical: AppSpacing.md,
      ),
      decoration: BoxDecoration(
        color: item.background,
        borderRadius: AppRadius.medium,
        boxShadow: AppShadows.level1,
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            item.label,
            style: tt.bodySmall?.copyWith(
              color: Colors.white.withOpacity(0.9),
              fontWeight: FontWeight.w800,
              letterSpacing: 0.6,
            ),
          ),
          const SizedBox(height: AppSpacing.xs),
          Text(
            item.value,
            style: tt.titleMedium?.copyWith(
              color: Colors.white,
              fontWeight: FontWeight.w800,
            ),
          ),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\summary\summary_item.dart =====
import 'package:flutter/material.dart';

class SummaryItem {
  final String label;
  final String value;
  final Color background;

  const SummaryItem({
    required this.label,
    required this.value,
    required this.background,
  });
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\summary\summary_row.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'summary_card.dart';
import 'summary_item.dart';

class SummaryRow extends StatelessWidget {
  final List<SummaryItem> items;

  const SummaryRow({
    super.key,
    required this.items,
  });

  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        for (int i = 0; i < items.length; i++) ...[
          Expanded(child: SummaryCard(item: items[i])),
          if (i != items.length - 1) const SizedBox(width: AppSpacing.md),
        ],
      ],
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\dashboard_widget\transactions\transaction_tile.dart =====
import 'package:flutter/material.dart';
import 'package:finance_tracker_app/core/theme/app_theme.dart';

class TransactionTile extends StatelessWidget {
  final IconData icon;
  final Color iconColor;
  final String title;
  final String date;
  final String amountPrimary;
  final String amountSecondary;

  const TransactionTile({
    super.key,
    required this.icon,
    required this.iconColor,
    required this.title,
    required this.date,
    required this.amountPrimary,
    required this.amountSecondary,
  });

  @override
  Widget build(BuildContext context) {
    final tt = Theme.of(context).textTheme;

    return Container(
      padding: const EdgeInsets.symmetric(
        horizontal: AppSpacing.md,
        vertical: AppSpacing.md,
      ),
      decoration: BoxDecoration(
        color: AppColors.white,
        borderRadius: AppRadius.large,
        border: const Border.fromBorderSide(
          BorderSide(color: AppColors.neutral200),
        ),
      ),
      child: Row(
        children: [
          Container(
            width: 42,
            height: 42,
            decoration: BoxDecoration(
              color: iconColor.withOpacity(0.15),
              borderRadius: AppRadius.medium,
            ),
            child: Icon(icon, color: iconColor),
          ),
          const SizedBox(width: AppSpacing.md),
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  title,
                  style: tt.bodyLarge?.copyWith(fontWeight: FontWeight.w700),
                ),
                const SizedBox(height: 2),
                Text(date, style: tt.bodySmall),
              ],
            ),
          ),
          const SizedBox(width: AppSpacing.md),
          Column(
            crossAxisAlignment: CrossAxisAlignment.end,
            children: [
              Text(
                amountPrimary,
                style: tt.bodyLarge?.copyWith(fontWeight: FontWeight.w800),
              ),
              const SizedBox(height: 2),
              Text(amountSecondary, style: tt.bodySmall),
            ],
          ),
        ],
      ),
    );
  }
}

\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\amount_input.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_dropdown.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_password_field.dart =====
\n
===== C:\Works\finance_tracking_app\lib\shared\widgets\input\app_validated_text_field.dart =====
import 'package:finance_tracker_app/core/theme/app_theme.dart';
import 'package:flutter/material.dart';

class AppValidatedTextField extends StatelessWidget {
  final TextEditingController controller;
  final String label;
  final String? hintText;
  final String? Function(String?)? validator;
  final bool obscureText;
  final Widget? suffixIcon;
  final TextInputType keyboardType;
  final TextInputAction? textInputAction;
  final ValueChanged<String>? onChanged;
  final ValueChanged<String>? onFieldSubmitted;
  final bool enabled;

  const AppValidatedTextField({
    super.key,
    required this.controller,
    required this.label,
    this.hintText,
    this.validator,
    this.obscureText = false,
    this.suffixIcon,
    this.keyboardType = TextInputType.text,
    this.textInputAction,
    this.onChanged,
    this.onFieldSubmitted,
    this.enabled = true,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final cs = theme.colorScheme;

    OutlineInputBorder border(Color color) => OutlineInputBorder(
          borderRadius: AppRadius.medium,
          borderSide: BorderSide(color: color, width: 1),
        );

    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          label,
          style: theme.textTheme.bodyMedium?.copyWith(
            fontWeight: FontWeight.w500,
            color: cs.onBackground,
          ),
        ),
        const SizedBox(height: 8),
        TextFormField(
          controller: controller,
          obscureText: obscureText,
          validator: validator,
          autovalidateMode: AutovalidateMode.onUserInteraction,
          keyboardType: keyboardType,
          textInputAction: textInputAction,
          onChanged: onChanged,
          onFieldSubmitted: onFieldSubmitted,
          enabled: enabled,
          decoration: InputDecoration(
            hintText: hintText ?? label,
            hintStyle: theme.textTheme.bodyMedium?.copyWith(
              color: cs.onSurfaceVariant,
            ),
            contentPadding: const EdgeInsets.all(16),
            suffixIcon: suffixIcon,
            border: border(cs.outline),
            enabledBorder: border(cs.outline),
            focusedBorder: border(cs.primary),
            errorBorder: border(cs.error),
            focusedErrorBorder: border(cs.error),
            disabledBorder: border(cs.outlineVariant),
          ),
        ),
      ],
    );
  }
}

\n
